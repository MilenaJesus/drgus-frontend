{"ast":null,"code":"import _objectSpread from\"C:/Users/milen/Desktop/4\\xBA ano/projeto/ProjetoDrGus/frontend/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import React,{useState,useEffect,useCallback}from'react';import axios from'axios';import'./Orcamentos.css';import{FontAwesomeIcon}from'@fortawesome/react-fontawesome';import{faTrashCan,faCheck,faQuestionCircle}from'@fortawesome/free-solid-svg-icons';import{useNavigate}from'react-router-dom';import Modal from'../componentes/Modal';import{useToast}from'../context/ToastContext';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const API_BASE_URL=process.env.REACT_APP_API_BASE_URL;const dentesArcadaSuperior=[18,17,16,15,14,13,12,11,21,22,23,24,25,26,27,28];const dentesArcadaInferior=[48,47,46,45,44,43,42,41,31,32,33,34,35,36,37,38];const mockFaces=['V','P','M','D','L'];const mockParcelas=[1,2,3,4,5,6,7,8,9,10,11,12];function Orcamentos(){var _procedimentoData$val;const{showToast}=useToast();const[loading,setLoading]=useState(true);const[error,setError]=useState(null);const[servicos,setServicos]=useState([]);const[pacientes,setPacientes]=useState([]);const[filtroPaciente,setFiltroPaciente]=useState('');const[pacienteSelecionadoId,setPacienteSelecionadoId]=useState('');const[showAutocomplete,setShowAutocomplete]=useState(false);const navigate=useNavigate();const[isAjudaOpen,setIsAjudaOpen]=useState(false);const[selectedDente,setSelectedDente]=useState(null);const[procedimentosDoOrcamento,setProcedimentosDoOrcamento]=useState([]);const[procedimentoData,setProcedimentoData]=useState({dente:'',faces:[],servico:'',valor:''});const[procedimentoAjuda,setProcedimentoAjuda]=useState(\"\");const[orcamentoForm,setOrcamentoForm]=useState({paciente_id:'',data_orcamento:new Date().toISOString().split('T')[0],parcelas:''});const pacientesFiltrados=pacientes.filter(paciente=>(paciente.nome||'').toLowerCase().includes((filtroPaciente||'').toLowerCase()));const handleSelecionarPaciente=paciente=>{var _ref,_ref2,_ref3,_paciente$id_paciente,_paciente$nome;const id=(_ref=(_ref2=(_ref3=(_paciente$id_paciente=paciente===null||paciente===void 0?void 0:paciente.id_paciente)!==null&&_paciente$id_paciente!==void 0?_paciente$id_paciente:paciente===null||paciente===void 0?void 0:paciente.id)!==null&&_ref3!==void 0?_ref3:paciente===null||paciente===void 0?void 0:paciente.pk)!==null&&_ref2!==void 0?_ref2:paciente===null||paciente===void 0?void 0:paciente._id)!==null&&_ref!==void 0?_ref:'';setFiltroPaciente((_paciente$nome=paciente.nome)!==null&&_paciente$nome!==void 0?_paciente$nome:'');setPacienteSelecionadoId(String(id));setOrcamentoForm(prev=>_objectSpread(_objectSpread({},prev),{},{paciente_id:String(id)}));setShowAutocomplete(false);};const handleFiltroChange=e=>{var _e$target$value;const nome=(_e$target$value=e.target.value)!==null&&_e$target$value!==void 0?_e$target$value:'';setFiltroPaciente(nome);setShowAutocomplete(nome.length>0);if(!pacientes.find(p=>p.nome===nome)){setPacienteSelecionadoId('');setOrcamentoForm(prev=>_objectSpread(_objectSpread({},prev),{},{paciente_id:''}));}};const fetchServicos=useCallback(async()=>{try{var _ref4,_response$data$result,_response$data;const token=localStorage.getItem('access_token');if(!token){console.error(\"fetchServicos: Token não encontrado. Redirecionando para login.\");navigate('/login');return;}const response=await axios.get(\"\".concat(API_BASE_URL,\"/api/servicos/\"),{headers:{'Authorization':\"Bearer \".concat(token)}});const services=(_ref4=(_response$data$result=(_response$data=response.data)===null||_response$data===void 0?void 0:_response$data.results)!==null&&_response$data$result!==void 0?_response$data$result:response.data)!==null&&_ref4!==void 0?_ref4:[];setServicos(Array.isArray(services)?services:[]);}catch(err){var _err$response;if((err===null||err===void 0?void 0:(_err$response=err.response)===null||_err$response===void 0?void 0:_err$response.status)===401)navigate('/login');else{setError('Erro ao carregar serviços.');console.error('Erro serv (API):',err.response||err);}}},[navigate]);const fetchPacientes=useCallback(async()=>{try{var _ref5,_response$data$result2,_response$data2;const token=localStorage.getItem('access_token');if(!token){console.error(\"fetchPacientes: Token não encontrado. Redirecionando para login.\");navigate('/login');return;}const response=await axios.get(\"\".concat(API_BASE_URL,\"/api/pacientes/lookup/\"),{headers:{'Authorization':\"Bearer \".concat(token)}});const patients=(_ref5=(_response$data$result2=(_response$data2=response.data)===null||_response$data2===void 0?void 0:_response$data2.results)!==null&&_response$data$result2!==void 0?_response$data$result2:response.data)!==null&&_ref5!==void 0?_ref5:[];if(Array.isArray(patients)){const pacientesCorrigidos=patients.map((p,idx)=>{var _ref6,_ref7,_ref8,_p$id_paciente,_p$nome,_p$cpf;return _objectSpread(_objectSpread({},p),{},{id_paciente:String((_ref6=(_ref7=(_ref8=(_p$id_paciente=p===null||p===void 0?void 0:p.id_paciente)!==null&&_p$id_paciente!==void 0?_p$id_paciente:p===null||p===void 0?void 0:p.id)!==null&&_ref8!==void 0?_ref8:p===null||p===void 0?void 0:p.pk)!==null&&_ref7!==void 0?_ref7:p===null||p===void 0?void 0:p._id)!==null&&_ref6!==void 0?_ref6:\"no-id-\".concat(idx)),nome:(_p$nome=p===null||p===void 0?void 0:p.nome)!==null&&_p$nome!==void 0?_p$nome:'',cpf:(_p$cpf=p===null||p===void 0?void 0:p.cpf)!==null&&_p$cpf!==void 0?_p$cpf:''});});setPacientes(pacientesCorrigidos);}else{setPacientes([]);}}catch(err){var _err$response2;if((err===null||err===void 0?void 0:(_err$response2=err.response)===null||_err$response2===void 0?void 0:_err$response2.status)===401){console.error(\"fetchPacientes: Sessão expirada (401). Redirecionando.\");navigate('/login');}else{setError('Erro ao carregar pacientes.');console.error('Erro pac (API):',err.response||err);}}},[navigate]);useEffect(()=>{setLoading(true);const initData=async()=>{await Promise.all([fetchServicos(),fetchPacientes()]);setLoading(false);};initData();},[fetchServicos,fetchPacientes]);const handleOrcamentoFormChange=e=>{const{name,value}=e.target;setOrcamentoForm(prev=>_objectSpread(_objectSpread({},prev),{},{[name]:value!==null&&value!==void 0?value:''}));};const handleDenteClick=dente=>{const novoDente=selectedDente===dente?null:dente;setSelectedDente(novoDente);setProcedimentoData(prevData=>_objectSpread(_objectSpread({},prevData),{},{dente:novoDente?String(novoDente):''}));};const handleFaceClick=face=>{setProcedimentoData(prevData=>{const newFaces=prevData.faces.includes(face)?prevData.faces.filter(f=>f!==face):[...prevData.faces,face];return _objectSpread(_objectSpread({},prevData),{},{faces:newFaces});});};const handleProcedimentoChange=e=>{var _e$target$value2,_servicoSelecionado$v;const servicold=(_e$target$value2=e.target.value)!==null&&_e$target$value2!==void 0?_e$target$value2:'';const servicoSelecionado=servicos.find(s=>String(s.id_servico)===String(servicold));const novoValor=servicoSelecionado?(_servicoSelecionado$v=servicoSelecionado.valor_referencia)!==null&&_servicoSelecionado$v!==void 0?_servicoSelecionado$v:'':'';setProcedimentoData(prevData=>_objectSpread(_objectSpread({},prevData),{},{servico:servicold,valor:novoValor!==null&&novoValor!==void 0?novoValor:'',dente:servicoSelecionado&&servicoSelecionado.exige_dente?prevData.dente:'',faces:servicoSelecionado&&servicoSelecionado.exige_face?prevData.faces:[]}));if(servicoSelecionado&&!servicoSelecionado.exige_dente)setSelectedDente(null);if(servicoSelecionado){if(servicoSelecionado.exige_dente&&servicoSelecionado.exige_face)setProcedimentoAjuda(\"Este procedimento exige a seleção de Dente e Faces.\");else if(servicoSelecionado.exige_dente)setProcedimentoAjuda(\"Este procedimento exige a seleção de Dente.\");else if(servicoSelecionado.exige_face)setProcedimentoAjuda(\"Este procedimento exige a seleção de Faces.\");else setProcedimentoAjuda(\"\");}else setProcedimentoAjuda(\"\");};const handleAdicionarProcedimento=()=>{const servicoSelecionado=servicos.find(s=>String(s.id_servico)===String(procedimentoData.servico));if(!servicoSelecionado){showToast('Selecione um procedimento válido.');return;}const exigeDente=servicoSelecionado.exige_dente;const exigeFace=servicoSelecionado.exige_face;const denteValido=!exigeDente||procedimentoData.dente&&procedimentoData.dente!=='';const faceValida=!exigeFace||procedimentoData.faces&&procedimentoData.faces.length>0;if(denteValido&&faceValida&&procedimentoData.servico&&procedimentoData.valor!==undefined&&procedimentoData.valor!==''){const novoProcedimento={idTemporario:Date.now(),dente:procedimentoData.dente||null,faces:procedimentoData.faces.join(','),servico:procedimentoData.servico,valor:procedimentoData.valor,nomeServico:servicoSelecionado.desc_servico};setProcedimentosDoOrcamento(prev=>[...prev,novoProcedimento]);setProcedimentoData({dente:'',faces:[],servico:'',valor:''});setSelectedDente(null);setProcedimentoAjuda(\"\");}else{let errorMsg='Preencha todos os detalhes obrigatórios do procedimento.\\n';if(exigeDente&&!denteValido)errorMsg+='- Selecione um dente.\\n';if(exigeFace&&!faceValida)errorMsg+='- Selecione pelo menos uma face.\\n';if(!procedimentoData.servico)errorMsg+='- Selecione um procedimento.\\n';showToast(errorMsg);}};const handleRemoverProcedimento=idTemporario=>{setProcedimentosDoOrcamento(procedimentosAtuais=>procedimentosAtuais.filter(p=>p.idTemporario!==idTemporario));};const calcularTotalEstimado=()=>{return procedimentosDoOrcamento.reduce((total,item)=>total+parseFloat(item.valor||0),0).toFixed(2);};const handleSaveOrcamento=async e=>{e.preventDefault();try{const token=localStorage.getItem('access_token');if(!token){throw new Error('Token de autenticação não encontrado.');}if(!pacienteSelecionadoId){showToast('Por favor, selecione um paciente.');return;}if(procedimentosDoOrcamento.length===0){showToast('Adicione pelo menos um procedimento.');return;}const orcamentoData={paciente:parseInt(pacienteSelecionadoId),data_orcamento:orcamentoForm.data_orcamento,n_vezes:orcamentoForm.parcelas?parseInt(orcamentoForm.parcelas):null,itens_para_criar:procedimentosDoOrcamento.map(proc=>({servico:parseInt(proc.servico),data_execucao:new Date().toISOString().split('T')[0],valor:parseFloat(proc.valor),n_dente:proc.dente||null,face:proc.faces||null}))};await axios.post(\"\".concat(API_BASE_URL,\"/api/orcamentos/\"),orcamentoData,{headers:{'Authorization':\"Bearer \".concat(token)}});showToast('Orçamento salvo com sucesso! As parcelas foram geradas.');setProcedimentosDoOrcamento([]);setOrcamentoForm({paciente_id:'',data_orcamento:new Date().toISOString().split('T')[0],parcelas:''});setPacienteSelecionadoId('');setFiltroPaciente('');}catch(err){var _err$response3;const errorMsg=(_err$response3=err.response)!==null&&_err$response3!==void 0&&_err$response3.data?JSON.stringify(err.response.data):err.message;showToast(\"Erro ao salvar o or\\xE7amento: \".concat(errorMsg));console.error('Erro ao salvar orçamento:',err.response?err.response.data:err);}};const servicoSelecionado=servicos.find(s=>String(s.id_servico)===String(procedimentoData.servico));const exigeDente=servicoSelecionado===null||servicoSelecionado===void 0?void 0:servicoSelecionado.exige_dente;const exigeFace=servicoSelecionado===null||servicoSelecionado===void 0?void 0:servicoSelecionado.exige_face;if(loading)return/*#__PURE__*/_jsx(\"div\",{children:\"Carregando...\"});if(error)return/*#__PURE__*/_jsxs(\"div\",{children:[\"Erro: \",error]});return/*#__PURE__*/_jsxs(\"div\",{className:\"orcamento-container\",children:[error&&/*#__PURE__*/_jsx(\"p\",{className:\"error-message\",children:error}),/*#__PURE__*/_jsx(\"form\",{onSubmit:handleSaveOrcamento,children:/*#__PURE__*/_jsxs(\"div\",{className:\"orcamento-content-wrapper\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"orcamento-details-section\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"section-title\",children:\"Or\\xE7amento:\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-row-compact\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",style:{position:'relative'},children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"filtroPaciente\",children:\"Paciente *\"}),/*#__PURE__*/_jsx(\"input\",{autoComplete:\"off\",type:\"text\",id:\"filtroPaciente\",className:\"input-field\",placeholder:\"Digite o nome para buscar o paciente...\",value:filtroPaciente,onChange:handleFiltroChange,onFocus:()=>setShowAutocomplete(filtroPaciente.length>0),required:true,title:\"Busque pelo nome do paciente para quem o or\\xE7amento ser\\xE1 criado.\"}),showAutocomplete&&filtroPaciente.length>0&&pacientesFiltrados.length>0&&/*#__PURE__*/_jsxs(\"ul\",{className:\"paciente-autocomplete-list\",role:\"listbox\",children:[pacientesFiltrados.slice(0,8).map((paciente,idx)=>{var _ref9,_paciente$id_paciente2,_paciente$cpf;const keySafe=(_ref9=(_paciente$id_paciente2=paciente.id_paciente)!==null&&_paciente$id_paciente2!==void 0?_paciente$id_paciente2:paciente.cpf)!==null&&_ref9!==void 0?_ref9:\"\".concat(paciente.nome,\"-\").concat(idx);return/*#__PURE__*/_jsxs(\"li\",{onMouseDown:()=>handleSelecionarPaciente(paciente),title:\"Selecionar \".concat(paciente.nome),role:\"option\",tabIndex:0,children:[paciente.nome,\" (\",(_paciente$cpf=paciente.cpf)!==null&&_paciente$cpf!==void 0?_paciente$cpf:'',\")\"]},keySafe);}),pacientesFiltrados.length>8&&/*#__PURE__*/_jsx(\"li\",{className:\"autocomplete-info\",children:\"Mais resultados...\"})]}),showAutocomplete&&pacientesFiltrados.length===0&&filtroPaciente.length>0&&/*#__PURE__*/_jsx(\"div\",{className:\"autocomplete-info\",style:{color:'#dc3545'},children:\"Nenhum paciente encontrado.\"}),/*#__PURE__*/_jsx(\"input\",{type:\"hidden\",name:\"paciente_id\",value:pacienteSelecionadoId!==null&&pacienteSelecionadoId!==void 0?pacienteSelecionadoId:''})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"data\",children:\"Data *\"}),/*#__PURE__*/_jsx(\"input\",{type:\"date\",id:\"data\",name:\"data_orcamento\",value:orcamentoForm.data_orcamento,onChange:handleOrcamentoFormChange,className:\"input-field\",required:true,title:\"Data em que o or\\xE7amento est\\xE1 sendo criado.\"})]}),/*#__PURE__*/_jsx(\"div\",{className:\"form-group\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"top-section-wrapper\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"odontograma-vis-container\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"section-title\",children:\"Odontograma\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"odontograma-grid\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"arcada-numeros-superior\",children:dentesArcadaSuperior.map(d=>/*#__PURE__*/_jsx(\"span\",{children:d},d))}),/*#__PURE__*/_jsx(\"div\",{className:\"arcada-superior\",children:dentesArcadaSuperior.map(d=>/*#__PURE__*/_jsx(\"div\",{className:\"dente-box \".concat(selectedDente===d?'selected':''),onClick:()=>exigeDente&&handleDenteClick(d),title:exigeDente?\"Selecionar dente \".concat(d):\"Selecione um procedimento que exija dente.\"},d))}),/*#__PURE__*/_jsx(\"div\",{className:\"arcada-inferior\",children:dentesArcadaInferior.map(d=>/*#__PURE__*/_jsx(\"div\",{className:\"dente-box \".concat(selectedDente===d?'selected':''),onClick:()=>exigeDente&&handleDenteClick(d),title:exigeDente?\"Selecionar dente \".concat(d):\"Selecione um procedimento que exija dente.\"},d))}),/*#__PURE__*/_jsx(\"div\",{className:\"arcada-numeros-inferior\",children:dentesArcadaInferior.map(d=>/*#__PURE__*/_jsx(\"span\",{children:d},d))})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"procedimento-form-card\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"procedimento-header\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"dente-label\",children:\"Dente\"}),/*#__PURE__*/_jsx(\"span\",{className:\"selected-dente\",children:procedimentoData.dente||'Nenhum'})]}),/*#__PURE__*/_jsx(\"div\",{className:\"faces-container\",children:mockFaces.map(face=>/*#__PURE__*/_jsxs(\"button\",{type:\"button\",disabled:!exigeFace,className:\"face-button \".concat(procedimentoData.faces.includes(face)?'selected':''),onClick:()=>exigeFace&&handleFaceClick(face),title:exigeFace?\"Selecionar face \".concat(face):\"Selecione um procedimento que exija faces.\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"face-circle\",children:/*#__PURE__*/_jsx(FontAwesomeIcon,{icon:faCheck,className:\"face-icon\"})}),/*#__PURE__*/_jsx(\"span\",{children:face})]},face))}),/*#__PURE__*/_jsxs(\"div\",{className:\"procedimento-inputs stacked\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"procedimento\",children:\"Procedimento *\"}),/*#__PURE__*/_jsxs(\"select\",{name:\"procedimento\",id:\"procedimento\",value:procedimentoData.servico,onChange:handleProcedimentoChange,className:\"select-field\",title:\"Escolha o servi\\xE7o a ser realizado.\",children:[/*#__PURE__*/_jsx(\"option\",{value:\"\",children:\"Selecione\"}),servicos.map(s=>/*#__PURE__*/_jsx(\"option\",{value:String(s.id_servico),children:s.desc_servico},String(s.id_servico)))]}),procedimentoAjuda&&/*#__PURE__*/_jsx(\"p\",{className:\"procedimento-ajuda-texto\",children:procedimentoAjuda})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"valor\",children:\"Valor (R$) *\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",id:\"valor\",name:\"valor\",value:(_procedimentoData$val=procedimentoData.valor)!==null&&_procedimentoData$val!==void 0?_procedimentoData$val:'',readOnly:true,className:\"input-field input-field-readonly\",title:\"O valor \\xE9 preenchido automaticamente com base no procedimento selecionado.\"})]})]}),/*#__PURE__*/_jsx(\"button\",{type:\"button\",className:\"add-button\",onClick:handleAdicionarProcedimento,title:\"Adicionar o procedimento selecionado \\xE0 lista abaixo.\",children:\"Adicionar ao or\\xE7amento\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"orcamento-details-section\",children:[procedimentosDoOrcamento.length>0?/*#__PURE__*/_jsxs(\"div\",{className:\"tabela-procedimentos-wrapper\",children:[/*#__PURE__*/_jsx(\"h4\",{children:\"Procedimentos Adicionados\"}),/*#__PURE__*/_jsxs(\"table\",{children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{children:\"Dente\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Face\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Procedimento\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Valor (R$)\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Remover\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{children:procedimentosDoOrcamento.map(item=>/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{children:item.dente||'-'}),/*#__PURE__*/_jsx(\"td\",{children:item.faces||'-'}),/*#__PURE__*/_jsx(\"td\",{children:item.nomeServico}),/*#__PURE__*/_jsx(\"td\",{children:parseFloat(item.valor||0).toFixed(2)}),/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsx(\"button\",{type:\"button\",className:\"remove-button\",onClick:()=>handleRemoverProcedimento(item.idTemporario),title:\"Remover este procedimento da lista.\",children:/*#__PURE__*/_jsx(FontAwesomeIcon,{icon:faTrashCan})})})]},item.idTemporario))})]})]}):/*#__PURE__*/_jsx(\"p\",{className:\"no-data-message\",style:{textAlign:'center'},children:\"Nenhum procedimento adicionado ainda.\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"orcamento-footer\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"form-row-compact total-row\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"total\",children:\"Total estimado: \"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",id:\"total\",value:\"R$ \".concat(calcularTotalEstimado()),readOnly:true,className:\"input-field input-field-readonly\",title:\"Soma total dos procedimentos listados.\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"parcelas\",children:\"N\\xB0 de parcelas\"}),/*#__PURE__*/_jsxs(\"select\",{id:\"parcelas\",name:\"parcelas\",className:\"select-field\",value:orcamentoForm.parcelas,onChange:handleOrcamentoFormChange,title:\"Selecione o n\\xFAmero de parcelas para gerar o financeiro deste or\\xE7amento (opcional).\",children:[/*#__PURE__*/_jsx(\"option\",{value:\"\",children:\"Selecione (para gerar parcelas)\"}),mockParcelas.map((num,index)=>/*#__PURE__*/_jsx(\"option\",{value:num,children:num},index))]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"form-group\"})]}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",className:\"button-save\",title:\"Salvar este or\\xE7amento no hist\\xF3rico do paciente.\",children:\"Salvar or\\xE7amento\"})]})]})]})}),/*#__PURE__*/_jsx(\"button\",{className:\"floating-help-button\",onClick:()=>setIsAjudaOpen(true),title:\"Ajuda sobre esta p\\xE1gina\",children:/*#__PURE__*/_jsx(FontAwesomeIcon,{icon:faQuestionCircle})}),/*#__PURE__*/_jsxs(Modal,{isOpen:isAjudaOpen,onClose:()=>setIsAjudaOpen(false),titulo:\"Ajuda - Criar Or\\xE7amento\",footer:/*#__PURE__*/_jsx(\"button\",{className:\"modal-button modal-button-secondary\",onClick:()=>setIsAjudaOpen(false),children:\"Fechar\"}),children:[/*#__PURE__*/_jsx(\"p\",{children:\"Esta tela \\xE9 usada para criar um novo or\\xE7amento para um paciente.\"}),/*#__PURE__*/_jsxs(\"ul\",{style:{paddingLeft:'20px',lineHeight:'1.6'},children:[/*#__PURE__*/_jsxs(\"li\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Paciente e Data:\"}),\" Selecione o paciente e a data do or\\xE7amento (obrigat\\xF3rios).\"]}),/*#__PURE__*/_jsxs(\"li\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Odontograma e Procedimento:\"}),/*#__PURE__*/_jsxs(\"ol\",{style:{paddingLeft:'20px',margin:'5px 0'},children:[/*#__PURE__*/_jsx(\"li\",{children:\"Selecione um \\\"Procedimento\\\".\"}),/*#__PURE__*/_jsx(\"li\",{children:\"Se o procedimento exigir, clique no \\\"Dente\\\" e nas \\\"Faces\\\" correspondentes.\"}),/*#__PURE__*/_jsx(\"li\",{children:\"Clique em \\\"Adicionar ao or\\xE7amento\\\".\"})]})]}),/*#__PURE__*/_jsxs(\"li\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Lista de Procedimentos:\"}),\" Confira os itens adicionados na tabela inferior.\"]}),/*#__PURE__*/_jsxs(\"li\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Parcelas:\"}),\" (Opcional) Selecione um n\\xFAmero de parcelas para que o sistema gere o financeiro automaticamente quando o or\\xE7amento for aprovado.\"]}),/*#__PURE__*/_jsxs(\"li\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Salvar Or\\xE7amento:\"}),\" Salva o or\\xE7amento no hist\\xF3rico do paciente.\"]})]})]})]});}export default Orcamentos;","map":{"version":3,"names":["React","useState","useEffect","useCallback","axios","FontAwesomeIcon","faTrashCan","faCheck","faQuestionCircle","useNavigate","Modal","useToast","jsx","_jsx","jsxs","_jsxs","API_BASE_URL","process","env","REACT_APP_API_BASE_URL","dentesArcadaSuperior","dentesArcadaInferior","mockFaces","mockParcelas","Orcamentos","_procedimentoData$val","showToast","loading","setLoading","error","setError","servicos","setServicos","pacientes","setPacientes","filtroPaciente","setFiltroPaciente","pacienteSelecionadoId","setPacienteSelecionadoId","showAutocomplete","setShowAutocomplete","navigate","isAjudaOpen","setIsAjudaOpen","selectedDente","setSelectedDente","procedimentosDoOrcamento","setProcedimentosDoOrcamento","procedimentoData","setProcedimentoData","dente","faces","servico","valor","procedimentoAjuda","setProcedimentoAjuda","orcamentoForm","setOrcamentoForm","paciente_id","data_orcamento","Date","toISOString","split","parcelas","pacientesFiltrados","filter","paciente","nome","toLowerCase","includes","handleSelecionarPaciente","_ref","_ref2","_ref3","_paciente$id_paciente","_paciente$nome","id","id_paciente","pk","_id","String","prev","_objectSpread","handleFiltroChange","e","_e$target$value","target","value","length","find","p","fetchServicos","_ref4","_response$data$result","_response$data","token","localStorage","getItem","console","response","get","concat","headers","services","data","results","Array","isArray","err","_err$response","status","fetchPacientes","_ref5","_response$data$result2","_response$data2","patients","pacientesCorrigidos","map","idx","_ref6","_ref7","_ref8","_p$id_paciente","_p$nome","_p$cpf","cpf","_err$response2","initData","Promise","all","handleOrcamentoFormChange","name","handleDenteClick","novoDente","prevData","handleFaceClick","face","newFaces","f","handleProcedimentoChange","_e$target$value2","_servicoSelecionado$v","servicold","servicoSelecionado","s","id_servico","novoValor","valor_referencia","exige_dente","exige_face","handleAdicionarProcedimento","exigeDente","exigeFace","denteValido","faceValida","undefined","novoProcedimento","idTemporario","now","join","nomeServico","desc_servico","errorMsg","handleRemoverProcedimento","procedimentosAtuais","calcularTotalEstimado","reduce","total","item","parseFloat","toFixed","handleSaveOrcamento","preventDefault","Error","orcamentoData","parseInt","n_vezes","itens_para_criar","proc","data_execucao","n_dente","post","_err$response3","JSON","stringify","message","children","className","onSubmit","style","position","htmlFor","autoComplete","type","placeholder","onChange","onFocus","required","title","role","slice","_ref9","_paciente$id_paciente2","_paciente$cpf","keySafe","onMouseDown","tabIndex","color","d","onClick","disabled","icon","readOnly","textAlign","num","index","isOpen","onClose","titulo","footer","paddingLeft","lineHeight","margin"],"sources":["C:/Users/milen/Desktop/4º ano/projeto/ProjetoDrGus/frontend/src/paginas/Orcamentos.js"],"sourcesContent":["import React, { useState, useEffect, useCallback } from 'react';\r\nimport axios from 'axios';\r\nimport './Orcamentos.css';\r\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\r\nimport { faTrashCan, faCheck, faQuestionCircle } from '@fortawesome/free-solid-svg-icons';\r\nimport { useNavigate } from 'react-router-dom';\r\nimport Modal from '../componentes/Modal';\r\nimport { useToast } from '../context/ToastContext';\r\n\r\nconst API_BASE_URL = process.env.REACT_APP_API_BASE_URL;\r\nconst dentesArcadaSuperior = [18, 17, 16, 15, 14, 13, 12, 11, 21, 22, 23, 24, 25, 26, 27, 28];\r\nconst dentesArcadaInferior = [48, 47, 46, 45, 44, 43, 42, 41, 31, 32, 33, 34, 35, 36, 37, 38];\r\nconst mockFaces = ['V', 'P', 'M', 'D', 'L'];\r\nconst mockParcelas = [1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12];\r\n\r\nfunction Orcamentos() {\r\n  const { showToast } = useToast();\r\n  const [loading, setLoading] = useState(true);\r\n  const [error, setError] = useState(null);\r\n  const [servicos, setServicos] = useState([]);\r\n  const [pacientes, setPacientes] = useState([]);\r\n  const [filtroPaciente, setFiltroPaciente] = useState('');\r\n  const [pacienteSelecionadoId, setPacienteSelecionadoId] = useState('');\r\n  const [showAutocomplete, setShowAutocomplete] = useState(false);\r\n  const navigate = useNavigate();\r\n  const [isAjudaOpen, setIsAjudaOpen] = useState(false);\r\n  const [selectedDente, setSelectedDente] = useState(null);\r\n  const [procedimentosDoOrcamento, setProcedimentosDoOrcamento] = useState([]);\r\n  const [procedimentoData, setProcedimentoData] = useState({ dente: '', faces: [], servico: '', valor: '' });\r\n  const [procedimentoAjuda, setProcedimentoAjuda] = useState(\"\");\r\n  const [orcamentoForm, setOrcamentoForm] = useState({\r\n    paciente_id: '',\r\n    data_orcamento: new Date().toISOString().split('T')[0],\r\n    parcelas: '',\r\n  });\r\n\r\n  const pacientesFiltrados = pacientes.filter(paciente =>\r\n    (paciente.nome || '').toLowerCase().includes((filtroPaciente || '').toLowerCase())\r\n  );\r\n\r\n  const handleSelecionarPaciente = (paciente) => {\r\n    const id = paciente?.id_paciente ?? paciente?.id ?? paciente?.pk ?? paciente?._id ?? '';\r\n    setFiltroPaciente(paciente.nome ?? '');\r\n    setPacienteSelecionadoId(String(id));\r\n    setOrcamentoForm(prev => ({ ...prev, paciente_id: String(id) }));\r\n    setShowAutocomplete(false);\r\n  };\r\n\r\n  const handleFiltroChange = (e) => {\r\n    const nome = e.target.value ?? '';\r\n    setFiltroPaciente(nome);\r\n    setShowAutocomplete(nome.length > 0);\r\n    if (!pacientes.find(p => p.nome === nome)) {\r\n      setPacienteSelecionadoId('');\r\n      setOrcamentoForm(prev => ({ ...prev, paciente_id: '' }));\r\n    }\r\n  };\r\n\r\n  const fetchServicos = useCallback(async () => {\r\n    try {\r\n      const token = localStorage.getItem('access_token');\r\n      if (!token) {\r\n        console.error(\"fetchServicos: Token não encontrado. Redirecionando para login.\");\r\n        navigate('/login');\r\n        return;\r\n      }\r\n      const response = await axios.get(`${API_BASE_URL}/api/servicos/`, {\r\n        headers: { 'Authorization': `Bearer ${token}` }\r\n      });\r\n      const services = response.data?.results ?? response.data ?? [];\r\n      setServicos(Array.isArray(services) ? services : []);\r\n    } catch (err) {\r\n      if (err?.response?.status === 401) navigate('/login');\r\n      else {\r\n        setError('Erro ao carregar serviços.');\r\n        console.error('Erro serv (API):', err.response || err);\r\n      }\r\n    }\r\n  }, [navigate]);\r\n\r\n  const fetchPacientes = useCallback(async () => {\r\n    try {\r\n      const token = localStorage.getItem('access_token');\r\n      if (!token) {\r\n        console.error(\"fetchPacientes: Token não encontrado. Redirecionando para login.\");\r\n        navigate('/login');\r\n        return;\r\n      }\r\n      const response = await axios.get(`${API_BASE_URL}/api/pacientes/lookup/`, {\r\n        headers: { 'Authorization': `Bearer ${token}` }\r\n      });\r\n      const patients = response.data?.results ?? response.data ?? [];\r\n      if (Array.isArray(patients)) {\r\n        const pacientesCorrigidos = patients.map((p, idx) => ({\r\n          ...p,\r\n          id_paciente: String(p?.id_paciente ?? p?.id ?? p?.pk ?? p?._id ?? `no-id-${idx}`),\r\n          nome: p?.nome ?? '',\r\n          cpf: p?.cpf ?? '',\r\n        }));\r\n        setPacientes(pacientesCorrigidos);\r\n      } else {\r\n        setPacientes([]);\r\n      }\r\n    } catch (err) {\r\n      if (err?.response?.status === 401) {\r\n        console.error(\"fetchPacientes: Sessão expirada (401). Redirecionando.\");\r\n        navigate('/login');\r\n      } else {\r\n        setError('Erro ao carregar pacientes.');\r\n        console.error('Erro pac (API):', err.response || err);\r\n      }\r\n    }\r\n  }, [navigate]);\r\n\r\n  useEffect(() => {\r\n    setLoading(true);\r\n    const initData = async () => {\r\n      await Promise.all([fetchServicos(), fetchPacientes()]);\r\n      setLoading(false);\r\n    };\r\n    initData();\r\n  }, [fetchServicos, fetchPacientes]);\r\n\r\n  const handleOrcamentoFormChange = (e) => {\r\n    const { name, value } = e.target;\r\n    setOrcamentoForm(prev => ({ ...prev, [name]: value ?? '' }));\r\n  };\r\n\r\n  const handleDenteClick = (dente) => {\r\n    const novoDente = selectedDente === dente ? null : dente;\r\n    setSelectedDente(novoDente);\r\n    setProcedimentoData(prevData => ({\r\n      ...prevData,\r\n      dente: novoDente ? String(novoDente) : '',\r\n    }));\r\n  };\r\n\r\n  const handleFaceClick = (face) => {\r\n    setProcedimentoData(prevData => {\r\n      const newFaces = prevData.faces.includes(face)\r\n        ? prevData.faces.filter(f => f !== face)\r\n        : [...prevData.faces, face];\r\n      return { ...prevData, faces: newFaces };\r\n    });\r\n  };\r\n\r\n  const handleProcedimentoChange = (e) => {\r\n    const servicold = e.target.value ?? '';\r\n    const servicoSelecionado = servicos.find(s => String(s.id_servico) === String(servicold));\r\n    const novoValor = servicoSelecionado ? (servicoSelecionado.valor_referencia ?? '') : '';\r\n    setProcedimentoData(prevData => ({\r\n      ...prevData,\r\n      servico: servicold,\r\n      valor: novoValor ?? '',\r\n      dente: (servicoSelecionado && servicoSelecionado.exige_dente) ? prevData.dente : '',\r\n      faces: (servicoSelecionado && servicoSelecionado.exige_face) ? prevData.faces : [],\r\n    }));\r\n    if (servicoSelecionado && !servicoSelecionado.exige_dente) setSelectedDente(null);\r\n\r\n    if (servicoSelecionado) {\r\n      if (servicoSelecionado.exige_dente && servicoSelecionado.exige_face) setProcedimentoAjuda(\"Este procedimento exige a seleção de Dente e Faces.\");\r\n      else if (servicoSelecionado.exige_dente) setProcedimentoAjuda(\"Este procedimento exige a seleção de Dente.\");\r\n      else if (servicoSelecionado.exige_face) setProcedimentoAjuda(\"Este procedimento exige a seleção de Faces.\");\r\n      else setProcedimentoAjuda(\"\");\r\n    } else setProcedimentoAjuda(\"\");\r\n  };\r\n\r\n  const handleAdicionarProcedimento = () => {\r\n    const servicoSelecionado = servicos.find(s => String(s.id_servico) === String(procedimentoData.servico));\r\n    if (!servicoSelecionado) { showToast('Selecione um procedimento válido.'); return; }\r\n    const exigeDente = servicoSelecionado.exige_dente;\r\n    const exigeFace = servicoSelecionado.exige_face;\r\n    const denteValido = !exigeDente || (procedimentoData.dente && procedimentoData.dente !== '');\r\n    const faceValida = !exigeFace || (procedimentoData.faces && procedimentoData.faces.length > 0);\r\n    if (denteValido && faceValida && procedimentoData.servico && (procedimentoData.valor !== undefined && procedimentoData.valor !== '')) {\r\n      const novoProcedimento = {\r\n        idTemporario: Date.now(),\r\n        dente: procedimentoData.dente || null,\r\n        faces: procedimentoData.faces.join(','),\r\n        servico: procedimentoData.servico,\r\n        valor: procedimentoData.valor,\r\n        nomeServico: servicoSelecionado.desc_servico\r\n      };\r\n      setProcedimentosDoOrcamento(prev => [...prev, novoProcedimento]);\r\n      setProcedimentoData({ dente: '', faces: [], servico: '', valor: '' });\r\n      setSelectedDente(null);\r\n      setProcedimentoAjuda(\"\");\r\n    } else {\r\n      let errorMsg = 'Preencha todos os detalhes obrigatórios do procedimento.\\n';\r\n      if (exigeDente && !denteValido) errorMsg += '- Selecione um dente.\\n';\r\n      if (exigeFace && !faceValida) errorMsg += '- Selecione pelo menos uma face.\\n';\r\n      if (!procedimentoData.servico) errorMsg += '- Selecione um procedimento.\\n';\r\n      showToast(errorMsg);\r\n    }\r\n  };\r\n\r\n  const handleRemoverProcedimento = (idTemporario) => {\r\n    setProcedimentosDoOrcamento(procedimentosAtuais =>\r\n      procedimentosAtuais.filter(p => p.idTemporario !== idTemporario)\r\n    );\r\n  };\r\n\r\n  const calcularTotalEstimado = () => {\r\n    return procedimentosDoOrcamento.reduce((total, item) => total + parseFloat(item.valor || 0), 0).toFixed(2);\r\n  };\r\n\r\n  const handleSaveOrcamento = async (e) => {\r\n    e.preventDefault();\r\n    try {\r\n      const token = localStorage.getItem('access_token');\r\n      if (!token) { throw new Error('Token de autenticação não encontrado.'); }\r\n      if (!pacienteSelecionadoId) { showToast('Por favor, selecione um paciente.'); return; }\r\n      if (procedimentosDoOrcamento.length === 0) { showToast('Adicione pelo menos um procedimento.'); return; }\r\n\r\n      const orcamentoData = {\r\n        paciente: parseInt(pacienteSelecionadoId),\r\n        data_orcamento: orcamentoForm.data_orcamento,\r\n        n_vezes: orcamentoForm.parcelas ? parseInt(orcamentoForm.parcelas) : null,\r\n        itens_para_criar: procedimentosDoOrcamento.map(proc => ({\r\n          servico: parseInt(proc.servico),\r\n          data_execucao: new Date().toISOString().split('T')[0],\r\n          valor: parseFloat(proc.valor),\r\n          n_dente: proc.dente || null,\r\n          face: proc.faces || null,\r\n        })),\r\n      };\r\n\r\n      await axios.post(`${API_BASE_URL}/api/orcamentos/`, orcamentoData, {\r\n        headers: { 'Authorization': `Bearer ${token}` }\r\n      });\r\n\r\n      showToast('Orçamento salvo com sucesso! As parcelas foram geradas.');\r\n      setProcedimentosDoOrcamento([]);\r\n      setOrcamentoForm({ paciente_id: '', data_orcamento: new Date().toISOString().split('T')[0], parcelas: '' });\r\n      setPacienteSelecionadoId('');\r\n      setFiltroPaciente('');\r\n    } catch (err) {\r\n      const errorMsg = err.response?.data ? JSON.stringify(err.response.data) : err.message;\r\n      showToast(`Erro ao salvar o orçamento: ${errorMsg}`);\r\n      console.error('Erro ao salvar orçamento:', err.response ? err.response.data : err);\r\n    }\r\n  };\r\n\r\n  const servicoSelecionado = servicos.find(s => String(s.id_servico) === String(procedimentoData.servico));\r\n  const exigeDente = servicoSelecionado?.exige_dente;\r\n  const exigeFace = servicoSelecionado?.exige_face;\r\n\r\n  if (loading) return <div>Carregando...</div>;\r\n  if (error) return <div>Erro: {error}</div>;\r\n\r\n  return (\r\n    <div className=\"orcamento-container\">\r\n      {error && <p className=\"error-message\">{error}</p>}\r\n\r\n      <form onSubmit={handleSaveOrcamento}>\r\n        <div className=\"orcamento-content-wrapper\">\r\n          <div className=\"orcamento-details-section\">\r\n            <h3 className=\"section-title\">Orçamento:</h3>\r\n            <div className=\"form-row-compact\">\r\n              <div className=\"form-group\" style={{ position: 'relative' }}>\r\n                <label htmlFor=\"filtroPaciente\">Paciente *</label>\r\n                <input\r\n                  autoComplete=\"off\"\r\n                  type=\"text\"\r\n                  id=\"filtroPaciente\"\r\n                  className=\"input-field\"\r\n                  placeholder=\"Digite o nome para buscar o paciente...\"\r\n                  value={filtroPaciente}\r\n                  onChange={handleFiltroChange}\r\n                  onFocus={() => setShowAutocomplete(filtroPaciente.length > 0)}\r\n                  required\r\n                  title=\"Busque pelo nome do paciente para quem o orçamento será criado.\"\r\n                />\r\n\r\n                {showAutocomplete && filtroPaciente.length > 0 && pacientesFiltrados.length > 0 && (\r\n                  <ul className=\"paciente-autocomplete-list\" role=\"listbox\">\r\n                    {pacientesFiltrados.slice(0, 8).map((paciente, idx) => {\r\n                      const keySafe = paciente.id_paciente ?? paciente.cpf ?? `${paciente.nome}-${idx}`;\r\n                      return (\r\n                        <li\r\n                          key={keySafe}\r\n                          onMouseDown={() => handleSelecionarPaciente(paciente)}\r\n                          title={`Selecionar ${paciente.nome}`}\r\n                          role=\"option\"\r\n                          tabIndex={0}\r\n                        >\r\n                          {paciente.nome} ({paciente.cpf ?? ''})\r\n                        </li>\r\n                      );\r\n                    })}\r\n                    {pacientesFiltrados.length > 8 && (\r\n                      <li className=\"autocomplete-info\">Mais resultados...</li>\r\n                    )}\r\n                  </ul>\r\n                )}\r\n\r\n                {/*Mensagem de erro se digitou e não achou*/}\r\n                {showAutocomplete && pacientesFiltrados.length === 0 && filtroPaciente.length > 0 && (\r\n                  <div className=\"autocomplete-info\" style={{ color: '#dc3545' }}>\r\n                    Nenhum paciente encontrado.\r\n                  </div>\r\n                )}\r\n\r\n                {/*Campo oculto para submissão*/}\r\n                <input type=\"hidden\" name=\"paciente_id\" value={pacienteSelecionadoId ?? ''} />\r\n              </div>\r\n\r\n              <div className=\"form-group\">\r\n                <label htmlFor=\"data\">Data *</label>\r\n                <input type=\"date\" id=\"data\" name=\"data_orcamento\" value={orcamentoForm.data_orcamento}\r\n                  onChange={handleOrcamentoFormChange} className=\"input-field\" required\r\n                  title=\"Data em que o orçamento está sendo criado.\"\r\n                />\r\n              </div>\r\n\r\n              <div className=\"form-group\">\r\n                {/* Espaçador */}\r\n              </div>\r\n\r\n            </div>\r\n          </div>\r\n\r\n          <div className=\"top-section-wrapper\">\r\n            <div className=\"odontograma-vis-container\">\r\n              <h2 className=\"section-title\">Odontograma</h2>\r\n              <div className=\"odontograma-grid\">\r\n                <div className=\"arcada-numeros-superior\">{dentesArcadaSuperior.map(d => <span key={d}>{d}</span>)}</div>\r\n                <div className=\"arcada-superior\">{dentesArcadaSuperior.map(d => (\r\n                  <div\r\n                    key={d}\r\n                    className={`dente-box ${selectedDente === d ? 'selected' : ''}`}\r\n                    onClick={() => exigeDente && handleDenteClick(d)}\r\n                    title={exigeDente ? `Selecionar dente ${d}` : \"Selecione um procedimento que exija dente.\"}\r\n                  ></div>\r\n                ))}</div>\r\n                <div className=\"arcada-inferior\">{dentesArcadaInferior.map(d => (\r\n                  <div\r\n                    key={d}\r\n                    className={`dente-box ${selectedDente === d ? 'selected' : ''}`}\r\n                    onClick={() => exigeDente && handleDenteClick(d)}\r\n                    title={exigeDente ? `Selecionar dente ${d}` : \"Selecione um procedimento que exija dente.\"}\r\n                  ></div>\r\n                ))}</div>\r\n                <div className=\"arcada-numeros-inferior\">{dentesArcadaInferior.map(d => <span key={d}>{d}</span>)}</div>\r\n              </div>\r\n            </div>\r\n            <div className=\"procedimento-form-card\">\r\n              <div className=\"procedimento-header\">\r\n                <label className=\"dente-label\">Dente</label>\r\n                <span className=\"selected-dente\">{procedimentoData.dente || 'Nenhum'}</span>\r\n              </div>\r\n              <div className=\"faces-container\">\r\n                {mockFaces.map(face => (\r\n                  <button\r\n                    type=\"button\"\r\n                    key={face}\r\n                    disabled={!exigeFace}\r\n                    className={`face-button ${procedimentoData.faces.includes(face) ? 'selected' : ''}`}\r\n                    onClick={() => exigeFace && handleFaceClick(face)}\r\n                    title={exigeFace ? `Selecionar face ${face}` : \"Selecione um procedimento que exija faces.\"}\r\n                  >\r\n                    <div className=\"face-circle\"><FontAwesomeIcon icon={faCheck} className=\"face-icon\" /></div>\r\n                    <span>{face}</span>\r\n                  </button>\r\n                ))}\r\n              </div>\r\n              <div className=\"procedimento-inputs stacked\">\r\n                <div className=\"form-group\">\r\n                  <label htmlFor=\"procedimento\">Procedimento *</label>\r\n                  <select\r\n                    name=\"procedimento\"\r\n                    id=\"procedimento\"\r\n                    value={procedimentoData.servico}\r\n                    onChange={handleProcedimentoChange}\r\n                    className=\"select-field\"\r\n                    title=\"Escolha o serviço a ser realizado.\"\r\n                  >\r\n                    <option value=\"\">Selecione</option>\r\n                    {servicos.map(s => (<option key={String(s.id_servico)} value={String(s.id_servico)}>{s.desc_servico}</option>))}\r\n                  </select>\r\n                  {procedimentoAjuda && (\r\n                    <p className=\"procedimento-ajuda-texto\">{procedimentoAjuda}</p>\r\n                  )}\r\n                </div>\r\n                <div className=\"form-group\">\r\n                  <label htmlFor=\"valor\">Valor (R$) *</label>\r\n                  <input\r\n                    type=\"text\"\r\n                    id=\"valor\"\r\n                    name=\"valor\"\r\n                    value={procedimentoData.valor ?? ''}\r\n                    readOnly\r\n                    className=\"input-field input-field-readonly\"\r\n                    title=\"O valor é preenchido automaticamente com base no procedimento selecionado.\"\r\n                  />\r\n                </div>\r\n              </div>\r\n              <button\r\n                type=\"button\"\r\n                className=\"add-button\"\r\n                onClick={handleAdicionarProcedimento}\r\n                title=\"Adicionar o procedimento selecionado à lista abaixo.\"\r\n              >\r\n                Adicionar ao orçamento\r\n              </button>\r\n            </div>\r\n          </div>\r\n\r\n          <div className=\"orcamento-details-section\">\r\n            {procedimentosDoOrcamento.length > 0 ? (\r\n              <div className=\"tabela-procedimentos-wrapper\">\r\n                <h4>Procedimentos Adicionados</h4>\r\n                <table>\r\n                  <thead>\r\n                    <tr>\r\n                      <th>Dente</th>\r\n                      <th>Face</th>\r\n                      <th>Procedimento</th>\r\n                      <th>Valor (R$)</th>\r\n                      <th>Remover</th>\r\n                    </tr>\r\n                  </thead>\r\n                  <tbody>\r\n                    {procedimentosDoOrcamento.map((item) => (\r\n                      <tr key={item.idTemporario}>\r\n                        <td>{item.dente || '-'}</td>\r\n                        <td>{item.faces || '-'}</td>\r\n                        <td>{item.nomeServico}</td>\r\n                        <td>{(parseFloat(item.valor || 0)).toFixed(2)}</td>\r\n                        <td>\r\n                          <button\r\n                            type=\"button\"\r\n                            className=\"remove-button\"\r\n                            onClick={() => handleRemoverProcedimento(item.idTemporario)}\r\n                            title=\"Remover este procedimento da lista.\"\r\n                          >\r\n                            <FontAwesomeIcon icon={faTrashCan} />\r\n                          </button>\r\n                        </td>\r\n                      </tr>\r\n                    ))}\r\n                  </tbody>\r\n                </table>\r\n              </div>\r\n            ) : (\r\n              <p className='no-data-message' style={{textAlign: 'center'}}>Nenhum procedimento adicionado ainda.</p>\r\n            )}\r\n\r\n            <div className=\"orcamento-footer\">\r\n              <div className=\"form-row-compact total-row\">\r\n                <div className=\"form-group\">\r\n                  <label htmlFor=\"total\">Total estimado: </label>\r\n                  <input type=\"text\" id=\"total\" value={`R$ ${calcularTotalEstimado()}`} readOnly\r\n                    className=\"input-field input-field-readonly\"\r\n                    title=\"Soma total dos procedimentos listados.\"\r\n                  />\r\n                </div>\r\n                <div className=\"form-group\">\r\n                  <label htmlFor=\"parcelas\">N° de parcelas</label>\r\n                  <select\r\n                    id=\"parcelas\"\r\n                    name=\"parcelas\"\r\n                    className=\"select-field\"\r\n                    value={orcamentoForm.parcelas}\r\n                    onChange={handleOrcamentoFormChange}\r\n                    title=\"Selecione o número de parcelas para gerar o financeiro deste orçamento (opcional).\"\r\n                  >\r\n                    <option value=\"\">Selecione (para gerar parcelas)</option>\r\n                    {mockParcelas.map((num, index) => (\r\n                      <option key={index} value={num}>{num}</option>\r\n                    ))}\r\n                  </select>\r\n                </div>\r\n                <div className=\"form-group\">\r\n                </div>\r\n              </div>\r\n              <button\r\n                type=\"submit\"\r\n                className=\"button-save\"\r\n                title=\"Salvar este orçamento no histórico do paciente.\"\r\n              >\r\n                Salvar orçamento\r\n              </button>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </form>\r\n\r\n      <button\r\n        className=\"floating-help-button\"\r\n        onClick={() => setIsAjudaOpen(true)}\r\n        title=\"Ajuda sobre esta página\"\r\n      >\r\n        <FontAwesomeIcon icon={faQuestionCircle} />\r\n      </button>\r\n\r\n      <Modal\r\n        isOpen={isAjudaOpen}\r\n        onClose={() => setIsAjudaOpen(false)}\r\n        titulo=\"Ajuda - Criar Orçamento\"\r\n        footer={\r\n          <button\r\n            className=\"modal-button modal-button-secondary\"\r\n            onClick={() => setIsAjudaOpen(false)}\r\n          >\r\n            Fechar\r\n          </button>\r\n        }\r\n      >\r\n        <p>Esta tela é usada para criar um novo orçamento para um paciente.</p>\r\n        <ul style={{ paddingLeft: '20px', lineHeight: '1.6' }}>\r\n          <li>\r\n            <strong>Paciente e Data:</strong> Selecione o paciente e a data do orçamento (obrigatórios).\r\n          </li>\r\n          <li>\r\n            <strong>Odontograma e Procedimento:</strong>\r\n            <ol style={{ paddingLeft: '20px', margin: '5px 0' }}>\r\n              <li>Selecione um \"Procedimento\".</li>\r\n              <li>Se o procedimento exigir, clique no \"Dente\" e nas \"Faces\" correspondentes.</li>\r\n              <li>Clique em \"Adicionar ao orçamento\".</li>\r\n            </ol>\r\n          </li>\r\n          <li>\r\n            <strong>Lista de Procedimentos:</strong> Confira os itens adicionados na tabela inferior.\r\n          </li>\r\n          <li>\r\n            <strong>Parcelas:</strong> (Opcional) Selecione um número de parcelas para que o sistema gere o financeiro automaticamente quando o orçamento for aprovado.\r\n          </li>\r\n          <li>\r\n            <strong>Salvar Orçamento:</strong> Salva o orçamento no histórico do paciente.\r\n          </li>\r\n        </ul>\r\n      </Modal>\r\n\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default Orcamentos;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}