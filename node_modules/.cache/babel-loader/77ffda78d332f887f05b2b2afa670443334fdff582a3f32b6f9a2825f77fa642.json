{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\milen\\\\Desktop\\\\4\\xBA ano\\\\projeto\\\\ProjetoDrGus\\\\frontend\\\\src\\\\paginas\\\\Pagamentos.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect, useCallback } from 'react';\nimport axios from 'axios';\nimport './Pagamentos.css';\nimport { useNavigate } from 'react-router-dom';\nimport { format } from 'date-fns';\nimport Modal from '../componentes/Modal';\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\nimport { faQuestionCircle } from '@fortawesome/free-solid-svg-icons';\nimport { jsxDEV as _jsxDEV, Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst API_BASE_URL = 'http://localhost:8000';\nconst mockFormasPagamento = ['Cartão de Crédito', 'Débito', 'Pix', 'Dinheiro'];\nfunction Pagamentos() {\n  _s();\n  //Estados\n  const [pacientes, setPacientes] = useState([]);\n  const [selectedPacienteId, setSelectedPacienteId] = useState('');\n  const [loadingPacientes, setLoadingPacientes] = useState(true);\n  const [loadingParcelas, setLoadingParcelas] = useState(false);\n  const [error, setError] = useState(null);\n  const navigate = useNavigate();\n  const [abaAtiva, setAbaAtiva] = useState('registrar'); // 'registrar' ou 'historico'\n  const [modoDeExibicao, setModoDeExibicao] = useState('lista'); // 'lista' ou 'formulario'\n\n  const [parcelasPendentes, setParcelasPendentes] = useState([]);\n  const [parcelasPagas, setParcelasPagas] = useState([]);\n  const [selectedParcela, setSelectedParcela] = useState(null);\n  const [recebimentoData, setRecebimentoData] = useState({\n    data_recebimento: '',\n    valor_recebido: '',\n    tipo: ''\n  });\n\n  // --- Funções de Busca ---\n  const fetchPacientes = useCallback(async () => {\n    try {\n      const token = localStorage.getItem('access_token');\n      if (!token) throw new Error('Token de autenticação não encontrado.');\n      const response = await axios.get(`${API_BASE_URL}/api/pacientes/`, {\n        headers: {\n          'Authorization': `Bearer ${token}`\n        }\n      });\n      setPacientes(response.data.results || response.data || []);\n    } catch (err) {\n      console.error('Erro ao buscar pacientes:', err);\n      setError('Falha ao carregar pacientes.');\n      if (err.response && err.response.status === 401) {\n        alert('Sessão expirada. Faça login novamente.');\n        navigate('/login');\n      }\n    }\n  }, [navigate]);\n  const fetchParcelasDoPaciente = useCallback(async pacienteId => {\n    if (!pacienteId) {\n      setParcelasPendentes([]);\n      setParcelasPagas([]); // Limpa também o histórico\n      setSelectedParcela(null);\n      setError(null);\n      return;\n    }\n    setLoadingParcelas(true);\n    setError(null);\n    setSelectedParcela(null);\n    setModoDeExibicao('lista'); // Garante que a aba registrar volte para a lista\n\n    try {\n      const token = localStorage.getItem('access_token');\n      if (!token) throw new Error('Token não encontrado.');\n\n      // O filtro de backend 'paciente_id' já busca pelo 'orcamento__paciente'\n      // Removemos o filtro de status para pegar TODAS (Pagas, Pendentes, Atrasadas)\n      const response = await axios.get(`${API_BASE_URL}/api/parcelas/`, {\n        headers: {\n          'Authorization': `Bearer ${token}`\n        },\n        params: {\n          paciente_id: pacienteId\n        }\n      });\n      const todasParcelas = response.data.results || response.data || [];\n\n      // Filtra as parcelas em listas separadas\n      const pendentes = todasParcelas.filter(p => p.status === 'Pendente' || p.status === 'Atrasado');\n      const pagas = todasParcelas.filter(p => p.status === 'Pago');\n      setParcelasPendentes(pendentes);\n      setParcelasPagas(pagas);\n    } catch (err) {\n      console.error('Erro ao buscar parcelas:', err);\n      setError('Falha ao carregar parcelas do paciente.');\n      setParcelasPendentes([]);\n      setParcelasPagas([]);\n      if (err.response && err.response.status === 401) {\n        alert('Sessão expirada. Faça login novamente.');\n        navigate('/login');\n      }\n    } finally {\n      setLoadingParcelas(false);\n    }\n  }, [navigate]);\n\n  // Efeito inicial para buscar pacientes\n  useEffect(() => {\n    setLoadingPacientes(true);\n    fetchPacientes().finally(() => setLoadingPacientes(false));\n  }, [fetchPacientes]);\n\n  // Handlers\n  const handlePacienteChange = e => {\n    const pacienteId = e.target.value;\n    setSelectedPacienteId(pacienteId);\n    setAbaAtiva('registrar'); // Volta para a aba principal\n    setModoDeExibicao('lista'); // Reseta a sub-view\n    fetchParcelasDoPaciente(pacienteId);\n  };\n\n  // Handler para selecionar a parcela\n  const handleParcelaSelect = parcela => {\n    setSelectedParcela(parcela);\n    setRecebimentoData({\n      valor_recebido: parseFloat(parcela.valor_parcela).toFixed(2),\n      data_recebimento: format(new Date(), 'yyyy-MM-dd'),\n      tipo: ''\n    });\n    setModoDeExibicao('formulario'); // Muda para o formulário\n  };\n  const handleRecebimentoInputChange = e => {\n    const {\n      name,\n      value\n    } = e.target;\n    setRecebimentoData(prevState => ({\n      ...prevState,\n      [name]: value\n    }));\n  };\n\n  // Handler para salvar \n  const handleSaveRecebimento = async e => {\n    e.preventDefault();\n    if (!selectedParcela) {\n      alert('Selecione uma parcela...');\n      return;\n    }\n    const token = localStorage.getItem('access_token');\n    const userId = localStorage.getItem('user_id');\n    if (!token || !userId) {\n      alert('Erro de autenticação...');\n      navigate('/');\n      return;\n    }\n    if (!recebimentoData.data_recebimento || !recebimentoData.valor_recebido || !recebimentoData.tipo) {\n      alert('Preencha todos os campos...');\n      return;\n    }\n    try {\n      const dataParaBackend = {\n        parcela: selectedParcela.id_parcela,\n        usuario: parseInt(userId),\n        data_recebimento: recebimentoData.data_recebimento,\n        valor_recebido: parseFloat(recebimentoData.valor_recebido),\n        tipo: recebimentoData.tipo\n      };\n      await axios.post(`${API_BASE_URL}/api/recebimentos/`, dataParaBackend, {\n        headers: {\n          'Authorization': `Bearer ${token}`\n        }\n      });\n      alert('Recebimento registrado com sucesso!');\n      fetchParcelasDoPaciente(selectedPacienteId); // RECARREGA TUDO (pagas e pendentes)\n\n      // Limpa os dados e volta para a lista\n      setSelectedParcela(null);\n      setRecebimentoData({\n        data_recebimento: '',\n        valor_recebido: '',\n        tipo: ''\n      });\n      setModoDeExibicao('lista'); // Volta para a lista\n    } catch (err) {\n      let errorMessage = \"Erro desconhecido.\";\n      if (err.response && err.response.data) {\n        const responseData = err.response.data;\n        console.error('Erro backend:', responseData);\n        if (responseData.non_field_errors) {\n          errorMessage = responseData.non_field_errors.join(' ');\n        } else if (responseData.detail) {\n          errorMessage = responseData.detail;\n        } else {\n          errorMessage = JSON.stringify(responseData);\n        }\n      } else {\n        errorMessage = err.message;\n      }\n      alert(`Erro ao registrar recebimento: ${errorMessage}`);\n      setError(errorMessage);\n    }\n  };\n\n  // Handler para o botão \"Voltar\" / \"Cancelar\" \n  const handleCancelarSelecao = () => {\n    setModoDeExibicao('lista');\n    setSelectedParcela(null);\n    setRecebimentoData({\n      data_recebimento: '',\n      valor_recebido: '',\n      tipo: ''\n    });\n    setError(null);\n  };\n\n  // Função para formatar data DD/MM/YYYY\n  const formatDateBR = dateString => {\n    if (!dateString) return '-';\n    try {\n      return format(new Date(dateString + 'T00:00:00'), 'dd/MM/yyyy');\n    } catch (e) {\n      console.error(\"Erro formatando data:\", dateString, e);\n      return dateString;\n    }\n  };\n  if (loadingPacientes) return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"loading-message\",\n    children: \"Carregando pacientes...\"\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 196,\n    columnNumber: 32\n  }, this);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"pagamentos-container\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"card-section\",\n      children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n        children: \"Controle de Pagamentos\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 202,\n        columnNumber: 9\n      }, this), error && /*#__PURE__*/_jsxDEV(\"p\", {\n        className: \"error-message\",\n        children: error\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 203,\n        columnNumber: 19\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"form-group\",\n        children: [/*#__PURE__*/_jsxDEV(\"label\", {\n          htmlFor: \"paciente\",\n          children: \"Selecione o Paciente:\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 205,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n          id: \"paciente\",\n          name: \"paciente\",\n          value: selectedPacienteId,\n          onChange: handlePacienteChange,\n          required: true,\n          className: \"select-field\",\n          children: [/*#__PURE__*/_jsxDEV(\"option\", {\n            value: \"\",\n            children: \"Selecione...\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 207,\n            columnNumber: 13\n          }, this), pacientes.map(p => /*#__PURE__*/_jsxDEV(\"option\", {\n            value: p.id_paciente,\n            children: p.nome\n          }, p.id_paciente, false, {\n            fileName: _jsxFileName,\n            lineNumber: 208,\n            columnNumber: 34\n          }, this))]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 206,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 204,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 201,\n      columnNumber: 7\n    }, this), selectedPacienteId && /*#__PURE__*/_jsxDEV(_Fragment, {\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"pagamentos-tabs-container\",\n        children: [/*#__PURE__*/_jsxDEV(\"button\", {\n          className: `tab-button ${abaAtiva === 'registrar' ? 'active' : ''}`,\n          onClick: () => setAbaAtiva('registrar'),\n          children: \"Registrar Pagamento (Pendentes)\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 216,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          className: `tab-button ${abaAtiva === 'historico' ? 'active' : ''}`,\n          onClick: () => setAbaAtiva('historico'),\n          children: \"Hist\\xF3rico (Pagos)\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 222,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 215,\n        columnNumber: 11\n      }, this), loadingParcelas && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"loading-message\",\n        children: \"Buscando parcelas...\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 230,\n        columnNumber: 31\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          display: abaAtiva === 'registrar' ? 'block' : 'none'\n        },\n        children: [modoDeExibicao === 'lista' && !loadingParcelas && /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"card-section\",\n          children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n            children: \"Parcelas Pendentes / Atrasadas\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 235,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"parcelas-tabela-wrapper\",\n            children: /*#__PURE__*/_jsxDEV(\"table\", {\n              className: \"parcelas-tabela\",\n              children: [/*#__PURE__*/_jsxDEV(\"thead\", {\n                children: /*#__PURE__*/_jsxDEV(\"tr\", {\n                  children: [/*#__PURE__*/_jsxDEV(\"th\", {\n                    children: \"Selecionar\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 239,\n                    columnNumber: 27\n                  }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                    children: \"ID Parcela\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 239,\n                    columnNumber: 46\n                  }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                    children: \"Vencimento\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 239,\n                    columnNumber: 65\n                  }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                    children: \"Valor (R$)\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 239,\n                    columnNumber: 84\n                  }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                    children: \"Status\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 239,\n                    columnNumber: 103\n                  }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                    children: \"Or\\xE7amento ID\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 239,\n                    columnNumber: 118\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 239,\n                  columnNumber: 23\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 238,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"tbody\", {\n                children: parcelasPendentes.length > 0 ? parcelasPendentes.map(parcela => /*#__PURE__*/_jsxDEV(\"tr\", {\n                  children: [/*#__PURE__*/_jsxDEV(\"td\", {\n                    children: /*#__PURE__*/_jsxDEV(\"button\", {\n                      onClick: () => handleParcelaSelect(parcela),\n                      className: \"button-select-parcela\",\n                      children: \"Pagar\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 245,\n                      columnNumber: 33\n                    }, this)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 245,\n                    columnNumber: 29\n                  }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                    children: parcela.id_parcela\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 246,\n                    columnNumber: 29\n                  }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                    children: formatDateBR(parcela.data_vencimento)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 247,\n                    columnNumber: 29\n                  }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                    children: parseFloat(parcela.valor_parcela).toFixed(2)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 248,\n                    columnNumber: 29\n                  }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                    children: parcela.status\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 249,\n                    columnNumber: 29\n                  }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                    children: parcela.orcamento\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 250,\n                    columnNumber: 29\n                  }, this)]\n                }, parcela.id_parcela, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 244,\n                  columnNumber: 27\n                }, this)) : /*#__PURE__*/_jsxDEV(\"tr\", {\n                  children: /*#__PURE__*/_jsxDEV(\"td\", {\n                    colSpan: \"6\",\n                    style: {\n                      textAlign: 'center'\n                    },\n                    children: \"Nenhuma parcela pendente para este paciente.\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 255,\n                    columnNumber: 27\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 254,\n                  columnNumber: 25\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 241,\n                columnNumber: 21\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 237,\n              columnNumber: 19\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 236,\n            columnNumber: 17\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 234,\n          columnNumber: 15\n        }, this), modoDeExibicao === 'formulario' && selectedParcela && /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"card-section\",\n          children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n            children: \"Registrar Pagamento da Parcela\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 266,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            style: {\n              marginTop: '-1rem',\n              marginBottom: '1.5rem',\n              fontSize: '0.9rem',\n              color: '#555'\n            },\n            children: [\"Vencimento: \", formatDateBR(selectedParcela.data_vencimento), ' - ', \"Valor: R$ \", parseFloat(selectedParcela.valor_parcela).toFixed(2)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 267,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"form-row\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"form-group\",\n              children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                children: \"Valor da Parcela:\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 274,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                type: \"text\",\n                value: `R$ ${parseFloat(selectedParcela.valor_parcela).toFixed(2)}`,\n                className: \"input-field-readonly\",\n                readOnly: true\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 275,\n                columnNumber: 21\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 273,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"form-group\",\n              children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                children: \"Data de Vencimento:\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 278,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                type: \"text\",\n                value: formatDateBR(selectedParcela.data_vencimento),\n                className: \"input-field-readonly\",\n                readOnly: true\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 279,\n                columnNumber: 21\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 277,\n              columnNumber: 19\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 272,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n            onSubmit: handleSaveRecebimento,\n            className: \"pagamentos-form-simple\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"form-row\",\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"form-group\",\n                children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                  htmlFor: \"data_recebimento\",\n                  children: \"Data do Pagamento: *\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 285,\n                  columnNumber: 23\n                }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                  type: \"date\",\n                  id: \"data_recebimento\",\n                  name: \"data_recebimento\",\n                  value: recebimentoData.data_recebimento,\n                  onChange: handleRecebimentoInputChange,\n                  required: true,\n                  className: \"input-field\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 286,\n                  columnNumber: 23\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 284,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"form-group\",\n                children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                  htmlFor: \"valor_recebido\",\n                  children: \"Valor Recebido (R$): *\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 289,\n                  columnNumber: 23\n                }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                  type: \"number\",\n                  id: \"valor_recebido\",\n                  name: \"valor_recebido\",\n                  value: recebimentoData.valor_recebido,\n                  onChange: handleRecebimentoInputChange,\n                  step: \"0.01\",\n                  required: true,\n                  className: \"input-field\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 290,\n                  columnNumber: 23\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 288,\n                columnNumber: 21\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 283,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"form-row\",\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"form-group\",\n                children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                  htmlFor: \"tipo\",\n                  children: \"Forma de Pagamento: *\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 295,\n                  columnNumber: 23\n                }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n                  id: \"tipo\",\n                  name: \"tipo\",\n                  value: recebimentoData.tipo,\n                  onChange: handleRecebimentoInputChange,\n                  required: true,\n                  className: \"select-field\",\n                  children: [/*#__PURE__*/_jsxDEV(\"option\", {\n                    value: \"\",\n                    children: \"Selecione\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 297,\n                    columnNumber: 25\n                  }, this), mockFormasPagamento.map((forma, index) => /*#__PURE__*/_jsxDEV(\"option\", {\n                    value: forma,\n                    children: forma\n                  }, index, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 298,\n                    columnNumber: 69\n                  }, this))]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 296,\n                  columnNumber: 23\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 294,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"form-group\",\n                style: {\n                  flex: 1\n                }\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 301,\n                columnNumber: 21\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 293,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"form-actions-pagamento\",\n              style: {\n                justifyContent: 'space-between'\n              },\n              children: [/*#__PURE__*/_jsxDEV(\"button\", {\n                type: \"button\",\n                className: \"button-secondary\",\n                onClick: handleCancelarSelecao,\n                children: \"Cancelar Sele\\xE7\\xE3o\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 304,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                type: \"submit\",\n                className: \"button-primary\",\n                children: \"Confirmar Recebimento\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 307,\n                columnNumber: 21\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 303,\n              columnNumber: 19\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 282,\n            columnNumber: 17\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 265,\n          columnNumber: 15\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 232,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          display: abaAtiva === 'historico' ? 'block' : 'none'\n        },\n        children: !loadingParcelas && /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"card-section\",\n          children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n            children: \"Hist\\xF3rico de Parcelas Pagas\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 317,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"parcelas-tabela-wrapper\",\n            children: /*#__PURE__*/_jsxDEV(\"table\", {\n              className: \"parcelas-tabela\",\n              children: [/*#__PURE__*/_jsxDEV(\"thead\", {\n                children: /*#__PURE__*/_jsxDEV(\"tr\", {\n                  children: [/*#__PURE__*/_jsxDEV(\"th\", {\n                    children: \"ID Parcela\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 322,\n                    columnNumber: 25\n                  }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                    children: \"Vencimento\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 323,\n                    columnNumber: 25\n                  }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                    children: \"Valor (R$)\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 324,\n                    columnNumber: 25\n                  }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                    children: \"Status\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 325,\n                    columnNumber: 25\n                  }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                    children: \"Data Pagamento\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 326,\n                    columnNumber: 25\n                  }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                    children: \"Forma Pagamento\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 327,\n                    columnNumber: 25\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 321,\n                  columnNumber: 23\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 320,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"tbody\", {\n                children: parcelasPagas.length > 0 ? parcelasPagas.map(parcela => {\n                  // Pega o primeiro recebimento (ou um objeto vazio se não houver)\n                  const recebimento = parcela.recebimentos && parcela.recebimentos[0] ? parcela.recebimentos[0] : {};\n                  return /*#__PURE__*/_jsxDEV(\"tr\", {\n                    children: [/*#__PURE__*/_jsxDEV(\"td\", {\n                      children: parcela.id_parcela\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 341,\n                      columnNumber: 31\n                    }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                      children: formatDateBR(parcela.data_vencimento)\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 342,\n                      columnNumber: 31\n                    }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                      children: parseFloat(parcela.valor_parcela).toFixed(2)\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 343,\n                      columnNumber: 31\n                    }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                      children: parcela.status\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 344,\n                      columnNumber: 31\n                    }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                      children: formatDateBR(recebimento.data_recebimento)\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 345,\n                      columnNumber: 31\n                    }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                      children: recebimento.tipo || '-'\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 346,\n                      columnNumber: 31\n                    }, this)]\n                  }, parcela.id_parcela, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 340,\n                    columnNumber: 29\n                  }, this);\n                }) : /*#__PURE__*/_jsxDEV(\"tr\", {\n                  children: /*#__PURE__*/_jsxDEV(\"td\", {\n                    colSpan: \"6\",\n                    style: {\n                      textAlign: 'center'\n                    },\n                    children: \"Nenhum pagamento registrado para este paciente.\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 353,\n                    columnNumber: 27\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 351,\n                  columnNumber: 25\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 330,\n                columnNumber: 21\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 319,\n              columnNumber: 19\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 318,\n            columnNumber: 17\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 316,\n          columnNumber: 15\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 314,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 199,\n    columnNumber: 5\n  }, this);\n}\n_s(Pagamentos, \"BsOX+XjaWz7yfu900pOOGAuDDAc=\", false, function () {\n  return [useNavigate];\n});\n_c = Pagamentos;\nexport default Pagamentos;\nvar _c;\n$RefreshReg$(_c, \"Pagamentos\");","map":{"version":3,"names":["React","useState","useEffect","useCallback","axios","useNavigate","format","Modal","FontAwesomeIcon","faQuestionCircle","jsxDEV","_jsxDEV","Fragment","_Fragment","API_BASE_URL","mockFormasPagamento","Pagamentos","_s","pacientes","setPacientes","selectedPacienteId","setSelectedPacienteId","loadingPacientes","setLoadingPacientes","loadingParcelas","setLoadingParcelas","error","setError","navigate","abaAtiva","setAbaAtiva","modoDeExibicao","setModoDeExibicao","parcelasPendentes","setParcelasPendentes","parcelasPagas","setParcelasPagas","selectedParcela","setSelectedParcela","recebimentoData","setRecebimentoData","data_recebimento","valor_recebido","tipo","fetchPacientes","token","localStorage","getItem","Error","response","get","headers","data","results","err","console","status","alert","fetchParcelasDoPaciente","pacienteId","params","paciente_id","todasParcelas","pendentes","filter","p","pagas","finally","handlePacienteChange","e","target","value","handleParcelaSelect","parcela","parseFloat","valor_parcela","toFixed","Date","handleRecebimentoInputChange","name","prevState","handleSaveRecebimento","preventDefault","userId","dataParaBackend","id_parcela","usuario","parseInt","post","errorMessage","responseData","non_field_errors","join","detail","JSON","stringify","message","handleCancelarSelecao","formatDateBR","dateString","className","children","fileName","_jsxFileName","lineNumber","columnNumber","htmlFor","id","onChange","required","map","id_paciente","nome","onClick","style","display","length","data_vencimento","orcamento","colSpan","textAlign","marginTop","marginBottom","fontSize","color","type","readOnly","onSubmit","step","forma","index","flex","justifyContent","recebimento","recebimentos","_c","$RefreshReg$"],"sources":["C:/Users/milen/Desktop/4º ano/projeto/ProjetoDrGus/frontend/src/paginas/Pagamentos.js"],"sourcesContent":["import React, { useState, useEffect, useCallback } from 'react';\r\nimport axios from 'axios';\r\nimport './Pagamentos.css';\r\nimport { useNavigate } from 'react-router-dom';\r\nimport { format } from 'date-fns';\r\nimport Modal from '../componentes/Modal'; \r\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\r\nimport { faQuestionCircle } from '@fortawesome/free-solid-svg-icons';\r\n\r\nconst API_BASE_URL = 'http://localhost:8000';\r\nconst mockFormasPagamento = ['Cartão de Crédito', 'Débito', 'Pix', 'Dinheiro'];\r\n\r\nfunction Pagamentos() {\r\n  //Estados\r\n  const [pacientes, setPacientes] = useState([]);\r\n  const [selectedPacienteId, setSelectedPacienteId] = useState('');\r\n  \r\n  const [loadingPacientes, setLoadingPacientes] = useState(true);\r\n  const [loadingParcelas, setLoadingParcelas] = useState(false);\r\n  const [error, setError] = useState(null);\r\n  const navigate = useNavigate();\r\n\r\n  const [abaAtiva, setAbaAtiva] = useState('registrar'); // 'registrar' ou 'historico'\r\n  const [modoDeExibicao, setModoDeExibicao] = useState('lista'); // 'lista' ou 'formulario'\r\n  \r\n  const [parcelasPendentes, setParcelasPendentes] = useState([]);\r\n  const [parcelasPagas, setParcelasPagas] = useState([]); \r\n  \r\n  const [selectedParcela, setSelectedParcela] = useState(null);\r\n  const [recebimentoData, setRecebimentoData] = useState({\r\n    data_recebimento: '',\r\n    valor_recebido: '',\r\n    tipo: '',\r\n  });\r\n\r\n  // --- Funções de Busca ---\r\n  const fetchPacientes = useCallback(async () => {\r\n    try {\r\n      const token = localStorage.getItem('access_token');\r\n      if (!token) throw new Error('Token de autenticação não encontrado.');\r\n      const response = await axios.get(`${API_BASE_URL}/api/pacientes/`, {\r\n        headers: { 'Authorization': `Bearer ${token}` }\r\n      });\r\n      setPacientes(response.data.results || response.data || []);\r\n    } catch (err) {\r\n      console.error('Erro ao buscar pacientes:', err);\r\n      setError('Falha ao carregar pacientes.');\r\n      if (err.response && err.response.status === 401) {\r\n        alert('Sessão expirada. Faça login novamente.');\r\n        navigate('/login');\r\n      }\r\n    }\r\n  }, [navigate]);\r\n\r\n  const fetchParcelasDoPaciente = useCallback(async (pacienteId) => {\r\n    if (!pacienteId) {\r\n      setParcelasPendentes([]);\r\n      setParcelasPagas([]); // Limpa também o histórico\r\n      setSelectedParcela(null);\r\n      setError(null);\r\n      return;\r\n    }\r\n\r\n    setLoadingParcelas(true);\r\n    setError(null);\r\n    setSelectedParcela(null);\r\n    setModoDeExibicao('lista'); // Garante que a aba registrar volte para a lista\r\n\r\n    try {\r\n      const token = localStorage.getItem('access_token');\r\n      if (!token) throw new Error('Token não encontrado.');\r\n\r\n      // O filtro de backend 'paciente_id' já busca pelo 'orcamento__paciente'\r\n      // Removemos o filtro de status para pegar TODAS (Pagas, Pendentes, Atrasadas)\r\n      const response = await axios.get(`${API_BASE_URL}/api/parcelas/`, {\r\n        headers: { 'Authorization': `Bearer ${token}` },\r\n        params: { paciente_id: pacienteId } \r\n      });\r\n\r\n      const todasParcelas = response.data.results || response.data || [];\r\n\r\n      // Filtra as parcelas em listas separadas\r\n      const pendentes = todasParcelas.filter(p => p.status === 'Pendente' || p.status === 'Atrasado');\r\n      const pagas = todasParcelas.filter(p => p.status === 'Pago'); \r\n\r\n      setParcelasPendentes(pendentes);\r\n      setParcelasPagas(pagas);\r\n\r\n    } catch (err) {\r\n      console.error('Erro ao buscar parcelas:', err);\r\n      setError('Falha ao carregar parcelas do paciente.');\r\n      setParcelasPendentes([]);\r\n      setParcelasPagas([]);\r\n      if (err.response && err.response.status === 401) {\r\n        alert('Sessão expirada. Faça login novamente.');\r\n        navigate('/login');\r\n      }\r\n    } finally {\r\n      setLoadingParcelas(false);\r\n    }\r\n  }, [navigate]);\r\n\r\n  // Efeito inicial para buscar pacientes\r\n  useEffect(() => {\r\n    setLoadingPacientes(true);\r\n    fetchPacientes().finally(() => setLoadingPacientes(false));\r\n  }, [fetchPacientes]);\r\n\r\n  // Handlers\r\n  const handlePacienteChange = (e) => {\r\n    const pacienteId = e.target.value;\r\n    setSelectedPacienteId(pacienteId);\r\n    setAbaAtiva('registrar'); // Volta para a aba principal\r\n    setModoDeExibicao('lista'); // Reseta a sub-view\r\n    fetchParcelasDoPaciente(pacienteId);\r\n  };\r\n\r\n  // Handler para selecionar a parcela\r\n  const handleParcelaSelect = (parcela) => {\r\n    setSelectedParcela(parcela);\r\n    setRecebimentoData({\r\n      valor_recebido: parseFloat(parcela.valor_parcela).toFixed(2),\r\n      data_recebimento: format(new Date(), 'yyyy-MM-dd'),\r\n      tipo: '',\r\n    });\r\n    setModoDeExibicao('formulario'); // Muda para o formulário\r\n  };\r\n  \r\n  const handleRecebimentoInputChange = (e) => {\r\n    const { name, value } = e.target;\r\n    setRecebimentoData(prevState => ({ ...prevState, [name]: value }));\r\n  };\r\n\r\n  // Handler para salvar \r\n  const handleSaveRecebimento = async (e) => {\r\n    e.preventDefault();\r\n    if (!selectedParcela) { alert('Selecione uma parcela...'); return; }\r\n    \r\n    const token = localStorage.getItem('access_token');\r\n    const userId = localStorage.getItem('user_id');\r\n    \r\n    if (!token || !userId) { alert('Erro de autenticação...'); navigate('/'); return; }\r\n    if (!recebimentoData.data_recebimento || !recebimentoData.valor_recebido || !recebimentoData.tipo) { alert('Preencha todos os campos...'); return; }\r\n\r\n    try {\r\n      const dataParaBackend = {\r\n        parcela: selectedParcela.id_parcela,\r\n        usuario: parseInt(userId),\r\n        data_recebimento: recebimentoData.data_recebimento,\r\n        valor_recebido: parseFloat(recebimentoData.valor_recebido),\r\n        tipo: recebimentoData.tipo,\r\n      };\r\n\r\n      await axios.post(`${API_BASE_URL}/api/recebimentos/`, dataParaBackend, {\r\n        headers: { 'Authorization': `Bearer ${token}` }\r\n      }); \r\n\r\n      alert('Recebimento registrado com sucesso!');\r\n      fetchParcelasDoPaciente(selectedPacienteId); // RECARREGA TUDO (pagas e pendentes)\r\n\r\n      // Limpa os dados e volta para a lista\r\n      setSelectedParcela(null);\r\n      setRecebimentoData({ data_recebimento: '', valor_recebido: '', tipo: '' });\r\n      setModoDeExibicao('lista'); // Volta para a lista\r\n\r\n    } catch (err) {\r\n      let errorMessage = \"Erro desconhecido.\";\r\n      if (err.response && err.response.data) {\r\n          const responseData = err.response.data;\r\n          console.error('Erro backend:', responseData);\r\n          if (responseData.non_field_errors) { errorMessage = responseData.non_field_errors.join(' ');\r\n          } else if (responseData.detail) { errorMessage = responseData.detail;\r\n          } else { errorMessage = JSON.stringify(responseData); }\r\n      } else { errorMessage = err.message; }\r\n      alert(`Erro ao registrar recebimento: ${errorMessage}`);\r\n      setError(errorMessage);\r\n    }\r\n  };\r\n\r\n  // Handler para o botão \"Voltar\" / \"Cancelar\" \r\n  const handleCancelarSelecao = () => {\r\n    setModoDeExibicao('lista');\r\n    setSelectedParcela(null);\r\n    setRecebimentoData({ data_recebimento: '', valor_recebido: '', tipo: '' });\r\n    setError(null);\r\n  };\r\n\r\n  // Função para formatar data DD/MM/YYYY\r\n  const formatDateBR = (dateString) => {\r\n    if (!dateString) return '-';\r\n    try {\r\n      return format(new Date(dateString + 'T00:00:00'), 'dd/MM/yyyy');\r\n    } catch (e) { console.error(\"Erro formatando data:\", dateString, e); return dateString; }\r\n  };\r\n\r\n  if (loadingPacientes) return <div className=\"loading-message\">Carregando pacientes...</div>;\r\n\r\n  return (\r\n    <div className=\"pagamentos-container\">\r\n      {/* 1. Seleção do Paciente (agora fica fora das abas) */}\r\n      <div className=\"card-section\">\r\n        <h2>Controle de Pagamentos</h2>\r\n        {error && <p className=\"error-message\">{error}</p>}\r\n        <div className=\"form-group\">\r\n          <label htmlFor=\"paciente\">Selecione o Paciente:</label>\r\n          <select id=\"paciente\" name=\"paciente\" value={selectedPacienteId} onChange={handlePacienteChange} required className=\"select-field\">\r\n            <option value=\"\">Selecione...</option>\r\n            {pacientes.map(p => (<option key={p.id_paciente} value={p.id_paciente}>{p.nome}</option>))}\r\n          </select>\r\n        </div>\r\n      </div>\r\n\r\n      {selectedPacienteId && (\r\n        <>\r\n          <div className=\"pagamentos-tabs-container\">\r\n            <button \r\n              className={`tab-button ${abaAtiva === 'registrar' ? 'active' : ''}`}\r\n              onClick={() => setAbaAtiva('registrar')}\r\n            >\r\n              Registrar Pagamento (Pendentes)\r\n            </button>\r\n            <button \r\n              className={`tab-button ${abaAtiva === 'historico' ? 'active' : ''}`}\r\n              onClick={() => setAbaAtiva('historico')}\r\n            >\r\n              Histórico (Pagos)\r\n            </button>\r\n          </div>\r\n\r\n          {loadingParcelas && <div className=\"loading-message\">Buscando parcelas...</div>}\r\n\r\n          <div style={{ display: abaAtiva === 'registrar' ? 'block' : 'none' }}>\r\n            {modoDeExibicao === 'lista' && !loadingParcelas && (\r\n              <div className=\"card-section\">\r\n                <h3>Parcelas Pendentes / Atrasadas</h3>\r\n                <div className=\"parcelas-tabela-wrapper\">\r\n                  <table className=\"parcelas-tabela\">\r\n                    <thead>\r\n                      <tr><th>Selecionar</th><th>ID Parcela</th><th>Vencimento</th><th>Valor (R$)</th><th>Status</th><th>Orçamento ID</th></tr>\r\n                    </thead>\r\n                    <tbody>\r\n                      {parcelasPendentes.length > 0 ? (\r\n                        parcelasPendentes.map(parcela => (\r\n                          <tr key={parcela.id_parcela}>\r\n                            <td><button onClick={() => handleParcelaSelect(parcela)} className=\"button-select-parcela\">Pagar</button></td>\r\n                            <td>{parcela.id_parcela}</td>\r\n                            <td>{formatDateBR(parcela.data_vencimento)}</td>\r\n                            <td>{parseFloat(parcela.valor_parcela).toFixed(2)}</td>\r\n                            <td>{parcela.status}</td>\r\n                            <td>{parcela.orcamento}</td>\r\n                          </tr>\r\n                        ))\r\n                      ) : (\r\n                        <tr>\r\n                          <td colSpan=\"6\" style={{ textAlign: 'center' }}>Nenhuma parcela pendente para este paciente.</td>\r\n                        </tr>\r\n                      )}\r\n                    </tbody>\r\n                  </table>\r\n                </div>\r\n              </div>\r\n            )}\r\n\r\n            {modoDeExibicao === 'formulario' && selectedParcela && (\r\n              <div className=\"card-section\">\r\n                <h3>Registrar Pagamento da Parcela</h3>\r\n                <p style={{marginTop: '-1rem', marginBottom: '1.5rem', fontSize: '0.9rem', color: '#555'}}>\r\n                   Vencimento: {formatDateBR(selectedParcela.data_vencimento)} \r\n                   {' - '}\r\n                   Valor: R$ {parseFloat(selectedParcela.valor_parcela).toFixed(2)}\r\n                </p>\r\n                <div className=\"form-row\">\r\n                  <div className=\"form-group\">\r\n                    <label>Valor da Parcela:</label>\r\n                    <input type=\"text\" value={`R$ ${parseFloat(selectedParcela.valor_parcela).toFixed(2)}`} className=\"input-field-readonly\" readOnly />\r\n                  </div>\r\n                  <div className=\"form-group\">\r\n                    <label>Data de Vencimento:</label>\r\n                    <input type=\"text\" value={formatDateBR(selectedParcela.data_vencimento)} className=\"input-field-readonly\" readOnly />\r\n                  </div>\r\n                </div>\r\n                <form onSubmit={handleSaveRecebimento} className=\"pagamentos-form-simple\">\r\n                  <div className=\"form-row\">\r\n                    <div className=\"form-group\">\r\n                      <label htmlFor=\"data_recebimento\">Data do Pagamento: *</label>\r\n                      <input type=\"date\" id=\"data_recebimento\" name=\"data_recebimento\" value={recebimentoData.data_recebimento} onChange={handleRecebimentoInputChange} required className=\"input-field\" />\r\n                    </div>\r\n                    <div className=\"form-group\">\r\n                      <label htmlFor=\"valor_recebido\">Valor Recebido (R$): *</label>\r\n                      <input type=\"number\" id=\"valor_recebido\" name=\"valor_recebido\" value={recebimentoData.valor_recebido} onChange={handleRecebimentoInputChange} step=\"0.01\" required className=\"input-field\" />\r\n                    </div>\r\n                  </div>\r\n                  <div className=\"form-row\">\r\n                    <div className=\"form-group\">\r\n                      <label htmlFor=\"tipo\">Forma de Pagamento: *</label>\r\n                      <select id=\"tipo\" name=\"tipo\" value={recebimentoData.tipo} onChange={handleRecebimentoInputChange} required className=\"select-field\">\r\n                        <option value=\"\">Selecione</option>\r\n                        {mockFormasPagamento.map((forma, index) => (<option key={index} value={forma}>{forma}</option>))}\r\n                      </select>\r\n                    </div>\r\n                    <div className=\"form-group\" style={{ flex: 1 }}></div>\r\n                  </div>\r\n                  <div className=\"form-actions-pagamento\" style={{ justifyContent: 'space-between' }}>\r\n                    <button type=\"button\" className=\"button-secondary\" onClick={handleCancelarSelecao}>\r\n                      Cancelar Seleção\r\n                    </button>\r\n                    <button type=\"submit\" className=\"button-primary\">Confirmar Recebimento</button>\r\n                  </div>\r\n                </form>\r\n              </div>\r\n            )}\r\n          </div>\r\n\r\n          <div style={{ display: abaAtiva === 'historico' ? 'block' : 'none' }}>\r\n            {!loadingParcelas && (\r\n              <div className=\"card-section\">\r\n                <h3>Histórico de Parcelas Pagas</h3>\r\n                <div className=\"parcelas-tabela-wrapper\">\r\n                  <table className=\"parcelas-tabela\">\r\n                    <thead>\r\n                      <tr>\r\n                        <th>ID Parcela</th>\r\n                        <th>Vencimento</th>\r\n                        <th>Valor (R$)</th>\r\n                        <th>Status</th>\r\n                        <th>Data Pagamento</th>\r\n                        <th>Forma Pagamento</th>\r\n                      </tr>\r\n                    </thead>\r\n                    <tbody>\r\n                      {parcelasPagas.length > 0 ? (\r\n                        parcelasPagas.map(parcela => {\r\n                          \r\n                          // Pega o primeiro recebimento (ou um objeto vazio se não houver)\r\n                          const recebimento = (parcela.recebimentos && parcela.recebimentos[0])\r\n                            ? parcela.recebimentos[0]\r\n                            : {};\r\n\r\n                          return (\r\n                            <tr key={parcela.id_parcela}>\r\n                              <td>{parcela.id_parcela}</td>\r\n                              <td>{formatDateBR(parcela.data_vencimento)}</td>\r\n                              <td>{parseFloat(parcela.valor_parcela).toFixed(2)}</td>\r\n                              <td>{parcela.status}</td>\r\n                              <td>{formatDateBR(recebimento.data_recebimento)}</td>\r\n                              <td>{recebimento.tipo || '-'}</td>\r\n                            </tr>\r\n                          );\r\n                        })\r\n                      ) : (\r\n                        <tr>\r\n                          {/* ColSpan atualizado para 6 colunas */}\r\n                          <td colSpan=\"6\" style={{ textAlign: 'center' }}>Nenhum pagamento registrado para este paciente.</td>\r\n                        </tr>\r\n                      )}\r\n                    </tbody>\r\n                  </table>\r\n                </div>\r\n              </div>\r\n            )}\r\n          </div>\r\n        </>\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default Pagamentos;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}