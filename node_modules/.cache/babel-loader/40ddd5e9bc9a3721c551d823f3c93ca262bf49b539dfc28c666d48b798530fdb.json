{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\milen\\\\Desktop\\\\4\\xBA ano\\\\projeto\\\\ProjetoDrGus\\\\frontend\\\\src\\\\paginas\\\\Orcamentos.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect, useCallback } from \"react\";\nimport axios from \"axios\";\nimport \"./Orcamentos.css\";\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\nimport { faTrashCan, faCheck, faQuestionCircle } from \"@fortawesome/free-solid-svg-icons\";\nimport { useNavigate } from \"react-router-dom\";\nimport Modal from \"../componentes/Modal\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst API_BASE_URL = process.env.REACT_APP_API_BASE_URL;\nconst dentesArcadaSuperior = [18, 17, 16, 15, 14, 13, 12, 11, 21, 22, 23, 24, 25, 26, 27, 28];\nconst dentesArcadaInferior = [48, 47, 46, 45, 44, 43, 42, 41, 31, 32, 33, 34, 35, 36, 37, 38];\nconst mockFaces = [\"V\", \"P\", \"M\", \"D\", \"L\"];\nconst mockParcelas = [1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12];\nfunction Orcamentos() {\n  _s();\n  var _pacientes$find;\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState(null);\n  const [servicos, setServicos] = useState([]);\n  const [pacientes, setPacientes] = useState([]);\n  const [filtroPaciente, setFiltroPaciente] = useState(\"\");\n  const [pacienteSelecionadoId, setPacienteSelecionadoId] = useState(\"\");\n  const navigate = useNavigate();\n  const [isAjudaOpen, setIsAjudaOpen] = useState(false);\n  const [selectedDente, setSelectedDente] = useState(null);\n  const [procedimentosDoOrcamento, setProcedimentosDoOrcamento] = useState([]);\n  const [procedimentoData, setProcedimentoData] = useState({\n    dente: \"\",\n    faces: [],\n    servico: \"\",\n    valor: \"\"\n  });\n  const [procedimentoAjuda, setProcedimentoAjuda] = useState(\"\");\n  const [orcamentoForm, setOrcamentoForm] = useState({\n    paciente_id: \"\",\n    data_orcamento: new Date().toISOString().split(\"T\")[0],\n    parcelas: \"\"\n  });\n  const pacientesFiltrados = pacientes.filter(paciente => paciente.nome.toLowerCase().includes(filtroPaciente.toLowerCase()));\n  const handleSelecionarPaciente = paciente => {\n    setFiltroPaciente(paciente.nome);\n    setPacienteSelecionadoId(paciente.id_paciente);\n    setOrcamentoForm(prevForm => ({\n      ...prevForm,\n      paciente_id: paciente.id_paciente\n    }));\n  };\n  const handleFiltroChange = e => {\n    const nome = e.target.value;\n    setFiltroPaciente(nome);\n    if (!pacientes.find(p => p.nome === nome)) {\n      setPacienteSelecionadoId(\"\");\n    }\n  };\n  const fetchServicos = useCallback(async () => {\n    try {\n      const token = localStorage.getItem(\"access_token\");\n      if (!token) {\n        console.error(\"fetchServicos: Token não encontrado.\");\n        navigate(\"/login\");\n        return;\n      }\n      const response = await axios.get(`${API_BASE_URL}/api/servicos/`, {\n        headers: {\n          Authorization: `Bearer ${token}`\n        }\n      });\n      const services = response.data.results || response.data || [];\n      setServicos(Array.isArray(services) ? services : []);\n    } catch (err) {\n      if (err.response && err.response.status === 401) navigate(\"/login\");else setError(\"Erro ao carregar serviços.\");\n    }\n  }, [navigate]);\n  const fetchPacientes = useCallback(async () => {\n    try {\n      const token = localStorage.getItem(\"access_token\");\n      if (!token) {\n        console.error(\"fetchPacientes: Token não encontrado.\");\n        navigate(\"/login\");\n        return;\n      }\n      const response = await axios.get(`${API_BASE_URL}/api/pacientes/lookup/`, {\n        headers: {\n          Authorization: `Bearer ${token}`\n        }\n      });\n      const patients = response.data.results || response.data || [];\n      const pacientesCorrigidos = Array.isArray(patients) ? patients.map(p => ({\n        ...p,\n        id_paciente: p.id\n      })) : [];\n      setPacientes(pacientesCorrigidos);\n    } catch (err) {\n      if (err.response && err.response.status === 401) navigate(\"/login\");else setError(\"Erro ao carregar pacientes.\");\n    }\n  }, [navigate]);\n  useEffect(() => {\n    setLoading(true);\n    const initData = async () => {\n      await Promise.all([fetchServicos(), fetchPacientes()]);\n      setLoading(false);\n    };\n    initData();\n  }, [fetchServicos, fetchPacientes]);\n  const handleOrcamentoFormChange = e => {\n    const {\n      name,\n      value\n    } = e.target;\n    setOrcamentoForm(prev => ({\n      ...prev,\n      [name]: value\n    }));\n  };\n  const handleDenteClick = dente => {\n    const novoDente = selectedDente === dente ? null : dente;\n    setSelectedDente(novoDente);\n    setProcedimentoData(prevData => ({\n      ...prevData,\n      dente: novoDente ? String(novoDente) : \"\"\n    }));\n  };\n  const handleFaceClick = face => {\n    setProcedimentoData(prevData => {\n      const newFaces = prevData.faces.includes(face) ? prevData.faces.filter(f => f !== face) : [...prevData.faces, face];\n      return {\n        ...prevData,\n        faces: newFaces\n      };\n    });\n  };\n  const handleProcedimentoChange = e => {\n    const servicold = e.target.value;\n    const servicoSelecionado = servicos.find(s => s.id_servico === parseInt(servicold));\n    const novoValor = servicoSelecionado ? servicoSelecionado.valor_referencia : \"\";\n    setProcedimentoData(prevData => ({\n      ...prevData,\n      servico: servicold,\n      valor: novoValor,\n      dente: servicoSelecionado && servicoSelecionado.exige_dente ? prevData.dente : \"\",\n      faces: servicoSelecionado && servicoSelecionado.exige_face ? prevData.faces : []\n    }));\n    if (servicoSelecionado && !servicoSelecionado.exige_dente) setSelectedDente(null);\n    if (servicoSelecionado) {\n      if (servicoSelecionado.exige_dente && servicoSelecionado.exige_face) setProcedimentoAjuda(\"Este procedimento exige a seleção de Dente e Faces.\");else if (servicoSelecionado.exige_dente) setProcedimentoAjuda(\"Este procedimento exige a seleção de Dente.\");else if (servicoSelecionado.exige_face) setProcedimentoAjuda(\"Este procedimento exige a seleção de Faces.\");else setProcedimentoAjuda(\"\");\n    } else setProcedimentoAjuda(\"\");\n  };\n  const handleAdicionarProcedimento = () => {\n    const servicoSelecionado = servicos.find(s => s.id_servico === parseInt(procedimentoData.servico));\n    if (!servicoSelecionado) {\n      alert(\"Selecione um procedimento válido.\");\n      return;\n    }\n    const exigeDente = servicoSelecionado.exige_dente;\n    const exigeFace = servicoSelecionado.exige_face;\n    const denteValido = !exigeDente || procedimentoData.dente && procedimentoData.dente !== \"\";\n    const faceValida = !exigeFace || procedimentoData.faces && procedimentoData.faces.length > 0;\n    if (denteValido && faceValida && procedimentoData.servico && procedimentoData.valor) {\n      const novoProcedimento = {\n        idTemporario: Date.now(),\n        dente: procedimentoData.dente || null,\n        faces: procedimentoData.faces.join(\",\"),\n        servico: procedimentoData.servico,\n        valor: procedimentoData.valor,\n        nomeServico: servicoSelecionado.desc_servico\n      };\n      setProcedimentosDoOrcamento([...procedimentosDoOrcamento, novoProcedimento]);\n      setProcedimentoData({\n        dente: \"\",\n        faces: [],\n        servico: \"\",\n        valor: \"\"\n      });\n      setSelectedDente(null);\n      setProcedimentoAjuda(\"\");\n    } else {\n      let errorMsg = \"Preencha todos os detalhes obrigatórios do procedimento.\\n\";\n      if (exigeDente && !denteValido) errorMsg += \"- Selecione um dente.\\n\";\n      if (exigeFace && !faceValida) errorMsg += \"- Selecione pelo menos uma face.\\n\";\n      if (!procedimentoData.servico) errorMsg += \"- Selecione um procedimento.\\n\";\n      alert(errorMsg);\n    }\n  };\n  const handleRemoverProcedimento = idTemporario => {\n    setProcedimentosDoOrcamento(procedimentosAtuais => procedimentosAtuais.filter(p => p.idTemporario !== idTemporario));\n  };\n  const calcularTotalEstimado = () => {\n    return procedimentosDoOrcamento.reduce((total, item) => total + parseFloat(item.valor || 0), 0).toFixed(2);\n  };\n  const handleSaveOrcamento = async e => {\n    e.preventDefault();\n    try {\n      const token = localStorage.getItem(\"access_token\");\n      if (!token) throw new Error(\"Token de autenticação não encontrado.\");\n      if (!pacienteSelecionadoId) {\n        alert(\"Por favor, selecione um paciente.\");\n        return;\n      }\n      if (procedimentosDoOrcamento.length === 0) {\n        alert(\"Adicione pelo menos um procedimento.\");\n        return;\n      }\n      const orcamentoData = {\n        paciente: parseInt(pacienteSelecionadoId),\n        data_orcamento: orcamentoForm.data_orcamento,\n        n_vezes: orcamentoForm.parcelas ? parseInt(orcamentoForm.parcelas) : null,\n        itens_para_criar: procedimentosDoOrcamento.map(proc => ({\n          servico: parseInt(proc.servico),\n          data_execucao: new Date().toISOString().split(\"T\")[0],\n          valor: parseFloat(proc.valor),\n          n_dente: proc.dente || null,\n          face: proc.faces || null\n        }))\n      };\n      await axios.post(`${API_BASE_URL}/api/orcamentos/`, orcamentoData, {\n        headers: {\n          Authorization: `Bearer ${token}`\n        }\n      });\n      alert(\"Orçamento salvo com sucesso!\");\n      setProcedimentosDoOrcamento([]);\n      setOrcamentoForm({\n        paciente_id: \"\",\n        data_orcamento: new Date().toISOString().split(\"T\")[0],\n        parcelas: \"\"\n      });\n      setPacienteSelecionadoId(\"\");\n      setFiltroPaciente(\"\");\n    } catch (err) {\n      var _err$response;\n      const errorMsg = (_err$response = err.response) !== null && _err$response !== void 0 && _err$response.data ? JSON.stringify(err.response.data) : err.message;\n      alert(`Erro ao salvar o orçamento: ${errorMsg}`);\n    }\n  };\n  const servicoSelecionado = servicos.find(s => s.id_servico === parseInt(procedimentoData.servico));\n  const exigeDente = servicoSelecionado === null || servicoSelecionado === void 0 ? void 0 : servicoSelecionado.exige_dente;\n  const exigeFace = servicoSelecionado === null || servicoSelecionado === void 0 ? void 0 : servicoSelecionado.exige_face;\n  if (loading) return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: \"Carregando...\"\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 299,\n    columnNumber: 23\n  }, this);\n  if (error) return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: [\"Erro: \", error]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 300,\n    columnNumber: 21\n  }, this);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"orcamento-container\",\n    children: /*#__PURE__*/_jsxDEV(\"form\", {\n      onSubmit: handleSaveOrcamento,\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"orcamento-content-wrapper\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"orcamento-details-section\",\n          children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n            className: \"section-title\",\n            children: \"Or\\xE7amento:\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 307,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"form-row-compact\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"form-group\",\n              style: {\n                position: \"relative\"\n              },\n              children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                htmlFor: \"filtroPaciente\",\n                children: \"Paciente *\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 310,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                type: \"text\",\n                id: \"filtroPaciente\",\n                className: \"input-field\",\n                placeholder: \"Digite o nome para buscar o paciente...\",\n                value: filtroPaciente,\n                onChange: handleFiltroChange,\n                required: true\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 311,\n                columnNumber: 17\n              }, this), filtroPaciente.length > 0 && pacientesFiltrados.length > 0 && /*#__PURE__*/_jsxDEV(\"ul\", {\n                className: \"paciente-autocomplete-list\",\n                children: [pacientesFiltrados.slice(0, 8).map(paciente => /*#__PURE__*/_jsxDEV(\"li\", {\n                  onClick: () => setTimeout(() => handleSelecionarPaciente(paciente), 0),\n                  children: [paciente.nome, \" (\", paciente.cpf, \")\"]\n                }, paciente.id_paciente, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 324,\n                  columnNumber: 23\n                }, this)), pacientesFiltrados.length > 8 && /*#__PURE__*/_jsxDEV(\"li\", {\n                  className: \"autocomplete-info\",\n                  children: \"Mais resultados...\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 334,\n                  columnNumber: 23\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 322,\n                columnNumber: 19\n              }, this), pacientesFiltrados.length === 0 && filtroPaciente.length > 0 && /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"autocomplete-info\",\n                style: {\n                  color: \"#dc3545\"\n                },\n                children: \"Nenhum paciente encontrado.\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 341,\n                columnNumber: 21\n              }, this), pacienteSelecionadoId && /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"paciente-selecionado-tag\",\n                children: [\"Paciente Selecionado:\", \" \", /*#__PURE__*/_jsxDEV(\"strong\", {\n                  children: ((_pacientes$find = pacientes.find(p => p.id_paciente === pacienteSelecionadoId)) === null || _pacientes$find === void 0 ? void 0 : _pacientes$find.nome) || filtroPaciente\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 352,\n                  columnNumber: 21\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 350,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 309,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"form-group\",\n              children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                htmlFor: \"data\",\n                children: \"Data *\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 362,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                type: \"date\",\n                id: \"data\",\n                name: \"data_orcamento\",\n                value: orcamentoForm.data_orcamento,\n                onChange: handleOrcamentoFormChange,\n                className: \"input-field\",\n                required: true\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 363,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 361,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 308,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 306,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 305,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 304,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 303,\n    columnNumber: 5\n  }, this);\n}\n_s(Orcamentos, \"TOecyT3aQPJ//k2q6RU9sSHN8IM=\", false, function () {\n  return [useNavigate];\n});\n_c = Orcamentos;\nexport default Orcamentos;\nvar _c;\n$RefreshReg$(_c, \"Orcamentos\");","map":{"version":3,"names":["React","useState","useEffect","useCallback","axios","FontAwesomeIcon","faTrashCan","faCheck","faQuestionCircle","useNavigate","Modal","jsxDEV","_jsxDEV","API_BASE_URL","process","env","REACT_APP_API_BASE_URL","dentesArcadaSuperior","dentesArcadaInferior","mockFaces","mockParcelas","Orcamentos","_s","_pacientes$find","loading","setLoading","error","setError","servicos","setServicos","pacientes","setPacientes","filtroPaciente","setFiltroPaciente","pacienteSelecionadoId","setPacienteSelecionadoId","navigate","isAjudaOpen","setIsAjudaOpen","selectedDente","setSelectedDente","procedimentosDoOrcamento","setProcedimentosDoOrcamento","procedimentoData","setProcedimentoData","dente","faces","servico","valor","procedimentoAjuda","setProcedimentoAjuda","orcamentoForm","setOrcamentoForm","paciente_id","data_orcamento","Date","toISOString","split","parcelas","pacientesFiltrados","filter","paciente","nome","toLowerCase","includes","handleSelecionarPaciente","id_paciente","prevForm","handleFiltroChange","e","target","value","find","p","fetchServicos","token","localStorage","getItem","console","response","get","headers","Authorization","services","data","results","Array","isArray","err","status","fetchPacientes","patients","pacientesCorrigidos","map","id","initData","Promise","all","handleOrcamentoFormChange","name","prev","handleDenteClick","novoDente","prevData","String","handleFaceClick","face","newFaces","f","handleProcedimentoChange","servicold","servicoSelecionado","s","id_servico","parseInt","novoValor","valor_referencia","exige_dente","exige_face","handleAdicionarProcedimento","alert","exigeDente","exigeFace","denteValido","faceValida","length","novoProcedimento","idTemporario","now","join","nomeServico","desc_servico","errorMsg","handleRemoverProcedimento","procedimentosAtuais","calcularTotalEstimado","reduce","total","item","parseFloat","toFixed","handleSaveOrcamento","preventDefault","Error","orcamentoData","n_vezes","itens_para_criar","proc","data_execucao","n_dente","post","_err$response","JSON","stringify","message","children","fileName","_jsxFileName","lineNumber","columnNumber","className","onSubmit","style","position","htmlFor","type","placeholder","onChange","required","slice","onClick","setTimeout","cpf","color","_c","$RefreshReg$"],"sources":["C:/Users/milen/Desktop/4º ano/projeto/ProjetoDrGus/frontend/src/paginas/Orcamentos.js"],"sourcesContent":["import React, { useState, useEffect, useCallback } from \"react\";\r\nimport axios from \"axios\";\r\nimport \"./Orcamentos.css\";\r\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\r\nimport {\r\n  faTrashCan,\r\n  faCheck,\r\n  faQuestionCircle,\r\n} from \"@fortawesome/free-solid-svg-icons\";\r\nimport { useNavigate } from \"react-router-dom\";\r\nimport Modal from \"../componentes/Modal\";\r\n\r\nconst API_BASE_URL = process.env.REACT_APP_API_BASE_URL;\r\n\r\nconst dentesArcadaSuperior = [\r\n  18, 17, 16, 15, 14, 13, 12, 11, 21, 22, 23, 24, 25, 26, 27, 28,\r\n];\r\nconst dentesArcadaInferior = [\r\n  48, 47, 46, 45, 44, 43, 42, 41, 31, 32, 33, 34, 35, 36, 37, 38,\r\n];\r\nconst mockFaces = [\"V\", \"P\", \"M\", \"D\", \"L\"];\r\nconst mockParcelas = [1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12];\r\n\r\nfunction Orcamentos() {\r\n  const [loading, setLoading] = useState(true);\r\n  const [error, setError] = useState(null);\r\n  const [servicos, setServicos] = useState([]);\r\n  const [pacientes, setPacientes] = useState([]);\r\n  const [filtroPaciente, setFiltroPaciente] = useState(\"\");\r\n  const [pacienteSelecionadoId, setPacienteSelecionadoId] = useState(\"\");\r\n  const navigate = useNavigate();\r\n  const [isAjudaOpen, setIsAjudaOpen] = useState(false);\r\n  const [selectedDente, setSelectedDente] = useState(null);\r\n  const [procedimentosDoOrcamento, setProcedimentosDoOrcamento] = useState([]);\r\n  const [procedimentoData, setProcedimentoData] = useState({\r\n    dente: \"\",\r\n    faces: [],\r\n    servico: \"\",\r\n    valor: \"\",\r\n  });\r\n  const [procedimentoAjuda, setProcedimentoAjuda] = useState(\"\");\r\n  const [orcamentoForm, setOrcamentoForm] = useState({\r\n    paciente_id: \"\",\r\n    data_orcamento: new Date().toISOString().split(\"T\")[0],\r\n    parcelas: \"\",\r\n  });\r\n\r\n  const pacientesFiltrados = pacientes.filter((paciente) =>\r\n    paciente.nome.toLowerCase().includes(filtroPaciente.toLowerCase())\r\n  );\r\n\r\n  const handleSelecionarPaciente = (paciente) => {\r\n    setFiltroPaciente(paciente.nome);\r\n    setPacienteSelecionadoId(paciente.id_paciente);\r\n    setOrcamentoForm((prevForm) => ({\r\n      ...prevForm,\r\n      paciente_id: paciente.id_paciente,\r\n    }));\r\n  };\r\n\r\n  const handleFiltroChange = (e) => {\r\n    const nome = e.target.value;\r\n    setFiltroPaciente(nome);\r\n    if (!pacientes.find((p) => p.nome === nome)) {\r\n      setPacienteSelecionadoId(\"\");\r\n    }\r\n  };\r\n\r\n  const fetchServicos = useCallback(async () => {\r\n    try {\r\n      const token = localStorage.getItem(\"access_token\");\r\n      if (!token) {\r\n        console.error(\"fetchServicos: Token não encontrado.\");\r\n        navigate(\"/login\");\r\n        return;\r\n      }\r\n\r\n      const response = await axios.get(`${API_BASE_URL}/api/servicos/`, {\r\n        headers: { Authorization: `Bearer ${token}` },\r\n      });\r\n\r\n      const services = response.data.results || response.data || [];\r\n      setServicos(Array.isArray(services) ? services : []);\r\n    } catch (err) {\r\n      if (err.response && err.response.status === 401) navigate(\"/login\");\r\n      else setError(\"Erro ao carregar serviços.\");\r\n    }\r\n  }, [navigate]);\r\n\r\n  const fetchPacientes = useCallback(async () => {\r\n    try {\r\n      const token = localStorage.getItem(\"access_token\");\r\n      if (!token) {\r\n        console.error(\"fetchPacientes: Token não encontrado.\");\r\n        navigate(\"/login\");\r\n        return;\r\n      }\r\n\r\n      const response = await axios.get(`${API_BASE_URL}/api/pacientes/lookup/`, {\r\n        headers: { Authorization: `Bearer ${token}` },\r\n      });\r\n\r\n      const patients = response.data.results || response.data || [];\r\n      const pacientesCorrigidos = Array.isArray(patients)\r\n        ? patients.map((p) => ({ ...p, id_paciente: p.id }))\r\n        : [];\r\n      setPacientes(pacientesCorrigidos);\r\n    } catch (err) {\r\n      if (err.response && err.response.status === 401) navigate(\"/login\");\r\n      else setError(\"Erro ao carregar pacientes.\");\r\n    }\r\n  }, [navigate]);\r\n\r\n  useEffect(() => {\r\n    setLoading(true);\r\n    const initData = async () => {\r\n      await Promise.all([fetchServicos(), fetchPacientes()]);\r\n      setLoading(false);\r\n    };\r\n    initData();\r\n  }, [fetchServicos, fetchPacientes]);\r\n\r\n  const handleOrcamentoFormChange = (e) => {\r\n    const { name, value } = e.target;\r\n    setOrcamentoForm((prev) => ({ ...prev, [name]: value }));\r\n  };\r\n\r\n  const handleDenteClick = (dente) => {\r\n    const novoDente = selectedDente === dente ? null : dente;\r\n    setSelectedDente(novoDente);\r\n    setProcedimentoData((prevData) => ({\r\n      ...prevData,\r\n      dente: novoDente ? String(novoDente) : \"\",\r\n    }));\r\n  };\r\n\r\n  const handleFaceClick = (face) => {\r\n    setProcedimentoData((prevData) => {\r\n      const newFaces = prevData.faces.includes(face)\r\n        ? prevData.faces.filter((f) => f !== face)\r\n        : [...prevData.faces, face];\r\n      return { ...prevData, faces: newFaces };\r\n    });\r\n  };\r\n\r\n  const handleProcedimentoChange = (e) => {\r\n    const servicold = e.target.value;\r\n    const servicoSelecionado = servicos.find(\r\n      (s) => s.id_servico === parseInt(servicold)\r\n    );\r\n    const novoValor = servicoSelecionado ? servicoSelecionado.valor_referencia : \"\";\r\n\r\n    setProcedimentoData((prevData) => ({\r\n      ...prevData,\r\n      servico: servicold,\r\n      valor: novoValor,\r\n      dente:\r\n        servicoSelecionado && servicoSelecionado.exige_dente\r\n          ? prevData.dente\r\n          : \"\",\r\n      faces:\r\n        servicoSelecionado && servicoSelecionado.exige_face\r\n          ? prevData.faces\r\n          : [],\r\n    }));\r\n\r\n    if (servicoSelecionado && !servicoSelecionado.exige_dente)\r\n      setSelectedDente(null);\r\n\r\n    if (servicoSelecionado) {\r\n      if (servicoSelecionado.exige_dente && servicoSelecionado.exige_face)\r\n        setProcedimentoAjuda(\"Este procedimento exige a seleção de Dente e Faces.\");\r\n      else if (servicoSelecionado.exige_dente)\r\n        setProcedimentoAjuda(\"Este procedimento exige a seleção de Dente.\");\r\n      else if (servicoSelecionado.exige_face)\r\n        setProcedimentoAjuda(\"Este procedimento exige a seleção de Faces.\");\r\n      else setProcedimentoAjuda(\"\");\r\n    } else setProcedimentoAjuda(\"\");\r\n  };\r\n\r\n  const handleAdicionarProcedimento = () => {\r\n    const servicoSelecionado = servicos.find(\r\n      (s) => s.id_servico === parseInt(procedimentoData.servico)\r\n    );\r\n    if (!servicoSelecionado) {\r\n      alert(\"Selecione um procedimento válido.\");\r\n      return;\r\n    }\r\n\r\n    const exigeDente = servicoSelecionado.exige_dente;\r\n    const exigeFace = servicoSelecionado.exige_face;\r\n    const denteValido =\r\n      !exigeDente || (procedimentoData.dente && procedimentoData.dente !== \"\");\r\n    const faceValida =\r\n      !exigeFace || (procedimentoData.faces && procedimentoData.faces.length > 0);\r\n\r\n    if (\r\n      denteValido &&\r\n      faceValida &&\r\n      procedimentoData.servico &&\r\n      procedimentoData.valor\r\n    ) {\r\n      const novoProcedimento = {\r\n        idTemporario: Date.now(),\r\n        dente: procedimentoData.dente || null,\r\n        faces: procedimentoData.faces.join(\",\"),\r\n        servico: procedimentoData.servico,\r\n        valor: procedimentoData.valor,\r\n        nomeServico: servicoSelecionado.desc_servico,\r\n      };\r\n      setProcedimentosDoOrcamento([\r\n        ...procedimentosDoOrcamento,\r\n        novoProcedimento,\r\n      ]);\r\n      setProcedimentoData({ dente: \"\", faces: [], servico: \"\", valor: \"\" });\r\n      setSelectedDente(null);\r\n      setProcedimentoAjuda(\"\");\r\n    } else {\r\n      let errorMsg = \"Preencha todos os detalhes obrigatórios do procedimento.\\n\";\r\n      if (exigeDente && !denteValido) errorMsg += \"- Selecione um dente.\\n\";\r\n      if (exigeFace && !faceValida)\r\n        errorMsg += \"- Selecione pelo menos uma face.\\n\";\r\n      if (!procedimentoData.servico)\r\n        errorMsg += \"- Selecione um procedimento.\\n\";\r\n      alert(errorMsg);\r\n    }\r\n  };\r\n\r\n  const handleRemoverProcedimento = (idTemporario) => {\r\n    setProcedimentosDoOrcamento((procedimentosAtuais) =>\r\n      procedimentosAtuais.filter((p) => p.idTemporario !== idTemporario)\r\n    );\r\n  };\r\n\r\n  const calcularTotalEstimado = () => {\r\n    return procedimentosDoOrcamento\r\n      .reduce((total, item) => total + parseFloat(item.valor || 0), 0)\r\n      .toFixed(2);\r\n  };\r\n\r\n  const handleSaveOrcamento = async (e) => {\r\n    e.preventDefault();\r\n    try {\r\n      const token = localStorage.getItem(\"access_token\");\r\n      if (!token) throw new Error(\"Token de autenticação não encontrado.\");\r\n\r\n      if (!pacienteSelecionadoId) {\r\n        alert(\"Por favor, selecione um paciente.\");\r\n        return;\r\n      }\r\n\r\n      if (procedimentosDoOrcamento.length === 0) {\r\n        alert(\"Adicione pelo menos um procedimento.\");\r\n        return;\r\n      }\r\n\r\n      const orcamentoData = {\r\n        paciente: parseInt(pacienteSelecionadoId),\r\n        data_orcamento: orcamentoForm.data_orcamento,\r\n        n_vezes: orcamentoForm.parcelas\r\n          ? parseInt(orcamentoForm.parcelas)\r\n          : null,\r\n        itens_para_criar: procedimentosDoOrcamento.map((proc) => ({\r\n          servico: parseInt(proc.servico),\r\n          data_execucao: new Date().toISOString().split(\"T\")[0],\r\n          valor: parseFloat(proc.valor),\r\n          n_dente: proc.dente || null,\r\n          face: proc.faces || null,\r\n        })),\r\n      };\r\n\r\n      await axios.post(`${API_BASE_URL}/api/orcamentos/`, orcamentoData, {\r\n        headers: { Authorization: `Bearer ${token}` },\r\n      });\r\n\r\n      alert(\"Orçamento salvo com sucesso!\");\r\n      setProcedimentosDoOrcamento([]);\r\n      setOrcamentoForm({\r\n        paciente_id: \"\",\r\n        data_orcamento: new Date().toISOString().split(\"T\")[0],\r\n        parcelas: \"\",\r\n      });\r\n      setPacienteSelecionadoId(\"\");\r\n      setFiltroPaciente(\"\");\r\n    } catch (err) {\r\n      const errorMsg = err.response?.data\r\n        ? JSON.stringify(err.response.data)\r\n        : err.message;\r\n      alert(`Erro ao salvar o orçamento: ${errorMsg}`);\r\n    }\r\n  };\r\n\r\n  const servicoSelecionado = servicos.find(\r\n    (s) => s.id_servico === parseInt(procedimentoData.servico)\r\n  );\r\n  const exigeDente = servicoSelecionado?.exige_dente;\r\n  const exigeFace = servicoSelecionado?.exige_face;\r\n\r\n  if (loading) return <div>Carregando...</div>;\r\n  if (error) return <div>Erro: {error}</div>;\r\n\r\n  return (\r\n    <div className=\"orcamento-container\">\r\n      <form onSubmit={handleSaveOrcamento}>\r\n        <div className=\"orcamento-content-wrapper\">\r\n          <div className=\"orcamento-details-section\">\r\n            <h3 className=\"section-title\">Orçamento:</h3>\r\n            <div className=\"form-row-compact\">\r\n              <div className=\"form-group\" style={{ position: \"relative\" }}>\r\n                <label htmlFor=\"filtroPaciente\">Paciente *</label>\r\n                <input\r\n                  type=\"text\"\r\n                  id=\"filtroPaciente\"\r\n                  className=\"input-field\"\r\n                  placeholder=\"Digite o nome para buscar o paciente...\"\r\n                  value={filtroPaciente}\r\n                  onChange={handleFiltroChange}\r\n                  required\r\n                />\r\n\r\n                {filtroPaciente.length > 0 && pacientesFiltrados.length > 0 && (\r\n                  <ul className=\"paciente-autocomplete-list\">\r\n                    {pacientesFiltrados.slice(0, 8).map((paciente) => (\r\n                      <li\r\n                        key={paciente.id_paciente}\r\n                        onClick={() =>\r\n                          setTimeout(() => handleSelecionarPaciente(paciente), 0)\r\n                        }\r\n                      >\r\n                        {paciente.nome} ({paciente.cpf})\r\n                      </li>\r\n                    ))}\r\n                    {pacientesFiltrados.length > 8 && (\r\n                      <li className=\"autocomplete-info\">Mais resultados...</li>\r\n                    )}\r\n                  </ul>\r\n                )}\r\n\r\n                {pacientesFiltrados.length === 0 &&\r\n                  filtroPaciente.length > 0 && (\r\n                    <div\r\n                      className=\"autocomplete-info\"\r\n                      style={{ color: \"#dc3545\" }}\r\n                    >\r\n                      Nenhum paciente encontrado.\r\n                    </div>\r\n                  )}\r\n\r\n                {pacienteSelecionadoId && (\r\n                  <div className=\"paciente-selecionado-tag\">\r\n                    Paciente Selecionado:{\" \"}\r\n                    <strong>\r\n                      {pacientes.find(\r\n                        (p) => p.id_paciente === pacienteSelecionadoId\r\n                      )?.nome || filtroPaciente}\r\n                    </strong>\r\n                  </div>\r\n                )}\r\n              </div>\r\n\r\n              <div className=\"form-group\">\r\n                <label htmlFor=\"data\">Data *</label>\r\n                <input\r\n                  type=\"date\"\r\n                  id=\"data\"\r\n                  name=\"data_orcamento\"\r\n                  value={orcamentoForm.data_orcamento}\r\n                  onChange={handleOrcamentoFormChange}\r\n                  className=\"input-field\"\r\n                  required\r\n                />\r\n              </div>\r\n            </div>\r\n          </div>\r\n\r\n          {/* restante do conteúdo da página (odontograma, tabela etc.) permanece igual */}\r\n        </div>\r\n      </form>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default Orcamentos;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}