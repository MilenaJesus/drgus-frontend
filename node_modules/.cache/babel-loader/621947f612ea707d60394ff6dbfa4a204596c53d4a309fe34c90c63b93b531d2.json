{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\milen\\\\Desktop\\\\4\\xBA ano\\\\projeto\\\\ProjetoDrGus\\\\frontend\\\\src\\\\paginas\\\\Pagamentos.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect, useCallback } from 'react';\nimport axios from 'axios';\nimport './Pagamentos.css';\nimport { useNavigate } from 'react-router-dom';\nimport { format } from 'date-fns';\nimport Modal from '../componentes/Modal';\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\nimport { faQuestionCircle } from '@fortawesome/free-solid-svg-icons';\nimport { jsxDEV as _jsxDEV, Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst API_BASE_URL = 'http://localhost:8000';\nconst mockFormasPagamento = ['Cartão de Crédito', 'Débito', 'Pix', 'Dinheiro'];\nfunction Pagamentos() {\n  _s();\n  //Estados\n  const [pacientes, setPacientes] = useState([]);\n  const [selectedPacienteId, setSelectedPacienteId] = useState('');\n  const [loadingPacientes, setLoadingPacientes] = useState(true);\n  const [loadingParcelas, setLoadingParcelas] = useState(false);\n  const [error, setError] = useState(null);\n  const navigate = useNavigate();\n  const [abaAtiva, setAbaAtiva] = useState('registrar'); // 'registrar' ou 'historico'\n  const [modoDeExibicao, setModoDeExibicao] = useState('lista'); // 'lista' ou 'formulario'\n  const [isAjudaOpen, setIsAjudaOpen] = useState(false);\n  const [parcelasPendentes, setParcelasPendentes] = useState([]);\n  const [parcelasPagas, setParcelasPagas] = useState([]);\n  const [selectedParcela, setSelectedParcela] = useState(null);\n  const [recebimentoData, setRecebimentoData] = useState({\n    data_recebimento: '',\n    valor_recebido: '',\n    tipo: ''\n  });\n\n  // --- Funções de Busca ---\n  const fetchPacientes = useCallback(async () => {\n    try {\n      const token = localStorage.getItem('access_token');\n      if (!token) throw new Error('Token de autenticação não encontrado.');\n      const response = await axios.get(`${API_BASE_URL}/api/pacientes/`, {\n        headers: {\n          'Authorization': `Bearer ${token}`\n        }\n      });\n      setPacientes(response.data.results || response.data || []);\n    } catch (err) {\n      console.error('Erro ao buscar pacientes:', err);\n      setError('Falha ao carregar pacientes.');\n      if (err.response && err.response.status === 401) {\n        alert('Sessão expirada. Faça login novamente.');\n        navigate('/login');\n      }\n    }\n  }, [navigate]);\n  const fetchParcelasDoPaciente = useCallback(async pacienteId => {\n    if (!pacienteId) {\n      setParcelasPendentes([]);\n      setParcelasPagas([]); // Limpa também o histórico\n      setSelectedParcela(null);\n      setError(null);\n      return;\n    }\n    setLoadingParcelas(true);\n    setError(null);\n    setSelectedParcela(null);\n    setModoDeExibicao('lista'); // Garante que a aba registrar volte para a lista\n\n    try {\n      const token = localStorage.getItem('access_token');\n      if (!token) throw new Error('Token não encontrado.');\n\n      // O filtro de backend 'paciente_id' já busca pelo 'orcamento__paciente'\n      // Removemos o filtro de status para pegar TODAS (Pagas, Pendentes, Atrasadas)\n      const response = await axios.get(`${API_BASE_URL}/api/parcelas/`, {\n        headers: {\n          'Authorization': `Bearer ${token}`\n        },\n        params: {\n          paciente_id: pacienteId\n        }\n      });\n      const todasParcelas = response.data.results || response.data || [];\n\n      // Filtra as parcelas em listas separadas\n      const pendentes = todasParcelas.filter(p => p.status === 'Pendente' || p.status === 'Atrasado');\n      const pagas = todasParcelas.filter(p => p.status === 'Pago');\n      setParcelasPendentes(pendentes);\n      setParcelasPagas(pagas);\n    } catch (err) {\n      console.error('Erro ao buscar parcelas:', err);\n      setError('Falha ao carregar parcelas do paciente.');\n      setParcelasPendentes([]);\n      setParcelasPagas([]);\n      if (err.response && err.response.status === 401) {\n        alert('Sessão expirada. Faça login novamente.');\n        navigate('/login');\n      }\n    } finally {\n      setLoadingParcelas(false);\n    }\n  }, [navigate]);\n\n  // Efeito inicial para buscar pacientes\n  useEffect(() => {\n    setLoadingPacientes(true);\n    fetchPacientes().finally(() => setLoadingPacientes(false));\n  }, [fetchPacientes]);\n\n  // Handlers\n  const handlePacienteChange = e => {\n    const pacienteId = e.target.value;\n    setSelectedPacienteId(pacienteId);\n    setAbaAtiva('registrar'); // Volta para a aba principal\n    setModoDeExibicao('lista'); // Reseta a sub-view\n    fetchParcelasDoPaciente(pacienteId);\n  };\n\n  // Handler para selecionar a parcela\n  const handleParcelaSelect = parcela => {\n    setSelectedParcela(parcela);\n    setRecebimentoData({\n      valor_recebido: parseFloat(parcela.valor_parcela).toFixed(2),\n      data_recebimento: format(new Date(), 'yyyy-MM-dd'),\n      tipo: ''\n    });\n    setModoDeExibicao('formulario'); // Muda para o formulário\n  };\n  const handleRecebimentoInputChange = e => {\n    const {\n      name,\n      value\n    } = e.target;\n    setRecebimentoData(prevState => ({\n      ...prevState,\n      [name]: value\n    }));\n  };\n\n  // Handler para salvar \n  const handleSaveRecebimento = async e => {\n    e.preventDefault();\n    if (!selectedParcela) {\n      alert('Selecione uma parcela...');\n      return;\n    }\n    const token = localStorage.getItem('access_token');\n    const userId = localStorage.getItem('user_id');\n    if (!token || !userId) {\n      alert('Erro de autenticação...');\n      navigate('/');\n      return;\n    }\n    if (!recebimentoData.data_recebimento || !recebimentoData.valor_recebido || !recebimentoData.tipo) {\n      alert('Preencha todos os campos...');\n      return;\n    }\n    try {\n      const dataParaBackend = {\n        parcela: selectedParcela.id_parcela,\n        usuario: parseInt(userId),\n        data_recebimento: recebimentoData.data_recebimento,\n        valor_recebido: parseFloat(recebimentoData.valor_recebido),\n        tipo: recebimentoData.tipo\n      };\n      await axios.post(`${API_BASE_URL}/api/recebimentos/`, dataParaBackend, {\n        headers: {\n          'Authorization': `Bearer ${token}`\n        }\n      });\n      alert('Recebimento registrado com sucesso!');\n      fetchParcelasDoPaciente(selectedPacienteId); // RECARREGA TUDO (pagas e pendentes)\n\n      // Limpa os dados e volta para a lista\n      setSelectedParcela(null);\n      setRecebimentoData({\n        data_recebimento: '',\n        valor_recebido: '',\n        tipo: ''\n      });\n      setModoDeExibicao('lista'); // Volta para a lista\n    } catch (err) {\n      let errorMessage = \"Erro desconhecido.\";\n      if (err.response && err.response.data) {\n        const responseData = err.response.data;\n        console.error('Erro backend:', responseData);\n        if (responseData.non_field_errors) {\n          errorMessage = responseData.non_field_errors.join(' ');\n        } else if (responseData.detail) {\n          errorMessage = responseData.detail;\n        } else {\n          errorMessage = JSON.stringify(responseData);\n        }\n      } else {\n        errorMessage = err.message;\n      }\n      alert(`Erro ao registrar recebimento: ${errorMessage}`);\n      setError(errorMessage);\n    }\n  };\n\n  // Handler para o botão \"Voltar\" / \"Cancelar\" \n  const handleCancelarSelecao = () => {\n    setModoDeExibicao('lista');\n    setSelectedParcela(null);\n    setRecebimentoData({\n      data_recebimento: '',\n      valor_recebido: '',\n      tipo: ''\n    });\n    setError(null);\n  };\n\n  // Função para formatar data DD/MM/YYYY\n  const formatDateBR = dateString => {\n    if (!dateString) return '-';\n    try {\n      return format(new Date(dateString + 'T00:00:00'), 'dd/MM/yyyy');\n    } catch (e) {\n      console.error(\"Erro formatando data:\", dateString, e);\n      return dateString;\n    }\n  };\n  if (loadingPacientes) return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"loading-message\",\n    children: \"Carregando pacientes...\"\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 193,\n    columnNumber: 32\n  }, this);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"pagamentos-container\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"card-section\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"page-header-container\",\n        children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n          children: \"Controle de Pagamentos\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 201,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"help-icon-button\",\n          onClick: () => setIsAjudaOpen(true),\n          title: \"Ajuda\",\n          children: /*#__PURE__*/_jsxDEV(FontAwesomeIcon, {\n            icon: faQuestionCircle\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 207,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 202,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 200,\n        columnNumber: 9\n      }, this), error && /*#__PURE__*/_jsxDEV(\"p\", {\n        className: \"error-message\",\n        children: error\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 211,\n        columnNumber: 19\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"form-group\",\n        children: [/*#__PURE__*/_jsxDEV(\"label\", {\n          htmlFor: \"paciente\",\n          children: \"Selecione o Paciente:\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 214,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n          id: \"paciente\",\n          name: \"paciente\",\n          value: selectedPacienteId,\n          onChange: handlePacienteChange,\n          required: true,\n          className: \"select-field\",\n          title: \"Selecione um paciente para ver suas parcelas pendentes e o hist\\xF3rico de pagamentos.\",\n          children: [/*#__PURE__*/_jsxDEV(\"option\", {\n            value: \"\",\n            children: \"Selecione...\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 224,\n            columnNumber: 13\n          }, this), pacientes.map(p => /*#__PURE__*/_jsxDEV(\"option\", {\n            value: p.id_paciente,\n            children: p.nome\n          }, p.id_paciente, false, {\n            fileName: _jsxFileName,\n            lineNumber: 225,\n            columnNumber: 34\n          }, this))]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 215,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 213,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 198,\n      columnNumber: 7\n    }, this), selectedPacienteId && /*#__PURE__*/_jsxDEV(_Fragment, {\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"pagamentos-tabs-container\",\n        children: [/*#__PURE__*/_jsxDEV(\"button\", {\n          className: `tab-button ${abaAtiva === 'registrar' ? 'active' : ''}`,\n          onClick: () => setAbaAtiva('registrar'),\n          children: \"Registrar Pagamento (Pendentes)\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 233,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          className: `tab-button ${abaAtiva === 'historico' ? 'active' : ''}`,\n          onClick: () => setAbaAtiva('historico'),\n          children: \"Hist\\xF3rico (Pagos)\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 239,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 232,\n        columnNumber: 11\n      }, this), loadingParcelas && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"loading-message\",\n        children: \"Buscando parcelas...\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 247,\n        columnNumber: 31\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          display: abaAtiva === 'registrar' ? 'block' : 'none'\n        },\n        children: [modoDeExibicao === 'lista' && !loadingParcelas && /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"card-section\",\n          children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n            children: \"Parcelas Pendentes / Atrasadas\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 252,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"parcelas-tabela-wrapper\",\n            children: /*#__PURE__*/_jsxDEV(\"table\", {\n              className: \"parcelas-tabela\",\n              children: [/*#__PURE__*/_jsxDEV(\"thead\", {\n                children: /*#__PURE__*/_jsxDEV(\"tr\", {\n                  children: [/*#__PURE__*/_jsxDEV(\"th\", {\n                    children: \"Selecionar\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 256,\n                    columnNumber: 27\n                  }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                    children: \"ID Parcela\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 256,\n                    columnNumber: 46\n                  }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                    children: \"Vencimento\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 256,\n                    columnNumber: 65\n                  }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                    children: \"Valor (R$)\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 256,\n                    columnNumber: 84\n                  }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                    children: \"Status\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 256,\n                    columnNumber: 103\n                  }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                    children: \"Or\\xE7amento ID\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 256,\n                    columnNumber: 118\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 256,\n                  columnNumber: 23\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 255,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"tbody\", {\n                children: parcelasPendentes.length > 0 ? parcelasPendentes.map(parcela => /*#__PURE__*/_jsxDEV(\"tr\", {\n                  children: [/*#__PURE__*/_jsxDEV(\"td\", {\n                    children: /*#__PURE__*/_jsxDEV(\"button\", {\n                      onClick: () => handleParcelaSelect(parcela),\n                      className: \"button-select-parcela\",\n                      children: \"Pagar\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 262,\n                      columnNumber: 33\n                    }, this)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 262,\n                    columnNumber: 29\n                  }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                    children: parcela.id_parcela\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 263,\n                    columnNumber: 29\n                  }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                    children: formatDateBR(parcela.data_vencimento)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 264,\n                    columnNumber: 29\n                  }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                    children: parseFloat(parcela.valor_parcela).toFixed(2)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 265,\n                    columnNumber: 29\n                  }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                    children: parcela.status\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 266,\n                    columnNumber: 29\n                  }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                    children: parcela.orcamento\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 267,\n                    columnNumber: 29\n                  }, this)]\n                }, parcela.id_parcela, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 261,\n                  columnNumber: 27\n                }, this)) : /*#__PURE__*/_jsxDEV(\"tr\", {\n                  children: /*#__PURE__*/_jsxDEV(\"td\", {\n                    colSpan: \"6\",\n                    style: {\n                      textAlign: 'center'\n                    },\n                    children: \"Nenhuma parcela pendente para este paciente.\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 272,\n                    columnNumber: 27\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 271,\n                  columnNumber: 25\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 258,\n                columnNumber: 21\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 254,\n              columnNumber: 19\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 253,\n            columnNumber: 17\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 251,\n          columnNumber: 15\n        }, this), modoDeExibicao === 'formulario' && selectedParcela && /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"card-section\",\n          children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n            children: \"Registrar Pagamento da Parcela\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 283,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            style: {\n              marginTop: '-1rem',\n              marginBottom: '1.5rem',\n              fontSize: '0.9rem',\n              color: '#555'\n            },\n            children: [\"Vencimento: \", formatDateBR(selectedParcela.data_vencimento), ' - ', \"Valor: R$ \", parseFloat(selectedParcela.valor_parcela).toFixed(2)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 284,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"form-row\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"form-group\",\n              children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                children: \"Valor da Parcela:\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 291,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                type: \"text\",\n                value: `R$ ${parseFloat(selectedParcela.valor_parcela).toFixed(2)}`,\n                className: \"input-field-readonly\",\n                readOnly: true\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 292,\n                columnNumber: 21\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 290,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"form-group\",\n              children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                children: \"Data de Vencimento:\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 295,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                type: \"text\",\n                value: formatDateBR(selectedParcela.data_vencimento),\n                className: \"input-field-readonly\",\n                readOnly: true\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 296,\n                columnNumber: 21\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 294,\n              columnNumber: 19\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 289,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n            onSubmit: handleSaveRecebimento,\n            className: \"pagamentos-form-simple\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"form-row\",\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"form-group\",\n                children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                  htmlFor: \"data_recebimento\",\n                  children: \"Data do Pagamento: *\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 302,\n                  columnNumber: 23\n                }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                  type: \"date\",\n                  id: \"data_recebimento\",\n                  name: \"data_recebimento\",\n                  value: recebimentoData.data_recebimento,\n                  onChange: handleRecebimentoInputChange,\n                  required: true,\n                  className: \"input-field\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 303,\n                  columnNumber: 23\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 301,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"form-group\",\n                children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                  htmlFor: \"valor_recebido\",\n                  children: \"Valor Recebido (R$): *\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 306,\n                  columnNumber: 23\n                }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                  type: \"number\",\n                  id: \"valor_recebido\",\n                  name: \"valor_recebido\",\n                  value: recebimentoData.valor_recebido,\n                  onChange: handleRecebimentoInputChange,\n                  step: \"0.01\",\n                  required: true,\n                  className: \"input-field\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 307,\n                  columnNumber: 23\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 305,\n                columnNumber: 21\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 300,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"form-row\",\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"form-group\",\n                children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                  htmlFor: \"tipo\",\n                  children: \"Forma de Pagamento: *\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 312,\n                  columnNumber: 23\n                }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n                  id: \"tipo\",\n                  name: \"tipo\",\n                  value: recebimentoData.tipo,\n                  onChange: handleRecebimentoInputChange,\n                  required: true,\n                  className: \"select-field\",\n                  children: [/*#__PURE__*/_jsxDEV(\"option\", {\n                    value: \"\",\n                    children: \"Selecione\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 314,\n                    columnNumber: 25\n                  }, this), mockFormasPagamento.map((forma, index) => /*#__PURE__*/_jsxDEV(\"option\", {\n                    value: forma,\n                    children: forma\n                  }, index, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 315,\n                    columnNumber: 69\n                  }, this))]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 313,\n                  columnNumber: 23\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 311,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"form-group\",\n                style: {\n                  flex: 1\n                }\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 318,\n                columnNumber: 21\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 310,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"form-actions-pagamento\",\n              style: {\n                justifyContent: 'space-between'\n              },\n              children: [/*#__PURE__*/_jsxDEV(\"button\", {\n                type: \"button\",\n                className: \"button-secondary\",\n                onClick: handleCancelarSelecao,\n                children: \"Cancelar Sele\\xE7\\xE3o\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 321,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                type: \"submit\",\n                className: \"button-primary\",\n                children: \"Confirmar Recebimento\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 324,\n                columnNumber: 21\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 320,\n              columnNumber: 19\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 299,\n            columnNumber: 17\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 282,\n          columnNumber: 15\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 249,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          display: abaAtiva === 'historico' ? 'block' : 'none'\n        },\n        children: !loadingParcelas && /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"card-section\",\n          children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n            children: \"Hist\\xF3rico de Parcelas Pagas\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 334,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"parcelas-tabela-wrapper\",\n            children: /*#__PURE__*/_jsxDEV(\"table\", {\n              className: \"parcelas-tabela\",\n              children: [/*#__PURE__*/_jsxDEV(\"thead\", {\n                children: /*#__PURE__*/_jsxDEV(\"tr\", {\n                  children: [/*#__PURE__*/_jsxDEV(\"th\", {\n                    children: \"ID Parcela\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 339,\n                    columnNumber: 25\n                  }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                    children: \"Vencimento\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 340,\n                    columnNumber: 25\n                  }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                    children: \"Valor (R$)\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 341,\n                    columnNumber: 25\n                  }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                    children: \"Status\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 342,\n                    columnNumber: 25\n                  }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                    children: \"Data Pagamento\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 343,\n                    columnNumber: 25\n                  }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                    children: \"Forma Pagamento\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 344,\n                    columnNumber: 25\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 338,\n                  columnNumber: 23\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 337,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"tbody\", {\n                children: parcelasPagas.length > 0 ? parcelasPagas.map(parcela => {\n                  // Pega o primeiro recebimento (ou um objeto vazio se não houver)\n                  const recebimento = parcela.recebimentos && parcela.recebimentos[0] ? parcela.recebimentos[0] : {};\n                  return /*#__PURE__*/_jsxDEV(\"tr\", {\n                    children: [/*#__PURE__*/_jsxDEV(\"td\", {\n                      children: parcela.id_parcela\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 358,\n                      columnNumber: 31\n                    }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                      children: formatDateBR(parcela.data_vencimento)\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 359,\n                      columnNumber: 31\n                    }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                      children: parseFloat(parcela.valor_parcela).toFixed(2)\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 360,\n                      columnNumber: 31\n                    }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                      children: parcela.status\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 361,\n                      columnNumber: 31\n                    }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                      children: formatDateBR(recebimento.data_recebimento)\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 362,\n                      columnNumber: 31\n                    }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                      children: recebimento.tipo || '-'\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 363,\n                      columnNumber: 31\n                    }, this)]\n                  }, parcela.id_parcela, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 357,\n                    columnNumber: 29\n                  }, this);\n                }) : /*#__PURE__*/_jsxDEV(\"tr\", {\n                  children: /*#__PURE__*/_jsxDEV(\"td\", {\n                    colSpan: \"6\",\n                    style: {\n                      textAlign: 'center'\n                    },\n                    children: \"Nenhum pagamento registrado para este paciente.\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 370,\n                    columnNumber: 27\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 368,\n                  columnNumber: 25\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 347,\n                columnNumber: 21\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 336,\n              columnNumber: 19\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 335,\n            columnNumber: 17\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 333,\n          columnNumber: 15\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 331,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true), /*#__PURE__*/_jsxDEV(Modal, {\n      isOpen: isAjudaOpen,\n      onClose: () => setIsAjudaOpen(false),\n      titulo: \"Ajuda - Controle de Pagamentos\",\n      footer: /*#__PURE__*/_jsxDEV(\"button\", {\n        className: \"modal-button modal-button-secondary\",\n        onClick: () => setIsAjudaOpen(false),\n        children: \"Fechar\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 387,\n        columnNumber: 9\n      }, this),\n      children: [/*#__PURE__*/_jsxDEV(\"p\", {\n        children: \"Esta tela permite gerenciar todas as parcelas de pagamentos dos pacientes.\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 395,\n        columnNumber: 7\n      }, this), /*#__PURE__*/_jsxDEV(\"ul\", {\n        style: {\n          paddingLeft: '20px',\n          lineHeight: '1.6'\n        },\n        children: [/*#__PURE__*/_jsxDEV(\"li\", {\n          children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n            children: \"Sele\\xE7\\xE3o de Paciente:\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 398,\n            columnNumber: 11\n          }, this), \" Comece selecionando um paciente para ver suas finan\\xE7as.\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 397,\n          columnNumber: 9\n        }, this), /*#__PURE__*/_jsxDEV(\"li\", {\n          children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n            children: \"Aba \\\"Registrar Pagamento (Pendentes)\\\":\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 401,\n            columnNumber: 11\n          }, this), \" Mostra todas as parcelas que est\\xE3o com status \\\"Pendente\\\" ou \\\"Atrasado\\\". \\xC9 aqui que voc\\xEA registra um novo pagamento clicando em \\\"Pagar\\\".\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 400,\n          columnNumber: 9\n        }, this), /*#__PURE__*/_jsxDEV(\"li\", {\n          children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n            children: \"Aba \\\"Hist\\xF3rico (Pagos)\\\":\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 404,\n            columnNumber: 11\n          }, this), \" Mostra um hist\\xF3rico de todas as parcelas que j\\xE1 foram quitadas, incluindo a data e a forma de pagamento.\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 403,\n          columnNumber: 9\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 396,\n        columnNumber: 7\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 382,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 196,\n    columnNumber: 5\n  }, this);\n}\n_s(Pagamentos, \"vB3FMHuz9Jw3NNxkqrO8lXpV4EA=\", false, function () {\n  return [useNavigate];\n});\n_c = Pagamentos;\nexport default Pagamentos;\nvar _c;\n$RefreshReg$(_c, \"Pagamentos\");","map":{"version":3,"names":["React","useState","useEffect","useCallback","axios","useNavigate","format","Modal","FontAwesomeIcon","faQuestionCircle","jsxDEV","_jsxDEV","Fragment","_Fragment","API_BASE_URL","mockFormasPagamento","Pagamentos","_s","pacientes","setPacientes","selectedPacienteId","setSelectedPacienteId","loadingPacientes","setLoadingPacientes","loadingParcelas","setLoadingParcelas","error","setError","navigate","abaAtiva","setAbaAtiva","modoDeExibicao","setModoDeExibicao","isAjudaOpen","setIsAjudaOpen","parcelasPendentes","setParcelasPendentes","parcelasPagas","setParcelasPagas","selectedParcela","setSelectedParcela","recebimentoData","setRecebimentoData","data_recebimento","valor_recebido","tipo","fetchPacientes","token","localStorage","getItem","Error","response","get","headers","data","results","err","console","status","alert","fetchParcelasDoPaciente","pacienteId","params","paciente_id","todasParcelas","pendentes","filter","p","pagas","finally","handlePacienteChange","e","target","value","handleParcelaSelect","parcela","parseFloat","valor_parcela","toFixed","Date","handleRecebimentoInputChange","name","prevState","handleSaveRecebimento","preventDefault","userId","dataParaBackend","id_parcela","usuario","parseInt","post","errorMessage","responseData","non_field_errors","join","detail","JSON","stringify","message","handleCancelarSelecao","formatDateBR","dateString","className","children","fileName","_jsxFileName","lineNumber","columnNumber","onClick","title","icon","htmlFor","id","onChange","required","map","id_paciente","nome","style","display","length","data_vencimento","orcamento","colSpan","textAlign","marginTop","marginBottom","fontSize","color","type","readOnly","onSubmit","step","forma","index","flex","justifyContent","recebimento","recebimentos","isOpen","onClose","titulo","footer","paddingLeft","lineHeight","_c","$RefreshReg$"],"sources":["C:/Users/milen/Desktop/4º ano/projeto/ProjetoDrGus/frontend/src/paginas/Pagamentos.js"],"sourcesContent":["import React, { useState, useEffect, useCallback } from 'react';\r\nimport axios from 'axios';\r\nimport './Pagamentos.css';\r\nimport { useNavigate } from 'react-router-dom';\r\nimport { format } from 'date-fns';\r\nimport Modal from '../componentes/Modal'; \r\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\r\nimport { faQuestionCircle } from '@fortawesome/free-solid-svg-icons';\r\n\r\nconst API_BASE_URL = 'http://localhost:8000';\r\nconst mockFormasPagamento = ['Cartão de Crédito', 'Débito', 'Pix', 'Dinheiro'];\r\n\r\nfunction Pagamentos() {\r\n  //Estados\r\n  const [pacientes, setPacientes] = useState([]);\r\n  const [selectedPacienteId, setSelectedPacienteId] = useState('');\r\n  const [loadingPacientes, setLoadingPacientes] = useState(true);\r\n  const [loadingParcelas, setLoadingParcelas] = useState(false);\r\n  const [error, setError] = useState(null);\r\n  const navigate = useNavigate();\r\n  const [abaAtiva, setAbaAtiva] = useState('registrar'); // 'registrar' ou 'historico'\r\n  const [modoDeExibicao, setModoDeExibicao] = useState('lista'); // 'lista' ou 'formulario'\r\n  const [isAjudaOpen, setIsAjudaOpen] = useState(false)\r\n  const [parcelasPendentes, setParcelasPendentes] = useState([]);\r\n  const [parcelasPagas, setParcelasPagas] = useState([]); \r\n  const [selectedParcela, setSelectedParcela] = useState(null);\r\n  const [recebimentoData, setRecebimentoData] = useState({\r\n    data_recebimento: '',\r\n    valor_recebido: '',\r\n    tipo: '',\r\n  });\r\n\r\n  // --- Funções de Busca ---\r\n  const fetchPacientes = useCallback(async () => {\r\n    try {\r\n      const token = localStorage.getItem('access_token');\r\n      if (!token) throw new Error('Token de autenticação não encontrado.');\r\n      const response = await axios.get(`${API_BASE_URL}/api/pacientes/`, {\r\n        headers: { 'Authorization': `Bearer ${token}` }\r\n      });\r\n      setPacientes(response.data.results || response.data || []);\r\n    } catch (err) {\r\n      console.error('Erro ao buscar pacientes:', err);\r\n      setError('Falha ao carregar pacientes.');\r\n      if (err.response && err.response.status === 401) {\r\n        alert('Sessão expirada. Faça login novamente.');\r\n        navigate('/login');\r\n      }\r\n    }\r\n  }, [navigate]);\r\n\r\n  const fetchParcelasDoPaciente = useCallback(async (pacienteId) => {\r\n    if (!pacienteId) {\r\n      setParcelasPendentes([]);\r\n      setParcelasPagas([]); // Limpa também o histórico\r\n      setSelectedParcela(null);\r\n      setError(null);\r\n      return;\r\n    }\r\n\r\n    setLoadingParcelas(true);\r\n    setError(null);\r\n    setSelectedParcela(null);\r\n    setModoDeExibicao('lista'); // Garante que a aba registrar volte para a lista\r\n\r\n    try {\r\n      const token = localStorage.getItem('access_token');\r\n      if (!token) throw new Error('Token não encontrado.');\r\n\r\n      // O filtro de backend 'paciente_id' já busca pelo 'orcamento__paciente'\r\n      // Removemos o filtro de status para pegar TODAS (Pagas, Pendentes, Atrasadas)\r\n      const response = await axios.get(`${API_BASE_URL}/api/parcelas/`, {\r\n        headers: { 'Authorization': `Bearer ${token}` },\r\n        params: { paciente_id: pacienteId } \r\n      });\r\n\r\n      const todasParcelas = response.data.results || response.data || [];\r\n\r\n      // Filtra as parcelas em listas separadas\r\n      const pendentes = todasParcelas.filter(p => p.status === 'Pendente' || p.status === 'Atrasado');\r\n      const pagas = todasParcelas.filter(p => p.status === 'Pago'); \r\n\r\n      setParcelasPendentes(pendentes);\r\n      setParcelasPagas(pagas);\r\n\r\n    } catch (err) {\r\n      console.error('Erro ao buscar parcelas:', err);\r\n      setError('Falha ao carregar parcelas do paciente.');\r\n      setParcelasPendentes([]);\r\n      setParcelasPagas([]);\r\n      if (err.response && err.response.status === 401) {\r\n        alert('Sessão expirada. Faça login novamente.');\r\n        navigate('/login');\r\n      }\r\n    } finally {\r\n      setLoadingParcelas(false);\r\n    }\r\n  }, [navigate]);\r\n\r\n  // Efeito inicial para buscar pacientes\r\n  useEffect(() => {\r\n    setLoadingPacientes(true);\r\n    fetchPacientes().finally(() => setLoadingPacientes(false));\r\n  }, [fetchPacientes]);\r\n\r\n  // Handlers\r\n  const handlePacienteChange = (e) => {\r\n    const pacienteId = e.target.value;\r\n    setSelectedPacienteId(pacienteId);\r\n    setAbaAtiva('registrar'); // Volta para a aba principal\r\n    setModoDeExibicao('lista'); // Reseta a sub-view\r\n    fetchParcelasDoPaciente(pacienteId);\r\n  };\r\n\r\n  // Handler para selecionar a parcela\r\n  const handleParcelaSelect = (parcela) => {\r\n    setSelectedParcela(parcela);\r\n    setRecebimentoData({\r\n      valor_recebido: parseFloat(parcela.valor_parcela).toFixed(2),\r\n      data_recebimento: format(new Date(), 'yyyy-MM-dd'),\r\n      tipo: '',\r\n    });\r\n    setModoDeExibicao('formulario'); // Muda para o formulário\r\n  };\r\n  \r\n  const handleRecebimentoInputChange = (e) => {\r\n    const { name, value } = e.target;\r\n    setRecebimentoData(prevState => ({ ...prevState, [name]: value }));\r\n  };\r\n\r\n  // Handler para salvar \r\n  const handleSaveRecebimento = async (e) => {\r\n    e.preventDefault();\r\n    if (!selectedParcela) { alert('Selecione uma parcela...'); return; }\r\n    \r\n    const token = localStorage.getItem('access_token');\r\n    const userId = localStorage.getItem('user_id');\r\n    \r\n    if (!token || !userId) { alert('Erro de autenticação...'); navigate('/'); return; }\r\n    if (!recebimentoData.data_recebimento || !recebimentoData.valor_recebido || !recebimentoData.tipo) { alert('Preencha todos os campos...'); return; }\r\n\r\n    try {\r\n      const dataParaBackend = {\r\n        parcela: selectedParcela.id_parcela,\r\n        usuario: parseInt(userId),\r\n        data_recebimento: recebimentoData.data_recebimento,\r\n        valor_recebido: parseFloat(recebimentoData.valor_recebido),\r\n        tipo: recebimentoData.tipo,\r\n      };\r\n\r\n      await axios.post(`${API_BASE_URL}/api/recebimentos/`, dataParaBackend, {\r\n        headers: { 'Authorization': `Bearer ${token}` }\r\n      }); \r\n\r\n      alert('Recebimento registrado com sucesso!');\r\n      fetchParcelasDoPaciente(selectedPacienteId); // RECARREGA TUDO (pagas e pendentes)\r\n\r\n      // Limpa os dados e volta para a lista\r\n      setSelectedParcela(null);\r\n      setRecebimentoData({ data_recebimento: '', valor_recebido: '', tipo: '' });\r\n      setModoDeExibicao('lista'); // Volta para a lista\r\n\r\n    } catch (err) {\r\n      let errorMessage = \"Erro desconhecido.\";\r\n      if (err.response && err.response.data) {\r\n          const responseData = err.response.data;\r\n          console.error('Erro backend:', responseData);\r\n          if (responseData.non_field_errors) { errorMessage = responseData.non_field_errors.join(' ');\r\n          } else if (responseData.detail) { errorMessage = responseData.detail;\r\n          } else { errorMessage = JSON.stringify(responseData); }\r\n      } else { errorMessage = err.message; }\r\n      alert(`Erro ao registrar recebimento: ${errorMessage}`);\r\n      setError(errorMessage);\r\n    }\r\n  };\r\n\r\n  // Handler para o botão \"Voltar\" / \"Cancelar\" \r\n  const handleCancelarSelecao = () => {\r\n    setModoDeExibicao('lista');\r\n    setSelectedParcela(null);\r\n    setRecebimentoData({ data_recebimento: '', valor_recebido: '', tipo: '' });\r\n    setError(null);\r\n  };\r\n\r\n  // Função para formatar data DD/MM/YYYY\r\n  const formatDateBR = (dateString) => {\r\n    if (!dateString) return '-';\r\n    try {\r\n      return format(new Date(dateString + 'T00:00:00'), 'dd/MM/yyyy');\r\n    } catch (e) { console.error(\"Erro formatando data:\", dateString, e); return dateString; }\r\n  };\r\n\r\n  if (loadingPacientes) return <div className=\"loading-message\">Carregando pacientes...</div>;\r\n\r\n  return (\r\n    <div className=\"pagamentos-container\">\r\n      {/*Seleção do Paciente*/}\r\n      <div className=\"card-section\">\r\n\r\n        <div className=\"page-header-container\">\r\n          <h2>Controle de Pagamentos</h2>\r\n          <button \r\n            className=\"help-icon-button\" \r\n            onClick={() => setIsAjudaOpen(true)}\r\n            title=\"Ajuda\"\r\n          >\r\n            <FontAwesomeIcon icon={faQuestionCircle} />\r\n          </button>\r\n        </div>\r\n\r\n        {error && <p className=\"error-message\">{error}</p>}\r\n        \r\n        <div className=\"form-group\">\r\n          <label htmlFor=\"paciente\">Selecione o Paciente:</label>\r\n          <select \r\n            id=\"paciente\" \r\n            name=\"paciente\" \r\n            value={selectedPacienteId} \r\n            onChange={handlePacienteChange} \r\n            required \r\n            className=\"select-field\"\r\n            title=\"Selecione um paciente para ver suas parcelas pendentes e o histórico de pagamentos.\" \r\n          >\r\n            <option value=\"\">Selecione...</option>\r\n            {pacientes.map(p => (<option key={p.id_paciente} value={p.id_paciente}>{p.nome}</option>))}\r\n          </select>\r\n        </div>\r\n      </div>\r\n\r\n      {selectedPacienteId && (\r\n        <>\r\n          <div className=\"pagamentos-tabs-container\">\r\n            <button \r\n              className={`tab-button ${abaAtiva === 'registrar' ? 'active' : ''}`}\r\n              onClick={() => setAbaAtiva('registrar')}\r\n            >\r\n              Registrar Pagamento (Pendentes)\r\n            </button>\r\n            <button \r\n              className={`tab-button ${abaAtiva === 'historico' ? 'active' : ''}`}\r\n              onClick={() => setAbaAtiva('historico')}\r\n            >\r\n              Histórico (Pagos)\r\n            </button>\r\n          </div>\r\n\r\n          {loadingParcelas && <div className=\"loading-message\">Buscando parcelas...</div>}\r\n\r\n          <div style={{ display: abaAtiva === 'registrar' ? 'block' : 'none' }}>\r\n            {modoDeExibicao === 'lista' && !loadingParcelas && (\r\n              <div className=\"card-section\">\r\n                <h3>Parcelas Pendentes / Atrasadas</h3>\r\n                <div className=\"parcelas-tabela-wrapper\">\r\n                  <table className=\"parcelas-tabela\">\r\n                    <thead>\r\n                      <tr><th>Selecionar</th><th>ID Parcela</th><th>Vencimento</th><th>Valor (R$)</th><th>Status</th><th>Orçamento ID</th></tr>\r\n                    </thead>\r\n                    <tbody>\r\n                      {parcelasPendentes.length > 0 ? (\r\n                        parcelasPendentes.map(parcela => (\r\n                          <tr key={parcela.id_parcela}>\r\n                            <td><button onClick={() => handleParcelaSelect(parcela)} className=\"button-select-parcela\">Pagar</button></td>\r\n                            <td>{parcela.id_parcela}</td>\r\n                            <td>{formatDateBR(parcela.data_vencimento)}</td>\r\n                            <td>{parseFloat(parcela.valor_parcela).toFixed(2)}</td>\r\n                            <td>{parcela.status}</td>\r\n                            <td>{parcela.orcamento}</td>\r\n                          </tr>\r\n                        ))\r\n                      ) : (\r\n                        <tr>\r\n                          <td colSpan=\"6\" style={{ textAlign: 'center' }}>Nenhuma parcela pendente para este paciente.</td>\r\n                        </tr>\r\n                      )}\r\n                    </tbody>\r\n                  </table>\r\n                </div>\r\n              </div>\r\n            )}\r\n\r\n            {modoDeExibicao === 'formulario' && selectedParcela && (\r\n              <div className=\"card-section\">\r\n                <h3>Registrar Pagamento da Parcela</h3>\r\n                <p style={{marginTop: '-1rem', marginBottom: '1.5rem', fontSize: '0.9rem', color: '#555'}}>\r\n                   Vencimento: {formatDateBR(selectedParcela.data_vencimento)} \r\n                   {' - '}\r\n                   Valor: R$ {parseFloat(selectedParcela.valor_parcela).toFixed(2)}\r\n                </p>\r\n                <div className=\"form-row\">\r\n                  <div className=\"form-group\">\r\n                    <label>Valor da Parcela:</label>\r\n                    <input type=\"text\" value={`R$ ${parseFloat(selectedParcela.valor_parcela).toFixed(2)}`} className=\"input-field-readonly\" readOnly />\r\n                  </div>\r\n                  <div className=\"form-group\">\r\n                    <label>Data de Vencimento:</label>\r\n                    <input type=\"text\" value={formatDateBR(selectedParcela.data_vencimento)} className=\"input-field-readonly\" readOnly />\r\n                  </div>\r\n                </div>\r\n                <form onSubmit={handleSaveRecebimento} className=\"pagamentos-form-simple\">\r\n                  <div className=\"form-row\">\r\n                    <div className=\"form-group\">\r\n                      <label htmlFor=\"data_recebimento\">Data do Pagamento: *</label>\r\n                      <input type=\"date\" id=\"data_recebimento\" name=\"data_recebimento\" value={recebimentoData.data_recebimento} onChange={handleRecebimentoInputChange} required className=\"input-field\" />\r\n                    </div>\r\n                    <div className=\"form-group\">\r\n                      <label htmlFor=\"valor_recebido\">Valor Recebido (R$): *</label>\r\n                      <input type=\"number\" id=\"valor_recebido\" name=\"valor_recebido\" value={recebimentoData.valor_recebido} onChange={handleRecebimentoInputChange} step=\"0.01\" required className=\"input-field\" />\r\n                    </div>\r\n                  </div>\r\n                  <div className=\"form-row\">\r\n                    <div className=\"form-group\">\r\n                      <label htmlFor=\"tipo\">Forma de Pagamento: *</label>\r\n                      <select id=\"tipo\" name=\"tipo\" value={recebimentoData.tipo} onChange={handleRecebimentoInputChange} required className=\"select-field\">\r\n                        <option value=\"\">Selecione</option>\r\n                        {mockFormasPagamento.map((forma, index) => (<option key={index} value={forma}>{forma}</option>))}\r\n                      </select>\r\n                    </div>\r\n                    <div className=\"form-group\" style={{ flex: 1 }}></div>\r\n                  </div>\r\n                  <div className=\"form-actions-pagamento\" style={{ justifyContent: 'space-between' }}>\r\n                    <button type=\"button\" className=\"button-secondary\" onClick={handleCancelarSelecao}>\r\n                      Cancelar Seleção\r\n                    </button>\r\n                    <button type=\"submit\" className=\"button-primary\">Confirmar Recebimento</button>\r\n                  </div>\r\n                </form>\r\n              </div>\r\n            )}\r\n          </div>\r\n\r\n          <div style={{ display: abaAtiva === 'historico' ? 'block' : 'none' }}>\r\n            {!loadingParcelas && (\r\n              <div className=\"card-section\">\r\n                <h3>Histórico de Parcelas Pagas</h3>\r\n                <div className=\"parcelas-tabela-wrapper\">\r\n                  <table className=\"parcelas-tabela\">\r\n                    <thead>\r\n                      <tr>\r\n                        <th>ID Parcela</th>\r\n                        <th>Vencimento</th>\r\n                        <th>Valor (R$)</th>\r\n                        <th>Status</th>\r\n                        <th>Data Pagamento</th>\r\n                        <th>Forma Pagamento</th>\r\n                      </tr>\r\n                    </thead>\r\n                    <tbody>\r\n                      {parcelasPagas.length > 0 ? (\r\n                        parcelasPagas.map(parcela => {\r\n                          \r\n                          // Pega o primeiro recebimento (ou um objeto vazio se não houver)\r\n                          const recebimento = (parcela.recebimentos && parcela.recebimentos[0])\r\n                            ? parcela.recebimentos[0]\r\n                            : {};\r\n\r\n                          return (\r\n                            <tr key={parcela.id_parcela}>\r\n                              <td>{parcela.id_parcela}</td>\r\n                              <td>{formatDateBR(parcela.data_vencimento)}</td>\r\n                              <td>{parseFloat(parcela.valor_parcela).toFixed(2)}</td>\r\n                              <td>{parcela.status}</td>\r\n                              <td>{formatDateBR(recebimento.data_recebimento)}</td>\r\n                              <td>{recebimento.tipo || '-'}</td>\r\n                            </tr>\r\n                          );\r\n                        })\r\n                      ) : (\r\n                        <tr>\r\n                          {/* ColSpan atualizado para 6 colunas */}\r\n                          <td colSpan=\"6\" style={{ textAlign: 'center' }}>Nenhum pagamento registrado para este paciente.</td>\r\n                        </tr>\r\n                      )}\r\n                    </tbody>\r\n                  </table>\r\n                </div>\r\n              </div>\r\n            )}\r\n          </div>\r\n        </>\r\n      )}\r\n\r\n      <Modal\r\n      isOpen={isAjudaOpen}\r\n      onClose={() => setIsAjudaOpen(false)}\r\n      titulo=\"Ajuda - Controle de Pagamentos\"\r\n      footer={\r\n        <button \r\n          className=\"modal-button modal-button-secondary\" \r\n          onClick={() => setIsAjudaOpen(false)}\r\n        >\r\n          Fechar\r\n        </button>\r\n      }\r\n    >\r\n      <p>Esta tela permite gerenciar todas as parcelas de pagamentos dos pacientes.</p>\r\n      <ul style={{ paddingLeft: '20px', lineHeight: '1.6' }}>\r\n        <li>\r\n          <strong>Seleção de Paciente:</strong> Comece selecionando um paciente para ver suas finanças.\r\n        </li>\r\n        <li>\r\n          <strong>Aba \"Registrar Pagamento (Pendentes)\":</strong> Mostra todas as parcelas que estão com status \"Pendente\" ou \"Atrasado\". É aqui que você registra um novo pagamento clicando em \"Pagar\".\r\n        </li>\r\n        <li>\r\n          <strong>Aba \"Histórico (Pagos)\":</strong> Mostra um histórico de todas as parcelas que já foram quitadas, incluindo a data e a forma de pagamento.\r\n        </li>\r\n      </ul>\r\n    </Modal>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default Pagamentos;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}