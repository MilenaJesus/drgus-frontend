{"ast":null,"code":"import _objectSpread from\"C:/Users/milen/Desktop/4\\xBA ano/projeto/ProjetoDrGus/frontend/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import React,{useState,useEffect,useCallback}from'react';import axios from'axios';import'./Pagamentos.css';import{useNavigate}from'react-router-dom';import{format}from'date-fns';import Modal from'../componentes/Modal';import{FontAwesomeIcon}from'@fortawesome/react-fontawesome';import{faQuestionCircle}from'@fortawesome/free-solid-svg-icons';import{useToast}from'../context/ToastContext';import{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";const API_BASE_URL=process.env.REACT_APP_API_BASE_URL;const mockFormasPagamento=['Cartão de Crédito','Débito','Pix','Dinheiro'];function Pagamentos(){//Estados\nconst[pacientes,setPacientes]=useState([]);const[selectedPacienteId,setSelectedPacienteId]=useState('');const[loadingPacientes,setLoadingPacientes]=useState(true);const[loadingParcelas,setLoadingParcelas]=useState(true);const[error,setError]=useState(null);const navigate=useNavigate();const[abaAtiva,setAbaAtiva]=useState('registrar');const[modoDeExibicao,setModoDeExibicao]=useState('lista');const[isAjudaOpen,setIsAjudaOpen]=useState(false);const[parcelasPendentes,setParcelasPendentes]=useState([]);const[parcelasPagas,setParcelasPagas]=useState([]);const[selectedParcela,setSelectedParcela]=useState(null);const[recebimentoData,setRecebimentoData]=useState({data_recebimento:'',valor_recebido:'',tipo:''});const{showToast}=useToast();//Funções de Busca\nconst fetchPacientes=useCallback(async()=>{setLoadingPacientes(true);try{const token=localStorage.getItem('access_token');if(!token){showToast('Token de autenticação não encontrado.','error');return;}const response=await axios.get(\"\".concat(API_BASE_URL,\"/api/pacientes/\"),{headers:{'Authorization':\"Bearer \".concat(token)}});setPacientes(response.data.results||response.data||[]);}catch(err){console.error('Erro ao buscar pacientes:',err);setError('Falha ao carregar pacientes.');if(err.response&&err.response.status===401){showToast('Sessão expirada. Faça login novamente.','error');navigate('/login');}}finally{setLoadingPacientes(false);}},[navigate,showToast]);const fetchParcelas=useCallback(async pacienteId=>{setLoadingParcelas(true);setError(null);setSelectedParcela(null);setModoDeExibicao('lista');let url=\"\".concat(API_BASE_URL,\"/api/parcelas/\");let params={};if(pacienteId){params={paciente_id:pacienteId,status:['Pendente','Atrasado','Pago']};}else{params={status:['Pendente','Atrasado']};setParcelasPagas([]);setAbaAtiva('registrar');}try{const token=localStorage.getItem('access_token');if(!token)throw new Error('Token não encontrado.');const response=await axios.get(url,{headers:{'Authorization':\"Bearer \".concat(token)},params:params,paramsSerializer:{serialize:params=>{const query=new URLSearchParams();Object.keys(params).forEach(key=>{const value=params[key];if(Array.isArray(value)){value.forEach(v=>query.append(key,v));}else{query.append(key,value);}});return query.toString();}}});const todasParcelas=response.data.results||response.data||[];if(pacienteId){const pendentes=todasParcelas.filter(p=>p.status==='Pendente'||p.status==='Atrasado');const pagas=todasParcelas.filter(p=>p.status==='Pago');setParcelasPendentes(pendentes);setParcelasPagas(pagas);}else{setParcelasPendentes(todasParcelas);setParcelasPagas([]);}}catch(err){console.error('Erro ao buscar parcelas:',err);setError('Falha ao carregar parcelas.');setParcelasPendentes([]);setParcelasPagas([]);if(err.response&&err.response.status===401){showToast('Sessão expirada. Faça login novamente.','error');navigate('/login');}}finally{setLoadingParcelas(false);}},[navigate,showToast]);useEffect(()=>{fetchPacientes();fetchParcelas(null);},[fetchPacientes,fetchParcelas]);const handlePacienteChange=e=>{const pacienteId=e.target.value;setSelectedPacienteId(pacienteId);fetchParcelas(pacienteId||null);};const handleParcelaSelect=parcela=>{setSelectedParcela(parcela);setRecebimentoData({valor_recebido:parseFloat(parcela.valor_parcela).toFixed(2),data_recebimento:format(new Date(),'yyyy-MM-dd'),tipo:''});setModoDeExibicao('formulario');};const handleRecebimentoInputChange=e=>{const{name,value}=e.target;setRecebimentoData(prevState=>_objectSpread(_objectSpread({},prevState),{},{[name]:value}));};const handleSaveRecebimento=async e=>{e.preventDefault();if(!selectedParcela){showToast('Selecione uma parcela...');return;}const token=localStorage.getItem('access_token');const userId=localStorage.getItem('user_id');if(!token||!userId){showToast('Erro de autenticação. Faça login novamente.','error');navigate('/');return;}if(!recebimentoData.data_recebimento||!recebimentoData.valor_recebido||!recebimentoData.tipo){showToast('Preencha todos os campos obrigatórios.','error');return;}try{const dataParaBackend={parcela:selectedParcela.id_parcela,usuario:parseInt(userId),data_recebimento:recebimentoData.data_recebimento,valor_recebido:parseFloat(recebimentoData.valor_recebido),tipo:recebimentoData.tipo};await axios.post(\"\".concat(API_BASE_URL,\"/api/recebimentos/\"),dataParaBackend,{headers:{'Authorization':\"Bearer \".concat(token)}});showToast('Recebimento registrado com sucesso!','success');if(selectedPacienteId){fetchParcelas(selectedPacienteId);}else{fetchParcelas(null);}if(selectedPacienteId){setAbaAtiva('historico');}else{setAbaAtiva('registrar');}setSelectedParcela(null);setRecebimentoData({data_recebimento:'',valor_recebido:'',tipo:''});setModoDeExibicao('lista');}catch(err){let errorMessage=\"Erro desconhecido.\";if(err.response&&err.response.data){const responseData=err.response.data;console.error('Erro backend:',responseData);if(responseData.non_field_errors){errorMessage=responseData.non_field_errors.join(' ');}else if(responseData.detail){errorMessage=responseData.detail;}else{errorMessage=JSON.stringify(responseData);}}else{errorMessage=err.message;}showToast(\"Erro ao registrar recebimento: \".concat(errorMessage),'error');setError(errorMessage);}};const handleCancelarSelecao=()=>{setModoDeExibicao('lista');setSelectedParcela(null);setRecebimentoData({data_recebimento:'',valor_recebido:'',tipo:''});setError(null);};const formatDateBR=dateString=>{if(!dateString)return'-';try{return format(new Date(dateString+'T00:00:00'),'dd/MM/yyyy');}catch(e){console.error(\"Erro formatando data:\",dateString,e);return dateString;}};return/*#__PURE__*/_jsxs(\"div\",{className:\"pagamentos-container\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"card-section\",children:[/*#__PURE__*/_jsx(\"h2\",{style:{marginTop:0,marginBottom:'1.5rem'},children:\"Controle de Pagamentos\"}),error&&/*#__PURE__*/_jsx(\"p\",{className:\"error-message\",children:error}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"paciente\",title:\"Filtre por um paciente espec\\xEDfico ou veja as pend\\xEAncias de todos.\",children:\"Filtrar por Paciente:\"}),/*#__PURE__*/_jsxs(\"select\",{id:\"paciente\",name:\"paciente\",value:selectedPacienteId,onChange:handlePacienteChange,className:\"select-field\",title:\"Filtre por um paciente espec\\xEDfico ou veja as pend\\xEAncias de todos.\",children:[/*#__PURE__*/_jsx(\"option\",{value:\"\",children:\"Todos os Pacientes (Vis\\xE3o Geral)\"}),loadingPacientes?/*#__PURE__*/_jsx(\"option\",{disabled:true,children:\"Carregando pacientes...\"}):pacientes.map(p=>/*#__PURE__*/_jsx(\"option\",{value:p.id_paciente,children:p.nome},p.id_paciente))]})]})]}),/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(\"div\",{className:\"pagamentos-tabs-container\",style:{marginTop:'1.5rem'},children:[/*#__PURE__*/_jsx(\"button\",{className:\"tab-button \".concat(abaAtiva==='registrar'?'active':''),onClick:()=>setAbaAtiva('registrar'),title:\"Clique aqui para ver as parcelas pendentes ou atrasadas.\",children:selectedPacienteId?'Pendentes do Paciente':'Visão Geral (Pendentes)'}),selectedPacienteId&&/*#__PURE__*/_jsx(\"button\",{className:\"tab-button \".concat(abaAtiva==='historico'?'active':''),onClick:()=>setAbaAtiva('historico'),title:\"Clique aqui para ver todas as parcelas que j\\xE1 foram pagas.\",children:\"Hist\\xF3rico (Pagos)\"})]}),loadingParcelas&&/*#__PURE__*/_jsx(\"div\",{className:\"loading-message\",children:\"Buscando parcelas...\"}),/*#__PURE__*/_jsxs(\"div\",{style:{display:abaAtiva==='registrar'?'block':'none'},children:[modoDeExibicao==='lista'&&!loadingParcelas&&/*#__PURE__*/_jsxs(\"div\",{className:\"card-section\",children:[/*#__PURE__*/_jsx(\"h3\",{children:\"Parcelas Pendentes / Atrasadas\"}),/*#__PURE__*/_jsx(\"div\",{className:\"parcelas-tabela-wrapper\",children:/*#__PURE__*/_jsxs(\"table\",{className:\"parcelas-tabela\",children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{children:\"Selecionar\"}),!selectedPacienteId&&/*#__PURE__*/_jsx(\"th\",{children:\"Paciente\"}),/*#__PURE__*/_jsx(\"th\",{children:\"ID Parcela\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Vencimento\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Valor (R$)\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Status\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{children:parcelasPendentes.length>0?parcelasPendentes.map(parcela=>{var _parcela$orcamento,_parcela$orcamento$pa;return/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsx(\"button\",{onClick:()=>handleParcelaSelect(parcela),className:\"button-select-parcela\",title:\"Clique para abrir o formul\\xE1rio de registro de pagamento para esta parcela.\",children:\"Pagar\"})}),!selectedPacienteId&&/*#__PURE__*/_jsx(\"td\",{children:((_parcela$orcamento=parcela.orcamento)===null||_parcela$orcamento===void 0?void 0:(_parcela$orcamento$pa=_parcela$orcamento.paciente)===null||_parcela$orcamento$pa===void 0?void 0:_parcela$orcamento$pa.nome)||'Paciente não encontrado'}),/*#__PURE__*/_jsx(\"td\",{children:parcela.id_parcela}),/*#__PURE__*/_jsx(\"td\",{children:formatDateBR(parcela.data_vencimento)}),/*#__PURE__*/_jsx(\"td\",{children:parseFloat(parcela.valor_parcela).toFixed(2)}),/*#__PURE__*/_jsx(\"td\",{children:parcela.status})]},parcela.id_parcela);}):/*#__PURE__*/_jsx(\"tr\",{children:/*#__PURE__*/_jsx(\"td\",{colSpan:!selectedPacienteId?7:6,style:{textAlign:'center'},children:\"Nenhuma parcela pendente encontrada.\"})})})]})})]}),modoDeExibicao==='formulario'&&selectedParcela&&/*#__PURE__*/_jsxs(\"div\",{className:\"card-section\",children:[/*#__PURE__*/_jsx(\"h3\",{children:\"Registrar Pagamento da Parcela\"}),/*#__PURE__*/_jsxs(\"p\",{style:{marginTop:'-1rem',marginBottom:'1.5rem',fontSize:'0.9rem',color:'#555'},children:[\"Vencimento: \",formatDateBR(selectedParcela.data_vencimento),' - ',\"Valor: R$ \",parseFloat(selectedParcela.valor_parcela).toFixed(2)]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-row\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"Valor da Parcela:\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:\"R$ \".concat(parseFloat(selectedParcela.valor_parcela).toFixed(2)),className:\"input-field-readonly\",readOnly:true})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"Data de Vencimento:\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:formatDateBR(selectedParcela.data_vencimento),className:\"input-field-readonly\",readOnly:true})]})]}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSaveRecebimento,className:\"pagamentos-form-simple\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"form-row\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"data_recebimento\",title:\"A data em que o pagamento foi efetivamente recebido.\",children:\"Data do Pagamento: *\"}),/*#__PURE__*/_jsx(\"input\",{type:\"date\",id:\"data_recebimento\",name:\"data_recebimento\",value:recebimentoData.data_recebimento,onChange:handleRecebimentoInputChange,required:true,className:\"input-field\",title:\"A data em que o pagamento foi efetivamente recebido.\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"valor_recebido\",title:\"Insira o valor exato recebido. Pode ser um valor parcial ou o total da parcela.\",children:\"Valor Recebido (R$): *\"}),/*#__PURE__*/_jsx(\"input\",{type:\"number\",id:\"valor_recebido\",name:\"valor_recebido\",value:recebimentoData.valor_recebido,onChange:handleRecebimentoInputChange,step:\"0.01\",required:true,className:\"input-field\",title:\"Insira o valor exato recebido. Pode ser um valor parcial ou o total da parcela.\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-row\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"tipo\",title:\"Selecione o m\\xE9todo que o paciente usou para pagar (Pix, Dinheiro, Cart\\xE3o, etc.).\",children:\"Forma de Pagamento: *\"}),/*#__PURE__*/_jsxs(\"select\",{id:\"tipo\",name:\"tipo\",value:recebimentoData.tipo,onChange:handleRecebimentoInputChange,required:true,className:\"select-field\",title:\"Selecione o m\\xE9todo que o paciente usou para pagar (Pix, Dinheiro, Cart\\xE3o, etc.).\",children:[/*#__PURE__*/_jsx(\"option\",{value:\"\",children:\"Selecione\"}),mockFormasPagamento.map((forma,index)=>/*#__PURE__*/_jsx(\"option\",{value:forma,children:forma},index))]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"form-group\",style:{flex:1}})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-actions-pagamento\",style:{justifyContent:'space-between'},children:[/*#__PURE__*/_jsx(\"button\",{type:\"button\",className:\"button-secondary\",onClick:handleCancelarSelecao,title:\"Clique para fechar este formul\\xE1rio e voltar para a lista de parcelas.\",children:\"Cancelar Sele\\xE7\\xE3o\"}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",className:\"button-primary\",title:\"Clique para salvar este pagamento e marcar a parcela como 'Paga'.\",children:\"Confirmar Recebimento\"})]})]})]})]}),selectedPacienteId&&/*#__PURE__*/_jsx(\"div\",{style:{display:abaAtiva==='historico'?'block':'none'},children:!loadingParcelas&&/*#__PURE__*/_jsxs(\"div\",{className:\"card-section\",children:[/*#__PURE__*/_jsx(\"h3\",{children:\"Hist\\xF3rico de Parcelas Pagas\"}),/*#__PURE__*/_jsx(\"div\",{className:\"parcelas-tabela-wrapper\",children:/*#__PURE__*/_jsxs(\"table\",{className:\"parcelas-tabela\",children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{children:\"ID Parcela\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Vencimento\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Valor (R$)\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Status\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Data Pagamento\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Forma Pagamento\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{children:parcelasPagas.length>0?parcelasPagas.map(parcela=>{const recebimento=parcela.recebimentos&&parcela.recebimentos[0]?parcela.recebimentos[0]:{};return/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{children:parcela.id_parcela}),/*#__PURE__*/_jsx(\"td\",{children:formatDateBR(parcela.data_vencimento)}),/*#__PURE__*/_jsx(\"td\",{children:parseFloat(parcela.valor_parcela).toFixed(2)}),/*#__PURE__*/_jsx(\"td\",{children:parcela.status}),/*#__PURE__*/_jsx(\"td\",{children:formatDateBR(recebimento.data_recebimento)}),/*#__PURE__*/_jsx(\"td\",{children:recebimento.tipo||'-'})]},parcela.id_parcela);}):/*#__PURE__*/_jsx(\"tr\",{children:/*#__PURE__*/_jsx(\"td\",{colSpan:\"6\",style:{textAlign:'center'},children:\"Nenhum pagamento registrado para este paciente.\"})})})]})})]})})]}),/*#__PURE__*/_jsx(\"button\",{className:\"floating-help-button\",onClick:()=>setIsAjudaOpen(true),title:\"Ajuda sobre esta p\\xE1gina\",children:/*#__PURE__*/_jsx(FontAwesomeIcon,{icon:faQuestionCircle})}),/*#__PURE__*/_jsxs(Modal,{isOpen:isAjudaOpen,onClose:()=>setIsAjudaOpen(false),titulo:\"Ajuda - Controle de Pagamentos\",footer:/*#__PURE__*/_jsx(\"button\",{className:\"modal-button modal-button-secondary\",onClick:()=>setIsAjudaOpen(false),title:\"Fechar esta janela de ajuda.\",children:\"Fechar\"}),children:[/*#__PURE__*/_jsx(\"p\",{children:\"Esta tela permite gerenciar todas as parcelas de pagamentos dos pacientes.\"}),/*#__PURE__*/_jsxs(\"ul\",{style:{paddingLeft:'20px',lineHeight:'1.6'},children:[/*#__PURE__*/_jsxs(\"li\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Vis\\xE3o Geral:\"}),\" Por padr\\xE3o, a tela carrega todas as parcelas \\\"Pendentes\\\" e \\\"Atrasadas\\\" de todos os pacientes.\"]}),/*#__PURE__*/_jsxs(\"li\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Filtrar por Paciente:\"}),\" Use o seletor para focar em um paciente espec\\xEDfico. Isso mostrar\\xE1 as parcelas pendentes e habilitar\\xE1 a aba \\\"Hist\\xF3rico (Pagos)\\\" apenas para ele.\"]}),/*#__PURE__*/_jsxs(\"li\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Registrar Pagamento:\"}),\" Na aba de pend\\xEAncias, clique em \\\"Pagar\\\" para abrir o formul\\xE1rio de registro de pagamento.\"]})]})]})]});}export default Pagamentos;","map":{"version":3,"names":["React","useState","useEffect","useCallback","axios","useNavigate","format","Modal","FontAwesomeIcon","faQuestionCircle","useToast","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","API_BASE_URL","process","env","REACT_APP_API_BASE_URL","mockFormasPagamento","Pagamentos","pacientes","setPacientes","selectedPacienteId","setSelectedPacienteId","loadingPacientes","setLoadingPacientes","loadingParcelas","setLoadingParcelas","error","setError","navigate","abaAtiva","setAbaAtiva","modoDeExibicao","setModoDeExibicao","isAjudaOpen","setIsAjudaOpen","parcelasPendentes","setParcelasPendentes","parcelasPagas","setParcelasPagas","selectedParcela","setSelectedParcela","recebimentoData","setRecebimentoData","data_recebimento","valor_recebido","tipo","showToast","fetchPacientes","token","localStorage","getItem","response","get","concat","headers","data","results","err","console","status","fetchParcelas","pacienteId","url","params","paciente_id","Error","paramsSerializer","serialize","query","URLSearchParams","Object","keys","forEach","key","value","Array","isArray","v","append","toString","todasParcelas","pendentes","filter","p","pagas","handlePacienteChange","e","target","handleParcelaSelect","parcela","parseFloat","valor_parcela","toFixed","Date","handleRecebimentoInputChange","name","prevState","_objectSpread","handleSaveRecebimento","preventDefault","userId","dataParaBackend","id_parcela","usuario","parseInt","post","errorMessage","responseData","non_field_errors","join","detail","JSON","stringify","message","handleCancelarSelecao","formatDateBR","dateString","className","children","style","marginTop","marginBottom","htmlFor","title","id","onChange","disabled","map","id_paciente","nome","onClick","display","length","_parcela$orcamento","_parcela$orcamento$pa","orcamento","paciente","data_vencimento","colSpan","textAlign","fontSize","color","type","readOnly","onSubmit","required","step","forma","index","flex","justifyContent","recebimento","recebimentos","icon","isOpen","onClose","titulo","footer","paddingLeft","lineHeight"],"sources":["C:/Users/milen/Desktop/4º ano/projeto/ProjetoDrGus/frontend/src/paginas/Pagamentos.js"],"sourcesContent":["import React, { useState, useEffect, useCallback } from 'react';\r\nimport axios from 'axios';\r\nimport './Pagamentos.css';\r\nimport { useNavigate } from 'react-router-dom';\r\nimport { format } from 'date-fns';\r\nimport Modal from '../componentes/Modal';\r\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\r\nimport { faQuestionCircle } from '@fortawesome/free-solid-svg-icons';\r\nimport { useToast } from '../context/ToastContext';\r\n\r\nconst API_BASE_URL = process.env.REACT_APP_API_BASE_URL;\r\nconst mockFormasPagamento = ['Cartão de Crédito', 'Débito', 'Pix', 'Dinheiro'];\r\n\r\nfunction Pagamentos() {\r\n  //Estados\r\n  const [pacientes, setPacientes] = useState([]);\r\n  const [selectedPacienteId, setSelectedPacienteId] = useState('');\r\n  const [loadingPacientes, setLoadingPacientes] = useState(true);\r\n  const [loadingParcelas, setLoadingParcelas] = useState(true); \r\n  const [error, setError] = useState(null);\r\n  const navigate = useNavigate();\r\n  const [abaAtiva, setAbaAtiva] = useState('registrar'); \r\n  const [modoDeExibicao, setModoDeExibicao] = useState('lista'); \r\n  const [isAjudaOpen, setIsAjudaOpen] = useState(false); \r\n  const [parcelasPendentes, setParcelasPendentes] = useState([]);\r\n  const [parcelasPagas, setParcelasPagas] = useState([]); \r\n  const [selectedParcela, setSelectedParcela] = useState(null);\r\n  const [recebimentoData, setRecebimentoData] = useState({\r\n    data_recebimento: '',\r\n    valor_recebido: '',\r\n    tipo: '',\r\n  });\r\n  const { showToast } = useToast();\r\n\r\n  //Funções de Busca\r\n  const fetchPacientes = useCallback(async () => {\r\n    setLoadingPacientes(true);\r\n    try {\r\n      const token = localStorage.getItem('access_token');\r\n      if (!token) {\r\n        showToast('Token de autenticação não encontrado.', 'error');\r\n        return;\r\n      }\r\n      const response = await axios.get(`${API_BASE_URL}/api/pacientes/`, {\r\n        headers: { 'Authorization': `Bearer ${token}` }\r\n      });\r\n      setPacientes(response.data.results || response.data || []);\r\n    } catch (err) {\r\n      console.error('Erro ao buscar pacientes:', err);\r\n      setError('Falha ao carregar pacientes.');\r\n      if (err.response && err.response.status === 401) {\r\n        showToast('Sessão expirada. Faça login novamente.', 'error');\r\n        navigate('/login');\r\n      }\r\n    } finally {\r\n      setLoadingPacientes(false);\r\n    }\r\n  }, [navigate, showToast]);\r\n\r\n  const fetchParcelas = useCallback(async (pacienteId) => {\r\n    setLoadingParcelas(true);\r\n    setError(null);\r\n    setSelectedParcela(null);\r\n    setModoDeExibicao('lista');\r\n\r\n    let url = `${API_BASE_URL}/api/parcelas/`;\r\n    let params = {};\r\n\r\n    if (pacienteId) {\r\n      params = { paciente_id: pacienteId, status: ['Pendente', 'Atrasado', 'Pago'] };\r\n    } else {\r\n      params = { status: ['Pendente', 'Atrasado'] };\r\n      setParcelasPagas([]);\r\n      setAbaAtiva('registrar');\r\n    }\r\n\r\n    try {\r\n      const token = localStorage.getItem('access_token');\r\n      if (!token) throw new Error('Token não encontrado.');\r\n\r\n      const response = await axios.get(url, {\r\n        headers: { 'Authorization': `Bearer ${token}` },\r\n        params: params,\r\n        paramsSerializer: {\r\n          serialize: (params) => {\r\n            const query = new URLSearchParams();\r\n            Object.keys(params).forEach((key) => {\r\n              const value = params[key];\r\n              if (Array.isArray(value)) {\r\n                value.forEach(v => query.append(key, v));\r\n              } else {\r\n                query.append(key, value);\r\n              }\r\n            });\r\n            return query.toString();\r\n          }\r\n        }\r\n      });\r\n\r\n      const todasParcelas = response.data.results || response.data || [];\r\n\r\n      if (pacienteId) {\r\n        const pendentes = todasParcelas.filter(p => p.status === 'Pendente' || p.status === 'Atrasado');\r\n        const pagas = todasParcelas.filter(p => p.status === 'Pago');\r\n        setParcelasPendentes(pendentes);\r\n        setParcelasPagas(pagas);\r\n      } else {\r\n        setParcelasPendentes(todasParcelas);\r\n        setParcelasPagas([]); \r\n      }\r\n\r\n    } catch (err) {\r\n      console.error('Erro ao buscar parcelas:', err);\r\n      setError('Falha ao carregar parcelas.');\r\n      setParcelasPendentes([]);\r\n      setParcelasPagas([]);\r\n      if (err.response && err.response.status === 401) {\r\n        showToast('Sessão expirada. Faça login novamente.', 'error');\r\n        navigate('/login');\r\n      }\r\n    } finally {\r\n      setLoadingParcelas(false);\r\n    }\r\n  }, [navigate, showToast]);\r\n  \r\n  useEffect(() => {\r\n    fetchPacientes();\r\n    fetchParcelas(null); \r\n  }, [fetchPacientes, fetchParcelas]); \r\n\r\n  const handlePacienteChange = (e) => {\r\n    const pacienteId = e.target.value;\r\n    setSelectedPacienteId(pacienteId);\r\n    fetchParcelas(pacienteId || null);\r\n  };\r\n\r\n  const handleParcelaSelect = (parcela) => {\r\n    setSelectedParcela(parcela);\r\n    setRecebimentoData({\r\n      valor_recebido: parseFloat(parcela.valor_parcela).toFixed(2),\r\n      data_recebimento: format(new Date(), 'yyyy-MM-dd'),\r\n      tipo: '',\r\n    });\r\n    setModoDeExibicao('formulario');\r\n  };\r\n  \r\n  const handleRecebimentoInputChange = (e) => {\r\n    const { name, value } = e.target;\r\n    setRecebimentoData(prevState => ({ ...prevState, [name]: value }));\r\n  };\r\n\r\n  const handleSaveRecebimento = async (e) => {\r\n    e.preventDefault();\r\n    if (!selectedParcela) { showToast('Selecione uma parcela...'); return; }\r\n    const token = localStorage.getItem('access_token');\r\n    const userId = localStorage.getItem('user_id');\r\n    if (!token || !userId) { showToast('Erro de autenticação. Faça login novamente.', 'error'); navigate('/'); return; }\r\n    if (!recebimentoData.data_recebimento || !recebimentoData.valor_recebido || !recebimentoData.tipo) { showToast('Preencha todos os campos obrigatórios.', 'error'); return; }\r\n    try {\r\n      const dataParaBackend = {\r\n        parcela: selectedParcela.id_parcela,\r\n        usuario: parseInt(userId),\r\n        data_recebimento: recebimentoData.data_recebimento,\r\n        valor_recebido: parseFloat(recebimentoData.valor_recebido),\r\n        tipo: recebimentoData.tipo,\r\n      };\r\n      await axios.post(`${API_BASE_URL}/api/recebimentos/`, dataParaBackend, {\r\n        headers: { 'Authorization': `Bearer ${token}` }\r\n      });\r\n      showToast('Recebimento registrado com sucesso!', 'success');\r\n\r\n      if (selectedPacienteId) {\r\n        fetchParcelas(selectedPacienteId);\r\n      } else {\r\n        fetchParcelas(null);\r\n      }\r\n\r\n      if (selectedPacienteId) {\r\n        setAbaAtiva('historico');\r\n      } else {\r\n        setAbaAtiva('registrar');\r\n      }\r\n\r\n      setSelectedParcela(null);\r\n      setRecebimentoData({ data_recebimento: '', valor_recebido: '', tipo: '' });\r\n      setModoDeExibicao('lista'); \r\n    } catch (err) {\r\n      let errorMessage = \"Erro desconhecido.\";\r\n      if (err.response && err.response.data) {\r\n          const responseData = err.response.data;\r\n          console.error('Erro backend:', responseData);\r\n          if (responseData.non_field_errors) { errorMessage = responseData.non_field_errors.join(' ');\r\n          } else if (responseData.detail) { errorMessage = responseData.detail;\r\n          } else { errorMessage = JSON.stringify(responseData); }\r\n      } else { errorMessage = err.message; }\r\n      showToast(`Erro ao registrar recebimento: ${errorMessage}`, 'error');\r\n      setError(errorMessage);\r\n    }\r\n  };\r\n\r\n  const handleCancelarSelecao = () => {\r\n    setModoDeExibicao('lista');\r\n    setSelectedParcela(null);\r\n    setRecebimentoData({ data_recebimento: '', valor_recebido: '', tipo: '' });\r\n    setError(null);\r\n  };\r\n\r\n  const formatDateBR = (dateString) => {\r\n    if (!dateString) return '-';\r\n    try {\r\n      return format(new Date(dateString + 'T00:00:00'), 'dd/MM/yyyy');\r\n    } catch (e) { console.error(\"Erro formatando data:\", dateString, e); return dateString; }\r\n  };\r\n\r\n  return (\r\n    <div className=\"pagamentos-container\">\r\n      <div className=\"card-section\">\r\n        <h2 style={{marginTop: 0, marginBottom: '1.5rem'}}>Controle de Pagamentos</h2>\r\n\r\n        {error && <p className=\"error-message\">{error}</p>}\r\n\r\n        <div className=\"form-group\">\r\n          <label \r\n            htmlFor=\"paciente\"\r\n            title=\"Filtre por um paciente específico ou veja as pendências de todos.\"\r\n          >\r\n            Filtrar por Paciente:\r\n          </label>\r\n          <select \r\n            id=\"paciente\" \r\n            name=\"paciente\" \r\n            value={selectedPacienteId} \r\n            onChange={handlePacienteChange} \r\n            className=\"select-field\"\r\n            title=\"Filtre por um paciente específico ou veja as pendências de todos.\"\r\n          >\r\n            <option value=\"\">Todos os Pacientes (Visão Geral)</option>\r\n            {loadingPacientes ? (\r\n              <option disabled>Carregando pacientes...</option>\r\n            ) : (\r\n              pacientes.map(p => (<option key={p.id_paciente} value={p.id_paciente}>{p.nome}</option>))\r\n            )}\r\n          </select>\r\n        </div>\r\n      </div>\r\n      <>\r\n        <div className=\"pagamentos-tabs-container\" style={{marginTop: '1.5rem'}}>\r\n          <button \r\n            className={`tab-button ${abaAtiva === 'registrar' ? 'active' : ''}`}\r\n            onClick={() => setAbaAtiva('registrar')}\r\n            title=\"Clique aqui para ver as parcelas pendentes ou atrasadas.\"\r\n          >\r\n            {selectedPacienteId ? 'Pendentes do Paciente' : 'Visão Geral (Pendentes)'}\r\n          </button>\r\n          \r\n          {selectedPacienteId && (\r\n            <button \r\n              className={`tab-button ${abaAtiva === 'historico' ? 'active' : ''}`}\r\n              onClick={() => setAbaAtiva('historico')}\r\n              title=\"Clique aqui para ver todas as parcelas que já foram pagas.\"\r\n            >\r\n              Histórico (Pagos)\r\n            </button>\r\n          )}\r\n        </div>\r\n\r\n        {loadingParcelas && <div className=\"loading-message\">Buscando parcelas...</div>}\r\n\r\n        <div style={{ display: abaAtiva === 'registrar' ? 'block' : 'none' }}>\r\n          {modoDeExibicao === 'lista' && !loadingParcelas && (\r\n            <div className=\"card-section\">\r\n              <h3>Parcelas Pendentes / Atrasadas</h3>\r\n              <div className=\"parcelas-tabela-wrapper\">\r\n                <table className=\"parcelas-tabela\">\r\n                  <thead>\r\n                    <tr>\r\n                      <th>Selecionar</th>\r\n                      {!selectedPacienteId && (<th>Paciente</th>)}\r\n                      <th>ID Parcela</th>\r\n                      <th>Vencimento</th>\r\n                      <th>Valor (R$)</th>\r\n                      <th>Status</th>\r\n                    </tr>\r\n                  </thead>\r\n                  <tbody>\r\n                    {parcelasPendentes.length > 0 ? (\r\n                      parcelasPendentes.map(parcela => (\r\n                        <tr key={parcela.id_parcela}>\r\n                          <td>\r\n                            <button \r\n                              onClick={() => handleParcelaSelect(parcela)} \r\n                              className=\"button-select-parcela\"\r\n                              title=\"Clique para abrir o formulário de registro de pagamento para esta parcela.\"\r\n                            >\r\n                              Pagar\r\n                            </button>\r\n                          </td>\r\n                          {!selectedPacienteId && (\r\n                            <td>{parcela.orcamento?.paciente?.nome || 'Paciente não encontrado'}</td>\r\n                          )}\r\n                          <td>{parcela.id_parcela}</td>\r\n                          <td>{formatDateBR(parcela.data_vencimento)}</td>\r\n                          <td>{parseFloat(parcela.valor_parcela).toFixed(2)}</td>\r\n                          <td>{parcela.status}</td>\r\n                        </tr>\r\n                      ))\r\n                    ) : (\r\n                      <tr>\r\n                        <td colSpan={!selectedPacienteId ? 7 : 6} style={{ textAlign: 'center' }}>\r\n                          Nenhuma parcela pendente encontrada.\r\n                        </td>\r\n                      </tr>\r\n                    )}\r\n                  </tbody>\r\n                </table>\r\n              </div>\r\n            </div>\r\n          )}\r\n\r\n          {modoDeExibicao === 'formulario' && selectedParcela && (\r\n            <div className=\"card-section\">\r\n              <h3>Registrar Pagamento da Parcela</h3>\r\n              <p style={{marginTop: '-1rem', marginBottom: '1.5rem', fontSize: '0.9rem', color: '#555'}}>\r\n                   Vencimento: {formatDateBR(selectedParcela.data_vencimento)} \r\n                   {' - '}\r\n                   Valor: R$ {parseFloat(selectedParcela.valor_parcela).toFixed(2)}\r\n                </p>\r\n\r\n              <div className=\"form-row\">\r\n                <div className=\"form-group\">\r\n                  <label>Valor da Parcela:</label>\r\n                  <input type=\"text\" value={`R$ ${parseFloat(selectedParcela.valor_parcela).toFixed(2)}`} className=\"input-field-readonly\" readOnly />\r\n                </div>\r\n                <div className=\"form-group\">\r\n                  <label>Data de Vencimento:</label>\r\n                  <input type=\"text\" value={formatDateBR(selectedParcela.data_vencimento)} className=\"input-field-readonly\" readOnly />\r\n                </div>\r\n              </div>\r\n              <form onSubmit={handleSaveRecebimento} className=\"pagamentos-form-simple\">\r\n                <div className=\"form-row\">\r\n                  <div className=\"form-group\">\r\n                    <label \r\n                      htmlFor=\"data_recebimento\"\r\n                      title=\"A data em que o pagamento foi efetivamente recebido.\"\r\n                    >\r\n                      Data do Pagamento: *\r\n                    </label>\r\n                    <input \r\n                      type=\"date\" \r\n                      id=\"data_recebimento\" \r\n                      name=\"data_recebimento\" \r\n                      value={recebimentoData.data_recebimento} \r\n                      onChange={handleRecebimentoInputChange} \r\n                      required \r\n                      className=\"input-field\"\r\n                      title=\"A data em que o pagamento foi efetivamente recebido.\"\r\n                    />\r\n                  </div>\r\n                  <div className=\"form-group\">\r\n                    <label \r\n                      htmlFor=\"valor_recebido\"\r\n                      title=\"Insira o valor exato recebido. Pode ser um valor parcial ou o total da parcela.\"\r\n                    >\r\n                      Valor Recebido (R$): *\r\n                    </label>\r\n                    <input \r\n                      type=\"number\" \r\n                      id=\"valor_recebido\" \r\n                      name=\"valor_recebido\" \r\n                      value={recebimentoData.valor_recebido} \r\n                      onChange={handleRecebimentoInputChange} \r\n                      step=\"0.01\" \r\n                      required \r\n                      className=\"input-field\"\r\n                      title=\"Insira o valor exato recebido. Pode ser um valor parcial ou o total da parcela.\"\r\n                    />\r\n                  </div>\r\n                </div>\r\n                <div className=\"form-row\">\r\n                  <div className=\"form-group\">\r\n                    <label \r\n                      htmlFor=\"tipo\"\r\n                      title=\"Selecione o método que o paciente usou para pagar (Pix, Dinheiro, Cartão, etc.).\"\r\n                    >\r\n                      Forma de Pagamento: *\r\n                    </label>\r\n                    <select \r\n                      id=\"tipo\" \r\n                      name=\"tipo\" \r\n                      value={recebimentoData.tipo} \r\n                      onChange={handleRecebimentoInputChange} \r\n                      required \r\n                      className=\"select-field\"\r\n                      title=\"Selecione o método que o paciente usou para pagar (Pix, Dinheiro, Cartão, etc.).\"\r\n                    >\r\n                      <option value=\"\">Selecione</option>\r\n                      {mockFormasPagamento.map((forma, index) => (<option key={index} value={forma}>{forma}</option>))}\r\n                    </select>\r\n                  </div>\r\n                  <div className=\"form-group\" style={{ flex: 1 }}></div>\r\n                </div>\r\n                <div className=\"form-actions-pagamento\" style={{ justifyContent: 'space-between' }}>\r\n                  <button \r\n                    type=\"button\" \r\n                    className=\"button-secondary\" \r\n                    onClick={handleCancelarSelecao}\r\n                    title=\"Clique para fechar este formulário e voltar para a lista de parcelas.\"\r\n                  >\r\n                    Cancelar Seleção\r\n                  </button>\r\n                  <button \r\n                    type=\"submit\" \r\n                    className=\"button-primary\"\r\n                    title=\"Clique para salvar este pagamento e marcar a parcela como 'Paga'.\"\r\n                  >\r\n                    Confirmar Recebimento\r\n                  </button>\r\n                </div>\r\n              </form>\r\n            </div>\r\n          )}\r\n        </div>\r\n\r\n        {selectedPacienteId && (\r\n          <div style={{ display: abaAtiva === 'historico' ? 'block' : 'none' }}>\r\n            {!loadingParcelas && (\r\n              <div className=\"card-section\">\r\n                <h3>Histórico de Parcelas Pagas</h3>\r\n                <div className=\"parcelas-tabela-wrapper\">\r\n                  <table className=\"parcelas-tabela\">\r\n                    <thead>\r\n                      <tr>\r\n                        <th>ID Parcela</th>\r\n                        <th>Vencimento</th>\r\n                        <th>Valor (R$)</th>\r\n                        <th>Status</th>\r\n                        <th>Data Pagamento</th>\r\n                        <th>Forma Pagamento</th>\r\n                      </tr>\r\n                    </thead>\r\n                    <tbody>\r\n                      {parcelasPagas.length > 0 ? (\r\n                        parcelasPagas.map(parcela => {\r\n                          const recebimento = (parcela.recebimentos && parcela.recebimentos[0])\r\n                            ? parcela.recebimentos[0]\r\n                            : {};\r\n                          return (\r\n                            <tr key={parcela.id_parcela}>\r\n                              <td>{parcela.id_parcela}</td>\r\n                              <td>{formatDateBR(parcela.data_vencimento)}</td>\r\n                              <td>{parseFloat(parcela.valor_parcela).toFixed(2)}</td>\r\n                              <td>{parcela.status}</td>\r\n                              <td>{formatDateBR(recebimento.data_recebimento)}</td>\r\n                              <td>{recebimento.tipo || '-'}</td>\r\n                            </tr>\r\n                          );\r\n                        })\r\n                      ) : (\r\n                        <tr>\r\n                          <td colSpan=\"6\" style={{ textAlign: 'center' }}>Nenhum pagamento registrado para este paciente.</td>\r\n                        </tr>\r\n                      )}\r\n                    </tbody>\r\n                  </table>\r\n                </div>\r\n              </div>\r\n            )}\r\n          </div>\r\n        )}\r\n      </>\r\n\r\n      <button \r\n        className=\"floating-help-button\" \r\n        onClick={() => setIsAjudaOpen(true)}\r\n        title=\"Ajuda sobre esta página\"\r\n      >\r\n        <FontAwesomeIcon icon={faQuestionCircle} />\r\n      </button>\r\n\r\n      <Modal\r\n        isOpen={isAjudaOpen}\r\n        onClose={() => setIsAjudaOpen(false)}\r\n        titulo=\"Ajuda - Controle de Pagamentos\"\r\n        footer={\r\n          <button \r\n            className=\"modal-button modal-button-secondary\" \r\n            onClick={() => setIsAjudaOpen(false)}\r\n            title=\"Fechar esta janela de ajuda.\"\r\n          >\r\n            Fechar\r\n          </button>\r\n        }\r\n      >\r\n        <p>Esta tela permite gerenciar todas as parcelas de pagamentos dos pacientes.</p>\r\n        <ul style={{ paddingLeft: '20px', lineHeight: '1.6' }}>\r\n          <li>\r\n            <strong>Visão Geral:</strong> Por padrão, a tela carrega todas as parcelas \"Pendentes\" e \"Atrasadas\" de todos os pacientes.\r\n          </li>\r\n          <li>\r\n            <strong>Filtrar por Paciente:</strong> Use o seletor para focar em um paciente específico. Isso mostrará as parcelas pendentes e habilitará a aba \"Histórico (Pagos)\" apenas para ele.\r\n          </li>\r\n          <li>\r\n            <strong>Registrar Pagamento:</strong> Na aba de pendências, clique em \"Pagar\" para abrir o formulário de registro de pagamento.\r\n          </li>\r\n        </ul>\r\n      </Modal>\r\n\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default Pagamentos;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}