{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\milen\\\\Desktop\\\\4\\xBA ano\\\\projeto\\\\ProjetoDrGus\\\\frontend\\\\src\\\\paginas\\\\Orcamentos.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect, useCallback } from 'react';\nimport axios from 'axios';\nimport './Orcamentos.css';\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\nimport { faTrashCan, faCheck } from '@fortawesome/free-solid-svg-icons';\n// --- IMPORTS CORRIGIDOS ---\nimport { useNavigate } from 'react-router-dom';\nimport { format } from 'date-fns';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst API_BASE_URL = 'http://localhost:8000';\nconst dentesArcadaSuperior = [18, 17, 16, 15, 14, 13, 12, 11, 21, 22, 23, 24, 25, 26, 27, 28];\nconst dentesArcadaInferior = [48, 47, 46, 45, 44, 43, 42, 41, 31, 32, 33, 34, 35, 36, 37, 38];\nconst mockFaces = ['V', 'P', 'M', 'D', 'L'];\nconst mockParcelas = [1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12];\nfunction Orcamentos() {\n  _s();\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState(null);\n  const [servicos, setServicos] = useState([]);\n  const [pacientes, setPacientes] = useState([]);\n  const navigate = useNavigate();\n\n  // Estados para o formulário de procedimento\n  const [selectedDente, setSelectedDente] = useState(null);\n  const [procedimentoData, setProcedimentoData] = useState({\n    dente: '',\n    faces: [],\n    servico: '',\n    valor: ''\n  });\n\n  // Estado para a lista de procedimentos adicionados ao orçamento atual\n  const [procedimentosDoOrcamento, setProcedimentosDoOrcamento] = useState([]);\n\n  // Dados gerais do Orçamento\n  const [orcamentoForm, setOrcamentoForm] = useState({\n    paciente_id: '',\n    parcelas: '',\n    // Corrigido: data_orcamento formatada corretamente com date-fns\n    data_orcamento: format(new Date(), 'yyyy-MM-dd')\n  });\n\n  // --- Funções de Busca ---\n  const fetchServicos = useCallback(async () => {\n    try {\n      const token = localStorage.getItem('access_token');\n      if (!token) throw new Error('Token...');\n      const response = await axios.get(`${API_BASE_URL}/api/servicos/`, {\n        headers: {\n          'Authorization': `Bearer ${token}`\n        }\n      });\n      const services = response.data.results || response.data || [];\n      if (Array.isArray(services)) {\n        setServicos(services);\n      } else {\n        setServicos([]);\n      }\n    } catch (err) {\n      if (err.response && err.response.status === 401) {\n        navigate('/login');\n      } else {\n        setError('Erro serviços.');\n        console.error('Erro serv:', err);\n      }\n    }\n  }, [navigate]);\n  const fetchPacientes = useCallback(async () => {\n    try {\n      const token = localStorage.getItem('access_token');\n      if (!token) throw new Error('Token...');\n      const response = await axios.get(`${API_BASE_URL}/api/pacientes/`, {\n        headers: {\n          'Authorization': `Bearer ${token}`\n        }\n      });\n      const patients = response.data.results || response.data || [];\n      if (Array.isArray(patients)) {\n        setPacientes(patients);\n      } else {\n        setPacientes([]);\n      }\n    } catch (err) {\n      if (err.response && err.response.status === 401) {\n        navigate('/login');\n      } else {\n        setError('Erro pacientes.');\n        console.error('Erro pac:', err);\n      }\n    }\n  }, [navigate]);\n  const fetchTratamentos = useCallback(async () => {/* ... (se você usa tratamentos em outro lugar, mantenha a função) ... */\n    // Lógica de busca de tratamentos\n  }, []);\n  useEffect(() => {\n    setLoading(true);\n    setError(null);\n    const initData = async () => {\n      await Promise.all([fetchServicos(), fetchPacientes(), fetchTratamentos()]);\n      setLoading(false);\n    };\n    initData();\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, []);\n\n  // --- Handlers ---\n  const handleOrcamentoFormChange = e => {\n    const {\n      name,\n      value\n    } = e.target;\n    setOrcamentoForm(prev => ({\n      ...prev,\n      [name]: value\n    }));\n  };\n  const handleDenteClick = dente => {\n    const novoDente = selectedDente === dente ? null : dente;\n    setSelectedDente(novoDente);\n    setProcedimentoData(prevData => ({\n      ...prevData,\n      dente: novoDente ? String(novoDente) : ''\n    }));\n  };\n  const handleFaceClick = face => {\n    setProcedimentoData(prevData => {\n      const newFaces = prevData.faces.includes(face) ? prevData.faces.filter(f => f !== face) : [...prevData.faces, face];\n      return {\n        ...prevData,\n        faces: newFaces\n      };\n    });\n  };\n  const handleProcedimentoChange = e => {\n    const servicold = e.target.value;\n    const servicoSelecionado = servicos.find(s => s.id_servico === parseInt(servicold));\n    const novoValor = servicoSelecionado ? servicoSelecionado.valor_referencia : '';\n    setProcedimentoData(prevData => ({\n      ...prevData,\n      servico: servicold,\n      valor: novoValor,\n      dente: servicoSelecionado && servicoSelecionado.exige_dente ? prevData.dente : '',\n      faces: servicoSelecionado && servicoSelecionado.exige_face ? prevData.faces : []\n    }));\n    if (servicoSelecionado && !servicoSelecionado.exige_dente) {\n      setSelectedDente(null);\n    }\n  };\n  const handleAdicionarProcedimento = () => {\n    const servicoSelecionado = servicos.find(s => s.id_servico === parseInt(procedimentoData.servico));\n    if (!servicoSelecionado) {\n      alert('Selecione um serviço.');\n      return;\n    }\n    const exigeDente = servicoSelecionado.exige_dente;\n    const exigeFace = servicoSelecionado.exige_face;\n    const denteValido = !exigeDente || procedimentoData.dente && procedimentoData.dente !== '';\n    const faceValida = !exigeFace || procedimentoData.faces && procedimentoData.faces.length > 0;\n    if (denteValido && faceValida && procedimentoData.servico && procedimentoData.valor) {\n      const novoProcedimento = {\n        idTemporario: Date.now(),\n        dente: procedimentoData.dente || null,\n        faces: procedimentoData.faces.join(','),\n        servico: procedimentoData.servico,\n        valor: procedimentoData.valor,\n        nomeServico: servicoSelecionado.desc_servico\n      };\n      setProcedimentosDoOrcamento([...procedimentosDoOrcamento, novoProcedimento]);\n      setProcedimentoData({\n        dente: '',\n        faces: [],\n        servico: '',\n        valor: ''\n      });\n      setSelectedDente(null);\n    } else {\n      let errorMsg = 'Preencha todos os detalhes obrigatórios do procedimento.\\n';\n      if (exigeDente && !denteValido) errorMsg += '- Selecione um dente.\\n';\n      if (exigeFace && !faceValida) errorMsg += '- Selecione pelo menos uma face.\\n';\n      if (!procedimentoData.servico) errorMsg += '- Selecione um procedimento.\\n';\n      alert(errorMsg);\n    }\n  };\n  const handleRemoverProcedimento = idTemporario => {\n    setProcedimentosDoOrcamento(procedimentosAtuais => procedimentosAtuais.filter(proc => proc.idTemporario !== idTemporario));\n  };\n  const calcularTotalEstimado = () => {\n    console.log(\"Calculando total. Procedimentos atuais:\", procedimentosDoOrcamento); // Log 1: Ver a lista\n\n    const totalCalculado = procedimentosDoOrcamento.reduce((totalAcumulado, item, index) => {\n      const valorString = item.valor || '0'; // Pega o valor (ou '0' se nulo/undefined)\n      const valorNumerico = parseFloat(valorString); // Tenta converter\n\n      console.log(`Item ${index}: valorString='${valorString}', valorNumerico=${valorNumerico}, totalAcumulado=${totalAcumulado}`); // Log 2: Ver cada passo\n\n      // Verifica se a conversão resultou em NaN\n      if (isNaN(valorNumerico)) {\n        console.error(`ERRO: item.valor ('${item.valor}') no índice ${index} não é um número válido!`);\n        // Decide como tratar: pode retornar o total acumulado sem somar, ou somar 0\n        return totalAcumulado; // Ignora o valor inválido\n      }\n      return totalAcumulado + valorNumerico; // Soma normal\n    }, 0); // Começa com 0\n\n    console.log(\"Total calculado ANTES de toFixed:\", totalCalculado); // Log 3: Ver o total final antes de formatar\n\n    // Verifica se o total é um número válido antes de chamar toFixed\n    if (typeof totalCalculado === 'number' && !isNaN(totalCalculado)) {\n      return totalCalculado.toFixed(2);\n    } else {\n      console.error(\"ERRO: O total final não é um número válido:\", totalCalculado);\n      return 'Erro'; // Retorna uma string de erro em vez de quebrar\n    }\n  };\n  const handleSaveOrcamento = async e => {\n    e.preventDefault();\n    setError(null);\n    try {\n      const token = localStorage.getItem('access_token');\n      if (!token) throw new Error('Token...');\n      if (!orcamentoForm.paciente_id) {\n        alert('Selecione um paciente.');\n        return;\n      }\n      if (procedimentosDoOrcamento.length === 0) {\n        alert('Adicione pelo menos um procedimento.');\n        return;\n      }\n      const orcamentoData = {\n        paciente: parseInt(orcamentoForm.paciente_id),\n        data_orcamento: orcamentoForm.data_orcamento,\n        // Ajustado para pegar do form\n        n_vezes: orcamentoForm.parcelas ? parseInt(orcamentoForm.parcelas) : null,\n        itens_para_criar: procedimentosDoOrcamento.map(proc => ({\n          // <--- NOME NOVO AQUI\n          servico: parseInt(proc.servico),\n          data_execucao: new Date().toISOString().split('T')[0],\n          // Ou pegar do form se precisar\n          valor: parseFloat(proc.valor),\n          n_dente: proc.dente || null,\n          face: proc.faces || null\n        }))\n      };\n      console.log(\"Enviando dados para /api/orcamentos/:\", JSON.stringify(orcamentoData, null, 2));\n      await axios.post(`${API_BASE_URL}/api/orcamentos/`, orcamentoData, {\n        headers: {\n          'Authorization': `Bearer ${token}`\n        }\n      });\n      alert('Orçamento salvo com sucesso! As parcelas foram geradas automaticamente (se aplicável).');\n      // Limpar e redirecionar\n      setProcedimentosDoOrcamento([]);\n      setOrcamentoForm({\n        paciente_id: '',\n        parcelas: '',\n        data_orcamento: format(new Date(), 'yyyy-MM-dd')\n      });\n      setProcedimentoData({\n        dente: '',\n        faces: [],\n        servico: '',\n        valor: ''\n      });\n      setSelectedDente(null);\n      navigate('/orcamentos'); // Navega para a lista\n    } catch (err) {\n      let errorMessage = \"Erro desconhecido.\";\n      if (err.response && err.response.data) {\n        const responseData = err.response.data;\n        if (responseData.non_field_errors) {\n          errorMessage = responseData.non_field_errors.join(' ');\n        } else if (responseData.detail) {\n          errorMessage = responseData.detail;\n        } else if (typeof responseData === 'object') {\n          const firstKey = Object.keys(responseData)[0];\n          const firstErrorArray = responseData[firstKey];\n          errorMessage = `${firstKey}: ${Array.isArray(firstErrorArray) ? firstErrorArray.join(' ') : firstErrorArray}`;\n        } else {\n          errorMessage = JSON.stringify(responseData);\n        }\n      } else {\n        errorMessage = err.message;\n      }\n      alert(`Erro ao salvar o orçamento: ${errorMessage}`);\n      console.error('Erro ao salvar orçamento:', err.response ? err.response.data : err);\n      setError(`Erro ao salvar: ${errorMessage}`);\n    }\n  };\n\n  // --- Verificações de Dependência ---\n  const servicoSelecionado = servicos.find(s => s.id_servico === parseInt(procedimentoData.servico));\n  const exigeDente = servicoSelecionado === null || servicoSelecionado === void 0 ? void 0 : servicoSelecionado.exige_dente;\n  const exigeFace = servicoSelecionado === null || servicoSelecionado === void 0 ? void 0 : servicoSelecionado.exige_face;\n  if (loading) return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: \"Carregando...\"\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 238,\n    columnNumber: 25\n  }, this);\n  if (error) return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: [\"Erro: \", error]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 239,\n    columnNumber: 23\n  }, this);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"orcamento-container\",\n    children: [error && /*#__PURE__*/_jsxDEV(\"p\", {\n      className: \"error-message\",\n      children: error\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 243,\n      columnNumber: 23\n    }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n      onSubmit: handleSaveOrcamento,\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"orcamento-content-wrapper\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"orcamento-details-section\",\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"form-row-compact\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"form-group\",\n              children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                htmlFor: \"paciente\",\n                children: \"Paciente *\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 252,\n                columnNumber: 33\n              }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n                id: \"paciente\",\n                name: \"paciente_id\",\n                className: \"select-field\",\n                value: orcamentoForm.paciente_id,\n                onChange: handleOrcamentoFormChange,\n                required: true,\n                children: [/*#__PURE__*/_jsxDEV(\"option\", {\n                  value: \"\",\n                  children: \"Selecione\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 254,\n                  columnNumber: 37\n                }, this), pacientes.map(p => /*#__PURE__*/_jsxDEV(\"option\", {\n                  value: p.id_paciente,\n                  children: p.nome\n                }, p.id_paciente, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 255,\n                  columnNumber: 58\n                }, this))]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 253,\n                columnNumber: 33\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 251,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"form-group\",\n              children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                htmlFor: \"data_orcamento\",\n                children: \"Data *\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 259,\n                columnNumber: 33\n              }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                type: \"date\",\n                id: \"data_orcamento\",\n                name: \"data_orcamento\",\n                value: orcamentoForm.data_orcamento,\n                onChange: handleOrcamentoFormChange,\n                required: true,\n                className: \"input-field\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 260,\n                columnNumber: 33\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 258,\n              columnNumber: 29\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 250,\n            columnNumber: 25\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 249,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"top-section-wrapper\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"odontograma-vis-container\",\n            children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n              className: \"section-title\",\n              children: \"Odontograma\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 270,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"odontograma-grid\",\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"arcada-numeros-superior\",\n                children: dentesArcadaSuperior.map(d => /*#__PURE__*/_jsxDEV(\"span\", {\n                  children: d\n                }, d, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 273,\n                  columnNumber: 105\n                }, this))\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 273,\n                columnNumber: 33\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"arcada-superior\",\n                children: dentesArcadaSuperior.map(d => /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: `dente-box ${selectedDente === d ? 'selected' : ''}`,\n                  onClick: () => exigeDente && handleDenteClick(d)\n                }, d, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 274,\n                  columnNumber: 98\n                }, this))\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 274,\n                columnNumber: 33\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"arcada-inferior\",\n                children: dentesArcadaInferior.map(d => /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: `dente-box ${selectedDente === d ? 'selected' : ''}`,\n                  onClick: () => exigeDente && handleDenteClick(d)\n                }, d, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 277,\n                  columnNumber: 98\n                }, this))\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 277,\n                columnNumber: 33\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"arcada-numeros-inferior\",\n                children: dentesArcadaInferior.map(d => /*#__PURE__*/_jsxDEV(\"span\", {\n                  children: d\n                }, d, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 278,\n                  columnNumber: 105\n                }, this))\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 278,\n                columnNumber: 33\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 271,\n              columnNumber: 29\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 269,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"procedimento-form-card\",\n            children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n              className: \"section-title\",\n              children: \"Adicionar Procedimento\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 284,\n              columnNumber: 29\n            }, this), exigeDente && /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"procedimento-header\",\n              children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                className: \"dente-label\",\n                children: \"Dente Selecionado:\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 288,\n                columnNumber: 37\n              }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"selected-dente\",\n                children: procedimentoData.dente || 'Nenhum'\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 289,\n                columnNumber: 37\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 287,\n              columnNumber: 33\n            }, this), exigeFace && /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"faces-container\",\n              children: mockFaces.map(face => /*#__PURE__*/_jsxDEV(\"button\", {\n                type: \"button\",\n                className: `face-button ${procedimentoData.faces.includes(face) ? 'selected' : ''}`,\n                onClick: () => handleFaceClick(face),\n                children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"face-circle\",\n                  children: /*#__PURE__*/_jsxDEV(FontAwesomeIcon, {\n                    icon: faCheck,\n                    className: \"face-icon\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 297,\n                    columnNumber: 74\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 297,\n                  columnNumber: 45\n                }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                  children: face\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 298,\n                  columnNumber: 45\n                }, this)]\n              }, face, true, {\n                fileName: _jsxFileName,\n                lineNumber: 296,\n                columnNumber: 41\n              }, this))\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 294,\n              columnNumber: 33\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"procedimento-inputs stacked\",\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"form-group\",\n                children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                  htmlFor: \"procedimento\",\n                  children: \"Procedimento *\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 306,\n                  columnNumber: 37\n                }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n                  name: \"procedimento\",\n                  id: \"procedimento\",\n                  value: procedimentoData.servico,\n                  onChange: handleProcedimentoChange,\n                  className: \"select-field\",\n                  children: [/*#__PURE__*/_jsxDEV(\"option\", {\n                    value: \"\",\n                    children: \"Selecione\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 308,\n                    columnNumber: 41\n                  }, this), servicos.map(s => /*#__PURE__*/_jsxDEV(\"option\", {\n                    value: s.id_servico,\n                    children: s.desc_servico\n                  }, s.id_servico, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 309,\n                    columnNumber: 61\n                  }, this))]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 307,\n                  columnNumber: 37\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 305,\n                columnNumber: 33\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"form-group\",\n                children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                  htmlFor: \"valor\",\n                  children: \"Valor (R$) *\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 313,\n                  columnNumber: 37\n                }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                  type: \"text\",\n                  id: \"valor\",\n                  name: \"valor\",\n                  value: procedimentoData.valor,\n                  readOnly: true,\n                  className: \"input-field input-field-readonly\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 314,\n                  columnNumber: 37\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 312,\n                columnNumber: 33\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 304,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n              type: \"button\",\n              className: \"add-button\",\n              onClick: handleAdicionarProcedimento,\n              children: \"Adicionar ao or\\xE7amento\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 318,\n              columnNumber: 29\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 283,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 266,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"orcamento-details-section\",\n          children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n            className: \"section-title\",\n            children: \"Lista de Procedimentos\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 327,\n            columnNumber: 25\n          }, this), procedimentosDoOrcamento.length > 0 ? /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"tabela-procedimentos-wrapper\",\n            children: /*#__PURE__*/_jsxDEV(\"table\", {\n              children: [/*#__PURE__*/_jsxDEV(\"thead\", {\n                children: /*#__PURE__*/_jsxDEV(\"tr\", {\n                  children: [/*#__PURE__*/_jsxDEV(\"th\", {\n                    children: \"Dente\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 335,\n                    columnNumber: 45\n                  }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                    children: \"Face\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 335,\n                    columnNumber: 59\n                  }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                    children: \"Procedimento\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 335,\n                    columnNumber: 72\n                  }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                    children: \"Valor (R$)\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 335,\n                    columnNumber: 93\n                  }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                    children: \"Remover\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 335,\n                    columnNumber: 112\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 334,\n                  columnNumber: 41\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 333,\n                columnNumber: 37\n              }, this), /*#__PURE__*/_jsxDEV(\"tbody\", {\n                children: procedimentosDoOrcamento.map((item, index) => /*#__PURE__*/_jsxDEV(\"tr\", {\n                  children: [/*#__PURE__*/_jsxDEV(\"td\", {\n                    children: item.dente || '-'\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 341,\n                    columnNumber: 49\n                  }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                    children: item.faces || '-'\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 342,\n                    columnNumber: 49\n                  }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                    children: item.nomeServico\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 343,\n                    columnNumber: 49\n                  }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                    children: parseFloat(item.valor).toFixed(2)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 344,\n                    columnNumber: 49\n                  }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                    children: /*#__PURE__*/_jsxDEV(\"button\", {\n                      type: \"button\",\n                      className: \"remove-button\",\n                      onClick: () => handleRemoverProcedimento(item.idTemporario),\n                      children: /*#__PURE__*/_jsxDEV(FontAwesomeIcon, {\n                        icon: faTrashCan\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 347,\n                        columnNumber: 57\n                      }, this)\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 346,\n                      columnNumber: 53\n                    }, this)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 345,\n                    columnNumber: 49\n                  }, this)]\n                }, item.idTemporario, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 340,\n                  columnNumber: 45\n                }, this))\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 338,\n                columnNumber: 37\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 332,\n              columnNumber: 33\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 331,\n            columnNumber: 29\n          }, this) : /*#__PURE__*/_jsxDEV(\"p\", {\n            className: \"no-data-message\",\n            children: \"Nenhum procedimento adicionado ao or\\xE7amento.\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 356,\n            columnNumber: 29\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"orcamento-footer\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"form-row-compact total-row\",\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"form-group\",\n                children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                  htmlFor: \"total\",\n                  children: \"Total estimado:\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 364,\n                  columnNumber: 37\n                }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                  type: \"text\",\n                  id: \"total\",\n                  value: `R$ ${calcularTotalEstimado()}`,\n                  readOnly: true,\n                  className: \"input-field input-field-readonly\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 365,\n                  columnNumber: 37\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 363,\n                columnNumber: 33\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"form-group\",\n                children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                  htmlFor: \"parcelas\",\n                  children: \"N\\xB0 de parcelas\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 368,\n                  columnNumber: 37\n                }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n                  id: \"parcelas\",\n                  name: \"parcelas\",\n                  className: \"select-field\",\n                  value: orcamentoForm.parcelas,\n                  onChange: handleOrcamentoFormChange,\n                  children: [/*#__PURE__*/_jsxDEV(\"option\", {\n                    value: \"\",\n                    children: \"\\xC0 vista\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 370,\n                    columnNumber: 41\n                  }, this), mockParcelas.map((num, index) => /*#__PURE__*/_jsxDEV(\"option\", {\n                    value: num,\n                    children: num\n                  }, index, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 371,\n                    columnNumber: 76\n                  }, this))]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 369,\n                  columnNumber: 37\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 367,\n                columnNumber: 33\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 362,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"form-actions-full\",\n              children: /*#__PURE__*/_jsxDEV(\"button\", {\n                type: \"submit\",\n                className: \"button-save\",\n                children: \"Salvar Or\\xE7amento\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 376,\n                columnNumber: 33\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 375,\n              columnNumber: 29\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 361,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 325,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 246,\n        columnNumber: 17\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 245,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 242,\n    columnNumber: 9\n  }, this);\n}\n_s(Orcamentos, \"2jWkVmcH5aO78mDP0WZOqiFvZn4=\", false, function () {\n  return [useNavigate];\n});\n_c = Orcamentos;\nexport default Orcamentos;\nvar _c;\n$RefreshReg$(_c, \"Orcamentos\");","map":{"version":3,"names":["React","useState","useEffect","useCallback","axios","FontAwesomeIcon","faTrashCan","faCheck","useNavigate","format","jsxDEV","_jsxDEV","API_BASE_URL","dentesArcadaSuperior","dentesArcadaInferior","mockFaces","mockParcelas","Orcamentos","_s","loading","setLoading","error","setError","servicos","setServicos","pacientes","setPacientes","navigate","selectedDente","setSelectedDente","procedimentoData","setProcedimentoData","dente","faces","servico","valor","procedimentosDoOrcamento","setProcedimentosDoOrcamento","orcamentoForm","setOrcamentoForm","paciente_id","parcelas","data_orcamento","Date","fetchServicos","token","localStorage","getItem","Error","response","get","headers","services","data","results","Array","isArray","err","status","console","fetchPacientes","patients","fetchTratamentos","initData","Promise","all","handleOrcamentoFormChange","e","name","value","target","prev","handleDenteClick","novoDente","prevData","String","handleFaceClick","face","newFaces","includes","filter","f","handleProcedimentoChange","servicold","servicoSelecionado","find","s","id_servico","parseInt","novoValor","valor_referencia","exige_dente","exige_face","handleAdicionarProcedimento","alert","exigeDente","exigeFace","denteValido","faceValida","length","novoProcedimento","idTemporario","now","join","nomeServico","desc_servico","errorMsg","handleRemoverProcedimento","procedimentosAtuais","proc","calcularTotalEstimado","log","totalCalculado","reduce","totalAcumulado","item","index","valorString","valorNumerico","parseFloat","isNaN","toFixed","handleSaveOrcamento","preventDefault","orcamentoData","paciente","n_vezes","itens_para_criar","map","data_execucao","toISOString","split","n_dente","JSON","stringify","post","errorMessage","responseData","non_field_errors","detail","firstKey","Object","keys","firstErrorArray","message","children","fileName","_jsxFileName","lineNumber","columnNumber","className","onSubmit","htmlFor","id","onChange","required","p","id_paciente","nome","type","d","onClick","icon","readOnly","num","_c","$RefreshReg$"],"sources":["C:/Users/milen/Desktop/4º ano/projeto/ProjetoDrGus/frontend/src/paginas/Orcamentos.js"],"sourcesContent":["import React, { useState, useEffect, useCallback } from 'react';\r\nimport axios from 'axios';\r\nimport './Orcamentos.css';\r\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\r\nimport { faTrashCan, faCheck } from '@fortawesome/free-solid-svg-icons'; \r\n// --- IMPORTS CORRIGIDOS ---\r\nimport { useNavigate } from 'react-router-dom';\r\nimport { format } from 'date-fns'; \r\n\r\nconst API_BASE_URL = 'http://localhost:8000';\r\n\r\nconst dentesArcadaSuperior = [18, 17, 16, 15, 14, 13, 12, 11, 21, 22, 23, 24, 25, 26, 27, 28];\r\nconst dentesArcadaInferior = [48, 47, 46, 45, 44, 43, 42, 41, 31, 32, 33, 34, 35, 36, 37, 38];\r\nconst mockFaces = ['V', 'P', 'M', 'D', 'L'];\r\nconst mockParcelas = [1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12];\r\n\r\n\r\nfunction Orcamentos() {\r\n    const [loading, setLoading] = useState(true);\r\n    const [error, setError] = useState(null);\r\n    const [servicos, setServicos] = useState([]);\r\n    const [pacientes, setPacientes] = useState([]);\r\n    const navigate = useNavigate();\r\n\r\n    // Estados para o formulário de procedimento\r\n    const [selectedDente, setSelectedDente] = useState(null);\r\n    const [procedimentoData, setProcedimentoData] = useState({ dente: '', faces: [], servico: '', valor: '' });\r\n    \r\n    // Estado para a lista de procedimentos adicionados ao orçamento atual\r\n    const [procedimentosDoOrcamento, setProcedimentosDoOrcamento] = useState([]);\r\n\r\n    // Dados gerais do Orçamento\r\n    const [orcamentoForm, setOrcamentoForm] = useState({\r\n        paciente_id: '',\r\n        parcelas: '',\r\n        // Corrigido: data_orcamento formatada corretamente com date-fns\r\n        data_orcamento: format(new Date(), 'yyyy-MM-dd') \r\n    });\r\n    \r\n    // --- Funções de Busca ---\r\n    const fetchServicos = useCallback(async () => { \r\n        try {\r\n            const token = localStorage.getItem('access_token'); if (!token) throw new Error('Token...');\r\n            const response = await axios.get(`${API_BASE_URL}/api/servicos/`, { headers: { 'Authorization': `Bearer ${token}` } });\r\n            const services = response.data.results || response.data || [];\r\n            if (Array.isArray(services)) { setServicos(services); } else { setServicos([]); }\r\n        } catch (err) { if (err.response && err.response.status === 401){ navigate('/login'); } else { setError('Erro serviços.'); console.error('Erro serv:', err);}}\r\n    }, [navigate]);\r\n\r\n    const fetchPacientes = useCallback(async () => {\r\n         try {\r\n            const token = localStorage.getItem('access_token'); if (!token) throw new Error('Token...');\r\n            const response = await axios.get(`${API_BASE_URL}/api/pacientes/`, { headers: { 'Authorization': `Bearer ${token}` } });\r\n            const patients = response.data.results || response.data || [];\r\n            if (Array.isArray(patients)) { setPacientes(patients); } else { setPacientes([]); }\r\n        } catch (err) { if (err.response && err.response.status === 401){ navigate('/login'); } else { setError('Erro pacientes.'); console.error('Erro pac:', err);}}\r\n    }, [navigate]);\r\n    \r\n    const fetchTratamentos = useCallback(async () => { /* ... (se você usa tratamentos em outro lugar, mantenha a função) ... */ \r\n        // Lógica de busca de tratamentos\r\n    }, []);\r\n\r\n    useEffect(() => {\r\n        setLoading(true); setError(null);\r\n        const initData = async () => {\r\n            await Promise.all([fetchServicos(), fetchPacientes(), fetchTratamentos()]);\r\n            setLoading(false);\r\n        };\r\n        initData();\r\n    // eslint-disable-next-line react-hooks/exhaustive-deps\r\n    }, []); \r\n\r\n    // --- Handlers ---\r\n    const handleOrcamentoFormChange = (e) => {\r\n        const { name, value} = e.target;\r\n        setOrcamentoForm(prev => ({ ...prev, [name]: value }));\r\n    };\r\n\r\n    const handleDenteClick = (dente) => {\r\n        const novoDente = selectedDente === dente ? null : dente;\r\n        setSelectedDente(novoDente);\r\n        setProcedimentoData(prevData => ({ ...prevData, dente: novoDente ? String(novoDente) : '' }));\r\n    };\r\n\r\n    const handleFaceClick = (face) => {\r\n        setProcedimentoData(prevData => {\r\n            const newFaces = prevData.faces.includes(face)\r\n                ? prevData.faces.filter(f => f !== face)\r\n                : [...prevData.faces, face];\r\n            return {...prevData, faces: newFaces };\r\n        });\r\n    };\r\n\r\n    const handleProcedimentoChange = (e) => {\r\n        const servicold = e.target.value;\r\n        const servicoSelecionado = servicos.find(s => s.id_servico === parseInt(servicold));\r\n        const novoValor = servicoSelecionado ? servicoSelecionado.valor_referencia : '';\r\n        \r\n        setProcedimentoData(prevData => ({\r\n            ...prevData,\r\n            servico: servicold,\r\n            valor: novoValor,\r\n            dente: (servicoSelecionado && servicoSelecionado.exige_dente) ? prevData.dente : '',\r\n            faces: (servicoSelecionado && servicoSelecionado.exige_face) ? prevData.faces : [],\r\n        }));\r\n        \r\n        if (servicoSelecionado && !servicoSelecionado.exige_dente) {\r\n            setSelectedDente(null);\r\n        }\r\n    };\r\n\r\n    const handleAdicionarProcedimento = () => {\r\n        const servicoSelecionado = servicos.find(s => s.id_servico === parseInt(procedimentoData.servico));\r\n        if (!servicoSelecionado) { alert('Selecione um serviço.'); return; }\r\n        \r\n        const exigeDente = servicoSelecionado.exige_dente;\r\n        const exigeFace = servicoSelecionado.exige_face;\r\n        const denteValido = !exigeDente || (procedimentoData.dente && procedimentoData.dente !== '');\r\n        const faceValida = !exigeFace || (procedimentoData.faces && procedimentoData.faces.length > 0);\r\n\r\n        if (denteValido && faceValida && procedimentoData.servico && procedimentoData.valor) {\r\n            const novoProcedimento = {\r\n                idTemporario: Date.now(),\r\n                dente: procedimentoData.dente || null,\r\n                faces: procedimentoData.faces.join(','),\r\n                servico: procedimentoData.servico,\r\n                valor: procedimentoData.valor,\r\n                nomeServico: servicoSelecionado.desc_servico \r\n            };\r\n            setProcedimentosDoOrcamento([...procedimentosDoOrcamento, novoProcedimento]);\r\n            setProcedimentoData({ dente: '', faces: [], servico: '', valor: '' });\r\n            setSelectedDente(null);\r\n        } else {\r\n            let errorMsg = 'Preencha todos os detalhes obrigatórios do procedimento.\\n';\r\n            if (exigeDente && !denteValido) errorMsg += '- Selecione um dente.\\n';\r\n            if (exigeFace && !faceValida) errorMsg += '- Selecione pelo menos uma face.\\n';\r\n            if (!procedimentoData.servico) errorMsg += '- Selecione um procedimento.\\n';\r\n            alert(errorMsg);\r\n        }\r\n    };\r\n\r\n    const handleRemoverProcedimento = (idTemporario) => {\r\n        setProcedimentosDoOrcamento(procedimentosAtuais => \r\n            procedimentosAtuais.filter(proc => proc.idTemporario !== idTemporario)\r\n        );\r\n    };\r\n\r\n    const calcularTotalEstimado = () => {\r\n        console.log(\"Calculando total. Procedimentos atuais:\", procedimentosDoOrcamento); // Log 1: Ver a lista\r\n\r\n        const totalCalculado = procedimentosDoOrcamento.reduce((totalAcumulado, item, index) => {\r\n            const valorString = item.valor || '0'; // Pega o valor (ou '0' se nulo/undefined)\r\n            const valorNumerico = parseFloat(valorString); // Tenta converter\r\n\r\n            console.log(`Item ${index}: valorString='${valorString}', valorNumerico=${valorNumerico}, totalAcumulado=${totalAcumulado}`); // Log 2: Ver cada passo\r\n\r\n            // Verifica se a conversão resultou em NaN\r\n            if (isNaN(valorNumerico)) {\r\n                console.error(`ERRO: item.valor ('${item.valor}') no índice ${index} não é um número válido!`);\r\n                // Decide como tratar: pode retornar o total acumulado sem somar, ou somar 0\r\n                return totalAcumulado; // Ignora o valor inválido\r\n            }\r\n\r\n            return totalAcumulado + valorNumerico; // Soma normal\r\n        }, 0); // Começa com 0\r\n\r\n        console.log(\"Total calculado ANTES de toFixed:\", totalCalculado); // Log 3: Ver o total final antes de formatar\r\n\r\n        // Verifica se o total é um número válido antes de chamar toFixed\r\n        if (typeof totalCalculado === 'number' && !isNaN(totalCalculado)) {\r\n            return totalCalculado.toFixed(2);\r\n        } else {\r\n            console.error(\"ERRO: O total final não é um número válido:\", totalCalculado);\r\n            return 'Erro'; // Retorna uma string de erro em vez de quebrar\r\n        }\r\n    };\r\n\r\n    const handleSaveOrcamento = async (e) => {\r\n        e.preventDefault();\r\n        setError(null);\r\n        try {\r\n            const token = localStorage.getItem('access_token');\r\n            if (!token) throw new Error('Token...');\r\n            if (!orcamentoForm.paciente_id) { alert('Selecione um paciente.'); return; }\r\n            if (procedimentosDoOrcamento.length === 0) { alert('Adicione pelo menos um procedimento.'); return; }\r\n\r\n            const orcamentoData = {\r\n                paciente: parseInt(orcamentoForm.paciente_id),\r\n                data_orcamento: orcamentoForm.data_orcamento, // Ajustado para pegar do form\r\n                n_vezes: orcamentoForm.parcelas ? parseInt(orcamentoForm.parcelas) : null,\r\n                \r\n                itens_para_criar: procedimentosDoOrcamento.map(proc => ({ // <--- NOME NOVO AQUI\r\n                    servico: parseInt(proc.servico),\r\n                    data_execucao: new Date().toISOString().split('T')[0], // Ou pegar do form se precisar\r\n                    valor: parseFloat(proc.valor),\r\n                    n_dente: proc.dente || null,\r\n                    face: proc.faces || null,\r\n                })),\r\n            };\r\n\r\n            console.log(\"Enviando dados para /api/orcamentos/:\", JSON.stringify(orcamentoData, null, 2));\r\n\r\n            await axios.post(`${API_BASE_URL}/api/orcamentos/`, orcamentoData, {\r\n                headers: { 'Authorization': `Bearer ${token}` }\r\n            });\r\n\r\n            alert('Orçamento salvo com sucesso! As parcelas foram geradas automaticamente (se aplicável).');\r\n            // Limpar e redirecionar\r\n            setProcedimentosDoOrcamento([]);\r\n            setOrcamentoForm({ paciente_id: '', parcelas: '', data_orcamento: format(new Date(), 'yyyy-MM-dd') });\r\n            setProcedimentoData({ dente: '', faces: [], servico: '', valor: '' });\r\n            setSelectedDente(null);\r\n            navigate('/orcamentos'); // Navega para a lista\r\n        } catch (err) {\r\n            let errorMessage = \"Erro desconhecido.\";\r\n            if (err.response && err.response.data) {\r\n                 const responseData = err.response.data;\r\n                 if (responseData.non_field_errors) { errorMessage = responseData.non_field_errors.join(' '); }\r\n                 else if (responseData.detail) { errorMessage = responseData.detail; }\r\n                 else if (typeof responseData === 'object') {\r\n                     const firstKey = Object.keys(responseData)[0];\r\n                     const firstErrorArray = responseData[firstKey];\r\n                     errorMessage = `${firstKey}: ${Array.isArray(firstErrorArray) ? firstErrorArray.join(' ') : firstErrorArray}`;\r\n                 } else { errorMessage = JSON.stringify(responseData); }\r\n            } else { errorMessage = err.message; }\r\n            \r\n            alert(`Erro ao salvar o orçamento: ${errorMessage}`);\r\n            console.error('Erro ao salvar orçamento:', err.response ? err.response.data: err);\r\n            setError(`Erro ao salvar: ${errorMessage}`);\r\n        }\r\n    };\r\n\r\n    // --- Verificações de Dependência ---\r\n    const servicoSelecionado = servicos.find(s => s.id_servico === parseInt(procedimentoData.servico));\r\n    const exigeDente = servicoSelecionado?.exige_dente;\r\n    const exigeFace = servicoSelecionado?.exige_face;\r\n\r\n    if (loading) return <div>Carregando...</div>;\r\n    if (error) return <div>Erro: {error}</div>;\r\n\r\n    return (\r\n        <div className=\"orcamento-container\">\r\n            {error && <p className=\"error-message\">{error}</p>}\r\n\r\n            <form onSubmit={handleSaveOrcamento}>\r\n                <div className=\"orcamento-content-wrapper\">\r\n                    \r\n                    {/* --- SEÇÃO SUPERIOR: DETALHES INICIAIS --- */}\r\n                    <div className=\"orcamento-details-section\">\r\n                        <div className=\"form-row-compact\">\r\n                            <div className=\"form-group\">\r\n                                <label htmlFor=\"paciente\">Paciente *</label>\r\n                                <select id=\"paciente\" name=\"paciente_id\" className=\"select-field\" value={orcamentoForm.paciente_id} onChange={handleOrcamentoFormChange} required>\r\n                                    <option value=\"\">Selecione</option>\r\n                                    {pacientes.map(p => (<option key={p.id_paciente} value={p.id_paciente}>{p.nome}</option>))}\r\n                                </select>\r\n                            </div>\r\n                            <div className=\"form-group\">\r\n                                <label htmlFor=\"data_orcamento\">Data *</label>\r\n                                <input type=\"date\" id=\"data_orcamento\" name=\"data_orcamento\" value={orcamentoForm.data_orcamento} onChange={handleOrcamentoFormChange} required className=\"input-field\" />\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                    {/* --- FIM DETALHES INICIAIS --- */}\r\n\r\n                    <div className=\"top-section-wrapper\">\r\n                        \r\n                        {/* Odontograma */}\r\n                        <div className=\"odontograma-vis-container\">\r\n                            <h2 className=\"section-title\">Odontograma</h2>\r\n                            <div className=\"odontograma-grid\">\r\n                                {/* Dentes Arcada Superior (usando as variáveis recuperadas) */}\r\n                                <div className=\"arcada-numeros-superior\">{dentesArcadaSuperior.map(d => <span key={d}>{d}</span>)}</div>\r\n                                <div className=\"arcada-superior\">{dentesArcadaSuperior.map(d => (<div key={d} className={`dente-box ${selectedDente === d ? 'selected' : ''}`} onClick={() => exigeDente && handleDenteClick(d)}></div>))}</div>\r\n                                \r\n                                {/* Dentes Arcada Inferior (usando as variáveis recuperadas) */}\r\n                                <div className=\"arcada-inferior\">{dentesArcadaInferior.map(d => (<div key={d} className={`dente-box ${selectedDente === d ? 'selected' : ''}`} onClick={() => exigeDente && handleDenteClick(d)}></div>))}</div>\r\n                                <div className=\"arcada-numeros-inferior\">{dentesArcadaInferior.map(d => <span key={d}>{d}</span>)}</div>\r\n                            </div>\r\n                        </div>\r\n\r\n                        {/* Formulário Adicionar Procedimento */}\r\n                        <div className=\"procedimento-form-card\">\r\n                            <h3 className=\"section-title\">Adicionar Procedimento</h3>\r\n                            \r\n                            {exigeDente && (\r\n                                <div className=\"procedimento-header\">\r\n                                    <label className=\"dente-label\">Dente Selecionado:</label>\r\n                                    <span className=\"selected-dente\">{procedimentoData.dente || 'Nenhum'}</span>\r\n                                </div>\r\n                            )}\r\n\r\n                            {exigeFace && (\r\n                                <div className=\"faces-container\">\r\n                                    {mockFaces.map(face => (\r\n                                        <button type=\"button\" key={face} className={`face-button ${procedimentoData.faces.includes(face) ? 'selected' : ''}`} onClick={() => handleFaceClick(face)}>\r\n                                            <div className=\"face-circle\"><FontAwesomeIcon icon={faCheck} className=\"face-icon\" /></div>\r\n                                            <span>{face}</span>\r\n                                        </button>\r\n                                    ))}\r\n                                </div>\r\n                            )}\r\n\r\n                            <div className=\"procedimento-inputs stacked\">\r\n                                <div className=\"form-group\">\r\n                                    <label htmlFor=\"procedimento\">Procedimento *</label>\r\n                                    <select name=\"procedimento\" id=\"procedimento\" value={procedimentoData.servico} onChange={handleProcedimentoChange} className=\"select-field\">\r\n                                        <option value=\"\">Selecione</option>\r\n                                        {servicos.map(s => (<option key={s.id_servico} value={s.id_servico}>{s.desc_servico}</option>))}\r\n                                    </select>\r\n                                </div>\r\n                                <div className=\"form-group\">\r\n                                    <label htmlFor=\"valor\">Valor (R$) *</label>\r\n                                    <input type=\"text\" id=\"valor\" name=\"valor\" value={procedimentoData.valor} readOnly className=\"input-field input-field-readonly\" />\r\n                                </div>\r\n                            </div>\r\n\r\n                            <button type=\"button\" className=\"add-button\" onClick={handleAdicionarProcedimento}>\r\n                                Adicionar ao orçamento\r\n                            </button>\r\n                        </div>\r\n                    </div>\r\n\r\n                    {/* Seção Inferior: Tabela e Rodapé */}\r\n                    <div className=\"orcamento-details-section\">\r\n                        \r\n                        <h3 className=\"section-title\">Lista de Procedimentos</h3>\r\n\r\n                        {/* Tabela de Procedimentos Adicionados */}\r\n                        {procedimentosDoOrcamento.length > 0 ? (\r\n                            <div className=\"tabela-procedimentos-wrapper\">\r\n                                <table>\r\n                                    <thead>\r\n                                        <tr>\r\n                                            <th>Dente</th><th>Face</th><th>Procedimento</th><th>Valor (R$)</th><th>Remover</th>\r\n                                        </tr>\r\n                                    </thead>\r\n                                    <tbody>\r\n                                        {procedimentosDoOrcamento.map((item, index) => (\r\n                                            <tr key={item.idTemporario}>\r\n                                                <td>{item.dente || '-'}</td>\r\n                                                <td>{item.faces || '-'}</td>\r\n                                                <td>{item.nomeServico}</td>\r\n                                                <td>{parseFloat(item.valor).toFixed(2)}</td>\r\n                                                <td>\r\n                                                    <button type=\"button\" className=\"remove-button\" onClick={() => handleRemoverProcedimento(item.idTemporario)}>\r\n                                                        <FontAwesomeIcon icon={faTrashCan} />\r\n                                                    </button>\r\n                                                </td>\r\n                                            </tr>\r\n                                        ))}\r\n                                    </tbody>\r\n                                </table>\r\n                            </div>\r\n                        ) : (\r\n                            <p className='no-data-message'>Nenhum procedimento adicionado ao orçamento.</p>\r\n                        )}\r\n\r\n\r\n                        {/* Rodapé do Orçamento com Total e Parcelamento */}\r\n                        <div className=\"orcamento-footer\">\r\n                            <div className=\"form-row-compact total-row\">\r\n                                <div className=\"form-group\">\r\n                                    <label htmlFor=\"total\">Total estimado:</label>\r\n                                    <input type=\"text\" id=\"total\" value={`R$ ${calcularTotalEstimado()}`} readOnly className=\"input-field input-field-readonly\" />\r\n                                </div>\r\n                                <div className=\"form-group\">\r\n                                    <label htmlFor=\"parcelas\">N° de parcelas</label>\r\n                                    <select id=\"parcelas\" name=\"parcelas\" className=\"select-field\" value={orcamentoForm.parcelas} onChange={handleOrcamentoFormChange}>\r\n                                        <option value=\"\">À vista</option>\r\n                                        {mockParcelas.map((num, index) => (<option key={index} value={num}>{num}</option>))}\r\n                                    </select>\r\n                                </div>\r\n                            </div>\r\n                            <div className=\"form-actions-full\">\r\n                                <button type=\"submit\" className=\"button-save\">\r\n                                    Salvar Orçamento\r\n                                </button>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </form>\r\n        </div>\r\n    );\r\n}\r\n\r\nexport default Orcamentos;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}