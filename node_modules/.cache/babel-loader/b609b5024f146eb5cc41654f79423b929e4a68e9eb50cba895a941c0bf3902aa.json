{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\milen\\\\Desktop\\\\4\\xBA ano\\\\projeto\\\\ProjetoDrGus\\\\frontend\\\\src\\\\paginas\\\\Pagamentos.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect, useCallback } from 'react';\nimport axios from 'axios';\nimport './Pagamentos.css';\nimport { useNavigate } from 'react-router-dom';\nimport { format } from 'date-fns';\nimport Modal from '../componentes/Modal';\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\nimport { faQuestionCircle } from '@fortawesome/free-solid-svg-icons';\nimport { jsxDEV as _jsxDEV, Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst API_BASE_URL = 'http://localhost:8000';\nconst mockFormasPagamento = ['Cartão de Crédito', 'Débito', 'Pix', 'Dinheiro'];\nfunction Pagamentos() {\n  _s();\n  //Estados\n  const [pacientes, setPacientes] = useState([]);\n  const [selectedPacienteId, setSelectedPacienteId] = useState('');\n  const [loadingPacientes, setLoadingPacientes] = useState(true);\n  const [loadingParcelas, setLoadingParcelas] = useState(true);\n  const [error, setError] = useState(null);\n  const navigate = useNavigate();\n  const [abaAtiva, setAbaAtiva] = useState('registrar');\n  const [modoDeExibicao, setModoDeExibicao] = useState('lista');\n  const [isAjudaOpen, setIsAjudaOpen] = useState(false);\n  const [parcelasPendentes, setParcelasPendentes] = useState([]);\n  const [parcelasPagas, setParcelasPagas] = useState([]);\n  const [selectedParcela, setSelectedParcela] = useState(null);\n  const [recebimentoData, setRecebimentoData] = useState({\n    data_recebimento: '',\n    valor_recebido: '',\n    tipo: ''\n  });\n\n  //Funções de Busca\n  const fetchPacientes = useCallback(async () => {\n    setLoadingPacientes(true);\n    try {\n      const token = localStorage.getItem('access_token');\n      if (!token) throw new Error('Token de autenticação não encontrado.');\n      const response = await axios.get(`${API_BASE_URL}/api/pacientes/`, {\n        headers: {\n          'Authorization': `Bearer ${token}`\n        }\n      });\n      setPacientes(response.data.results || response.data || []);\n    } catch (err) {\n      console.error('Erro ao buscar pacientes:', err);\n      setError('Falha ao carregar pacientes.');\n      if (err.response && err.response.status === 401) {\n        alert('Sessão expirada. Faça login novamente.');\n        navigate('/login');\n      }\n    } finally {\n      setLoadingPacientes(false);\n    }\n  }, [navigate]);\n  const fetchParcelas = useCallback(async pacienteId => {\n    setLoadingParcelas(true);\n    setError(null);\n    setSelectedParcela(null);\n    setModoDeExibicao('lista');\n    let url = `${API_BASE_URL}/api/parcelas/`;\n    let params = {};\n    if (pacienteId) {\n      // Se um paciente é selecionado, buscamos TUDO dele\n      params = {\n        paciente_id: pacienteId\n      };\n    } else {\n      // Se NENHUM paciente (visão geral), buscamos SÓ o que está pendente/atrasado de TODOS\n      params = {\n        status: ['Pendente', 'Atrasado']\n      };\n      setParcelasPagas([]); // Limpa o histórico\n      setAbaAtiva('registrar'); // Força a aba de registro\n    }\n    try {\n      const token = localStorage.getItem('access_token');\n      if (!token) throw new Error('Token não encontrado.');\n      const response = await axios.get(url, {\n        headers: {\n          'Authorization': `Bearer ${token}`\n        },\n        params: params,\n        paramsSerializer: {\n          serialize: params => {\n            const parts = [];\n            for (const key in params) {\n              const value = params[key];\n              if (Array.isArray(value)) {\n                value.forEach(val => {\n                  parts.push(`${key}=${encodeURIComponent(val)}`);\n                });\n              } else {\n                parts.push(`${key}=${encodeURIComponent(value)}`);\n              }\n            }\n            return parts.join('&');\n          }\n        }\n      });\n      const todasParcelas = response.data.results || response.data || [];\n      if (pacienteId) {\n        // Se filtramos por paciente, separamos pagos e pendentes\n        const pendentes = todasParcelas.filter(p => p.status === 'Pendente' || p.status === 'Atrasado');\n        const pagas = todasParcelas.filter(p => p.status === 'Pago');\n        setParcelasPendentes(pendentes);\n        setParcelasPagas(pagas);\n      } else {\n        // Se não filtramos (visão geral), todos são pendentes\n        setParcelasPendentes(todasParcelas);\n        setParcelasPagas([]); // Garante que o histórico está vazio\n      }\n    } catch (err) {\n      console.error('Erro ao buscar parcelas:', err);\n      setError('Falha ao carregar parcelas.');\n      setParcelasPendentes([]);\n      setParcelasPagas([]);\n      if (err.response && err.response.status === 401) {\n        alert('Sessão expirada. Faça login novamente.');\n        navigate('/login');\n      }\n    } finally {\n      setLoadingParcelas(false);\n    }\n  }, [navigate]);\n  useEffect(() => {\n    fetchPacientes();\n    fetchParcelas(null);\n  }, [fetchPacientes, fetchParcelas]);\n  const handlePacienteChange = e => {\n    const pacienteId = e.target.value;\n    setSelectedPacienteId(pacienteId);\n    fetchParcelas(pacienteId || null);\n  };\n  const handleParcelaSelect = parcela => {\n    setSelectedParcela(parcela);\n    setRecebimentoData({\n      valor_recebido: parseFloat(parcela.valor_parcela).toFixed(2),\n      data_recebimento: format(new Date(), 'yyyy-MM-dd'),\n      tipo: ''\n    });\n    setModoDeExibicao('formulario');\n  };\n  const handleRecebimentoInputChange = e => {\n    const {\n      name,\n      value\n    } = e.target;\n    setRecebimentoData(prevState => ({\n      ...prevState,\n      [name]: value\n    }));\n  };\n  const handleSaveRecebimento = async e => {\n    e.preventDefault();\n    if (!selectedParcela) {\n      alert('Selecione uma parcela...');\n      return;\n    }\n    const token = localStorage.getItem('access_token');\n    const userId = localStorage.getItem('user_id');\n    if (!token || !userId) {\n      alert('Erro de autenticação...');\n      navigate('/');\n      return;\n    }\n    if (!recebimentoData.data_recebimento || !recebimentoData.valor_recebido || !recebimentoData.tipo) {\n      alert('Preencha todos os campos...');\n      return;\n    }\n    try {\n      const dataParaBackend = {\n        parcela: selectedParcela.id_parcela,\n        usuario: parseInt(userId),\n        data_recebimento: recebimentoData.data_recebimento,\n        valor_recebido: parseFloat(recebimentoData.valor_recebido),\n        tipo: recebimentoData.tipo\n      };\n      await axios.post(`${API_BASE_URL}/api/recebimentos/`, dataParaBackend, {\n        headers: {\n          'Authorization': `Bearer ${token}`\n        }\n      });\n      alert('Recebimento registrado com sucesso!');\n      fetchParcelas(selectedPacienteId || null);\n      setSelectedParcela(null);\n      setRecebimentoData({\n        data_recebimento: '',\n        valor_recebido: '',\n        tipo: ''\n      });\n      setModoDeExibicao('lista');\n    } catch (err) {\n      let errorMessage = \"Erro desconhecido.\";\n      if (err.response && err.response.data) {\n        const responseData = err.response.data;\n        console.error('Erro backend:', responseData);\n        if (responseData.non_field_errors) {\n          errorMessage = responseData.non_field_errors.join(' ');\n        } else if (responseData.detail) {\n          errorMessage = responseData.detail;\n        } else {\n          errorMessage = JSON.stringify(responseData);\n        }\n      } else {\n        errorMessage = err.message;\n      }\n      alert(`Erro ao registrar recebimento: ${errorMessage}`);\n      setError(errorMessage);\n    }\n  };\n  const handleCancelarSelecao = () => {\n    setModoDeExibicao('lista');\n    setSelectedParcela(null);\n    setRecebimentoData({\n      data_recebimento: '',\n      valor_recebido: '',\n      tipo: ''\n    });\n    setError(null);\n  };\n  const formatDateBR = dateString => {\n    // ... (código mantido) ...\n    if (!dateString) return '-';\n    try {\n      return format(new Date(dateString + 'T00:00:00'), 'dd/MM/yyyy');\n    } catch (e) {\n      console.error(\"Erro formatando data:\", dateString, e);\n      return dateString;\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"pagamentos-container\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"card-section\",\n      children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n        style: {\n          marginTop: 0,\n          marginBottom: '1.5rem'\n        },\n        children: \"Controle de Pagamentos\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 213,\n        columnNumber: 9\n      }, this), error && /*#__PURE__*/_jsxDEV(\"p\", {\n        className: \"error-message\",\n        children: error\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 215,\n        columnNumber: 19\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"form-group\",\n        children: [/*#__PURE__*/_jsxDEV(\"label\", {\n          htmlFor: \"paciente\",\n          title: \"Filtre por um paciente espec\\xEDfico ou veja as pend\\xEAncias de todos.\",\n          children: \"Filtrar por Paciente:\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 219,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n          id: \"paciente\",\n          name: \"paciente\",\n          value: selectedPacienteId,\n          onChange: handlePacienteChange,\n          className: \"select-field\",\n          title: \"Filtre por um paciente espec\\xEDfico ou veja as pend\\xEAncias de todos.\",\n          children: [/*#__PURE__*/_jsxDEV(\"option\", {\n            value: \"\",\n            children: \"Todos os Pacientes (Vis\\xE3o Geral)\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 233,\n            columnNumber: 13\n          }, this), loadingPacientes ? /*#__PURE__*/_jsxDEV(\"option\", {\n            disabled: true,\n            children: \"Carregando pacientes...\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 235,\n            columnNumber: 15\n          }, this) : pacientes.map(p => /*#__PURE__*/_jsxDEV(\"option\", {\n            value: p.id_paciente,\n            children: p.nome\n          }, p.id_paciente, false, {\n            fileName: _jsxFileName,\n            lineNumber: 237,\n            columnNumber: 35\n          }, this))]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 225,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 218,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 210,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(_Fragment, {\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"pagamentos-tabs-container\",\n        style: {\n          marginTop: '1.5rem'\n        },\n        children: [/*#__PURE__*/_jsxDEV(\"button\", {\n          className: `tab-button ${abaAtiva === 'registrar' ? 'active' : ''}`,\n          onClick: () => setAbaAtiva('registrar'),\n          title: \"Clique aqui para ver as parcelas pendentes ou atrasadas.\",\n          children: selectedPacienteId ? 'Pendentes do Paciente' : 'Visão Geral (Pendentes)'\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 247,\n          columnNumber: 11\n        }, this), selectedPacienteId && /*#__PURE__*/_jsxDEV(\"button\", {\n          className: `tab-button ${abaAtiva === 'historico' ? 'active' : ''}`,\n          onClick: () => setAbaAtiva('historico'),\n          title: \"Clique aqui para ver todas as parcelas que j\\xE1 foram pagas.\",\n          children: \"Hist\\xF3rico (Pagos)\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 256,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 246,\n        columnNumber: 9\n      }, this), loadingParcelas && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"loading-message\",\n        children: \"Buscando parcelas...\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 266,\n        columnNumber: 29\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          display: abaAtiva === 'registrar' ? 'block' : 'none'\n        },\n        children: [modoDeExibicao === 'lista' && !loadingParcelas && /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"card-section\",\n          children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n            children: \"Parcelas Pendentes / Atrasadas\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 272,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"parcelas-tabela-wrapper\",\n            children: /*#__PURE__*/_jsxDEV(\"table\", {\n              className: \"parcelas-tabela\",\n              children: [/*#__PURE__*/_jsxDEV(\"thead\", {\n                children: /*#__PURE__*/_jsxDEV(\"tr\", {\n                  children: [/*#__PURE__*/_jsxDEV(\"th\", {\n                    children: \"Selecionar\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 277,\n                    columnNumber: 23\n                  }, this), !selectedPacienteId && /*#__PURE__*/_jsxDEV(\"th\", {\n                    children: \"Paciente\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 278,\n                    columnNumber: 48\n                  }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                    children: \"ID Parcela\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 279,\n                    columnNumber: 23\n                  }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                    children: \"Vencimento\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 280,\n                    columnNumber: 23\n                  }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                    children: \"Valor (R$)\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 281,\n                    columnNumber: 23\n                  }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                    children: \"Status\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 282,\n                    columnNumber: 23\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 276,\n                  columnNumber: 21\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 275,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"tbody\", {\n                children: parcelasPendentes.length > 0 ? parcelasPendentes.map(parcela => {\n                  var _parcela$orcamento, _parcela$orcamento$pa;\n                  return /*#__PURE__*/_jsxDEV(\"tr\", {\n                    children: [/*#__PURE__*/_jsxDEV(\"td\", {\n                      children: /*#__PURE__*/_jsxDEV(\"button\", {\n                        onClick: () => handleParcelaSelect(parcela),\n                        className: \"button-select-parcela\",\n                        title: \"Clique para abrir o formul\\xE1rio de registro de pagamento para esta parcela.\",\n                        children: \"Pagar\"\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 290,\n                        columnNumber: 29\n                      }, this)\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 289,\n                      columnNumber: 27\n                    }, this), !selectedPacienteId && /*#__PURE__*/_jsxDEV(\"td\", {\n                      children: ((_parcela$orcamento = parcela.orcamento) === null || _parcela$orcamento === void 0 ? void 0 : (_parcela$orcamento$pa = _parcela$orcamento.paciente) === null || _parcela$orcamento$pa === void 0 ? void 0 : _parcela$orcamento$pa.nome) || 'Paciente não encontrado'\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 299,\n                      columnNumber: 29\n                    }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                      children: parcela.id_parcela\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 301,\n                      columnNumber: 27\n                    }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                      children: formatDateBR(parcela.data_vencimento)\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 302,\n                      columnNumber: 27\n                    }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                      children: parseFloat(parcela.valor_parcela).toFixed(2)\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 303,\n                      columnNumber: 27\n                    }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                      children: parcela.status\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 304,\n                      columnNumber: 27\n                    }, this)]\n                  }, parcela.id_parcela, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 288,\n                    columnNumber: 25\n                  }, this);\n                }) : /*#__PURE__*/_jsxDEV(\"tr\", {\n                  children: /*#__PURE__*/_jsxDEV(\"td\", {\n                    colSpan: !selectedPacienteId ? 7 : 6,\n                    style: {\n                      textAlign: 'center'\n                    },\n                    children: \"Nenhuma parcela pendente encontrada.\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 309,\n                    columnNumber: 25\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 308,\n                  columnNumber: 23\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 285,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 274,\n              columnNumber: 17\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 273,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 271,\n          columnNumber: 13\n        }, this), modoDeExibicao === 'formulario' && selectedParcela && /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"card-section\",\n          children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n            children: \"Registrar Pagamento da Parcela\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 323,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            style: {\n              marginTop: '-1rem',\n              marginBottom: '1.5rem',\n              fontSize: '0.9rem',\n              color: '#555'\n            },\n            children: [\"Vencimento: \", formatDateBR(selectedParcela.data_vencimento), ' - ', \"Valor: R$ \", parseFloat(selectedParcela.valor_parcela).toFixed(2)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 324,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"form-row\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"form-group\",\n              children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                children: \"Valor da Parcela:\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 332,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                type: \"text\",\n                value: `R$ ${parseFloat(selectedParcela.valor_parcela).toFixed(2)}`,\n                className: \"input-field-readonly\",\n                readOnly: true\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 333,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 331,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"form-group\",\n              children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                children: \"Data de Vencimento:\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 336,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                type: \"text\",\n                value: formatDateBR(selectedParcela.data_vencimento),\n                className: \"input-field-readonly\",\n                readOnly: true\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 337,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 335,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 330,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n            onSubmit: handleSaveRecebimento,\n            className: \"pagamentos-form-simple\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"form-row\",\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"form-group\",\n                children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                  htmlFor: \"data_recebimento\",\n                  title: \"A data em que o pagamento foi efetivamente recebido.\",\n                  children: \"Data do Pagamento: *\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 343,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                  type: \"date\",\n                  id: \"data_recebimento\",\n                  name: \"data_recebimento\",\n                  value: recebimentoData.data_recebimento,\n                  onChange: handleRecebimentoInputChange,\n                  required: true,\n                  className: \"input-field\",\n                  title: \"A data em que o pagamento foi efetivamente recebido.\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 349,\n                  columnNumber: 21\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 342,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"form-group\",\n                children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                  htmlFor: \"valor_recebido\",\n                  title: \"Insira o valor exato recebido. Pode ser um valor parcial ou o total da parcela.\",\n                  children: \"Valor Recebido (R$): *\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 361,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                  type: \"number\",\n                  id: \"valor_recebido\",\n                  name: \"valor_recebido\",\n                  value: recebimentoData.valor_recebido,\n                  onChange: handleRecebimentoInputChange,\n                  step: \"0.01\",\n                  required: true,\n                  className: \"input-field\",\n                  title: \"Insira o valor exato recebido. Pode ser um valor parcial ou o total da parcela.\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 367,\n                  columnNumber: 21\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 360,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 341,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"form-row\",\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"form-group\",\n                children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                  htmlFor: \"tipo\",\n                  title: \"Selecione o m\\xE9todo que o paciente usou para pagar (Pix, Dinheiro, Cart\\xE3o, etc.).\",\n                  children: \"Forma de Pagamento: *\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 382,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n                  id: \"tipo\",\n                  name: \"tipo\",\n                  value: recebimentoData.tipo,\n                  onChange: handleRecebimentoInputChange,\n                  required: true,\n                  className: \"select-field\",\n                  title: \"Selecione o m\\xE9todo que o paciente usou para pagar (Pix, Dinheiro, Cart\\xE3o, etc.).\",\n                  children: [/*#__PURE__*/_jsxDEV(\"option\", {\n                    value: \"\",\n                    children: \"Selecione\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 397,\n                    columnNumber: 23\n                  }, this), mockFormasPagamento.map((forma, index) => /*#__PURE__*/_jsxDEV(\"option\", {\n                    value: forma,\n                    children: forma\n                  }, index, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 398,\n                    columnNumber: 67\n                  }, this))]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 388,\n                  columnNumber: 21\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 381,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"form-group\",\n                style: {\n                  flex: 1\n                }\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 401,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 380,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"form-actions-pagamento\",\n              style: {\n                justifyContent: 'space-between'\n              },\n              children: [/*#__PURE__*/_jsxDEV(\"button\", {\n                type: \"button\",\n                className: \"button-secondary\",\n                onClick: handleCancelarSelecao,\n                title: \"Clique para fechar este formul\\xE1rio e voltar para a lista de parcelas.\",\n                children: \"Cancelar Sele\\xE7\\xE3o\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 404,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                type: \"submit\",\n                className: \"button-primary\",\n                title: \"Clique para salvar este pagamento e marcar a parcela como 'Paga'.\",\n                children: \"Confirmar Recebimento\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 412,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 403,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 340,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 322,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 269,\n        columnNumber: 9\n      }, this), selectedPacienteId && /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          display: abaAtiva === 'historico' ? 'block' : 'none'\n        },\n        children: !loadingParcelas && /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"card-section\",\n          children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n            children: \"Hist\\xF3rico de Parcelas Pagas\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 430,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"parcelas-tabela-wrapper\",\n            children: /*#__PURE__*/_jsxDEV(\"table\", {\n              className: \"parcelas-tabela\",\n              children: [/*#__PURE__*/_jsxDEV(\"thead\", {\n                children: /*#__PURE__*/_jsxDEV(\"tr\", {\n                  children: [/*#__PURE__*/_jsxDEV(\"th\", {\n                    children: \"ID Parcela\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 435,\n                    columnNumber: 25\n                  }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                    children: \"Vencimento\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 436,\n                    columnNumber: 25\n                  }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                    children: \"Valor (R$)\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 437,\n                    columnNumber: 25\n                  }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                    children: \"Status\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 438,\n                    columnNumber: 25\n                  }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                    children: \"Data Pagamento\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 439,\n                    columnNumber: 25\n                  }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                    children: \"Forma Pagamento\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 440,\n                    columnNumber: 25\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 434,\n                  columnNumber: 23\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 433,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"tbody\", {\n                children: parcelasPagas.length > 0 ? parcelasPagas.map(parcela => {\n                  const recebimento = parcela.recebimentos && parcela.recebimentos[0] ? parcela.recebimentos[0] : {};\n                  return /*#__PURE__*/_jsxDEV(\"tr\", {\n                    children: [/*#__PURE__*/_jsxDEV(\"td\", {\n                      children: parcela.id_parcela\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 451,\n                      columnNumber: 31\n                    }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                      children: formatDateBR(parcela.data_vencimento)\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 452,\n                      columnNumber: 31\n                    }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                      children: parseFloat(parcela.valor_parcela).toFixed(2)\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 453,\n                      columnNumber: 31\n                    }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                      children: parcela.status\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 454,\n                      columnNumber: 31\n                    }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                      children: formatDateBR(recebimento.data_recebimento)\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 455,\n                      columnNumber: 31\n                    }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                      children: recebimento.tipo || '-'\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 456,\n                      columnNumber: 31\n                    }, this)]\n                  }, parcela.id_parcela, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 450,\n                    columnNumber: 29\n                  }, this);\n                }) : /*#__PURE__*/_jsxDEV(\"tr\", {\n                  children: /*#__PURE__*/_jsxDEV(\"td\", {\n                    colSpan: \"6\",\n                    style: {\n                      textAlign: 'center'\n                    },\n                    children: \"Nenhum pagamento registrado para este paciente.\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 462,\n                    columnNumber: 27\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 461,\n                  columnNumber: 25\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 443,\n                columnNumber: 21\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 432,\n              columnNumber: 19\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 431,\n            columnNumber: 17\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 429,\n          columnNumber: 15\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 427,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true), /*#__PURE__*/_jsxDEV(\"button\", {\n      className: \"floating-help-button\",\n      onClick: () => setIsAjudaOpen(true),\n      title: \"Ajuda sobre esta p\\xE1gina\",\n      children: /*#__PURE__*/_jsxDEV(FontAwesomeIcon, {\n        icon: faQuestionCircle\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 480,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 475,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Modal, {\n      isOpen: isAjudaOpen,\n      onClose: () => setIsAjudaOpen(false),\n      titulo: \"Ajuda - Controle de Pagamentos\",\n      footer: /*#__PURE__*/_jsxDEV(\"button\", {\n        className: \"modal-button modal-button-secondary\",\n        onClick: () => setIsAjudaOpen(false),\n        title: \"Fechar esta janela de ajuda.\",\n        children: \"Fechar\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 488,\n        columnNumber: 11\n      }, this),\n      children: [/*#__PURE__*/_jsxDEV(\"p\", {\n        children: \"Esta tela permite gerenciar todas as parcelas de pagamentos dos pacientes.\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 497,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"ul\", {\n        style: {\n          paddingLeft: '20px',\n          lineHeight: '1.6'\n        },\n        children: [/*#__PURE__*/_jsxDEV(\"li\", {\n          children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n            children: \"Vis\\xE3o Geral:\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 500,\n            columnNumber: 13\n          }, this), \" Por padr\\xE3o, a tela carrega todas as parcelas \\\"Pendentes\\\" e \\\"Atrasadas\\\" de todos os pacientes.\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 499,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"li\", {\n          children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n            children: \"Filtrar por Paciente:\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 503,\n            columnNumber: 13\n          }, this), \" Use o seletor para focar em um paciente espec\\xEDfico. Isso mostrar\\xE1 as parcelas pendentes e habilitar\\xE1 a aba \\\"Hist\\xF3rico (Pagos)\\\" apenas para ele.\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 502,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"li\", {\n          children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n            children: \"Registrar Pagamento:\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 506,\n            columnNumber: 13\n          }, this), \" Na aba de pend\\xEAncias, clique em \\\"Pagar\\\" para abrir o formul\\xE1rio de registro de pagamento.\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 505,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 498,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 483,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 208,\n    columnNumber: 5\n  }, this);\n}\n_s(Pagamentos, \"xJy1nhMyv7YonvUa70EequDcQIY=\", false, function () {\n  return [useNavigate];\n});\n_c = Pagamentos;\nexport default Pagamentos;\nvar _c;\n$RefreshReg$(_c, \"Pagamentos\");","map":{"version":3,"names":["React","useState","useEffect","useCallback","axios","useNavigate","format","Modal","FontAwesomeIcon","faQuestionCircle","jsxDEV","_jsxDEV","Fragment","_Fragment","API_BASE_URL","mockFormasPagamento","Pagamentos","_s","pacientes","setPacientes","selectedPacienteId","setSelectedPacienteId","loadingPacientes","setLoadingPacientes","loadingParcelas","setLoadingParcelas","error","setError","navigate","abaAtiva","setAbaAtiva","modoDeExibicao","setModoDeExibicao","isAjudaOpen","setIsAjudaOpen","parcelasPendentes","setParcelasPendentes","parcelasPagas","setParcelasPagas","selectedParcela","setSelectedParcela","recebimentoData","setRecebimentoData","data_recebimento","valor_recebido","tipo","fetchPacientes","token","localStorage","getItem","Error","response","get","headers","data","results","err","console","status","alert","fetchParcelas","pacienteId","url","params","paciente_id","paramsSerializer","serialize","parts","key","value","Array","isArray","forEach","val","push","encodeURIComponent","join","todasParcelas","pendentes","filter","p","pagas","handlePacienteChange","e","target","handleParcelaSelect","parcela","parseFloat","valor_parcela","toFixed","Date","handleRecebimentoInputChange","name","prevState","handleSaveRecebimento","preventDefault","userId","dataParaBackend","id_parcela","usuario","parseInt","post","errorMessage","responseData","non_field_errors","detail","JSON","stringify","message","handleCancelarSelecao","formatDateBR","dateString","className","children","style","marginTop","marginBottom","fileName","_jsxFileName","lineNumber","columnNumber","htmlFor","title","id","onChange","disabled","map","id_paciente","nome","onClick","display","length","_parcela$orcamento","_parcela$orcamento$pa","orcamento","paciente","data_vencimento","colSpan","textAlign","fontSize","color","type","readOnly","onSubmit","required","step","forma","index","flex","justifyContent","recebimento","recebimentos","icon","isOpen","onClose","titulo","footer","paddingLeft","lineHeight","_c","$RefreshReg$"],"sources":["C:/Users/milen/Desktop/4º ano/projeto/ProjetoDrGus/frontend/src/paginas/Pagamentos.js"],"sourcesContent":["import React, { useState, useEffect, useCallback } from 'react';\r\nimport axios from 'axios';\r\nimport './Pagamentos.css';\r\nimport { useNavigate } from 'react-router-dom';\r\nimport { format } from 'date-fns';\r\nimport Modal from '../componentes/Modal';\r\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\r\nimport { faQuestionCircle } from '@fortawesome/free-solid-svg-icons';\r\n\r\nconst API_BASE_URL = 'http://localhost:8000';\r\nconst mockFormasPagamento = ['Cartão de Crédito', 'Débito', 'Pix', 'Dinheiro'];\r\n\r\nfunction Pagamentos() {\r\n  //Estados\r\n  const [pacientes, setPacientes] = useState([]);\r\n  const [selectedPacienteId, setSelectedPacienteId] = useState('');\r\n  const [loadingPacientes, setLoadingPacientes] = useState(true);\r\n  const [loadingParcelas, setLoadingParcelas] = useState(true); \r\n  const [error, setError] = useState(null);\r\n  const navigate = useNavigate();\r\n  const [abaAtiva, setAbaAtiva] = useState('registrar'); \r\n  const [modoDeExibicao, setModoDeExibicao] = useState('lista'); \r\n  const [isAjudaOpen, setIsAjudaOpen] = useState(false); \r\n  const [parcelasPendentes, setParcelasPendentes] = useState([]);\r\n  const [parcelasPagas, setParcelasPagas] = useState([]); \r\n  const [selectedParcela, setSelectedParcela] = useState(null);\r\n  const [recebimentoData, setRecebimentoData] = useState({\r\n    data_recebimento: '',\r\n    valor_recebido: '',\r\n    tipo: '',\r\n  });\r\n\r\n  //Funções de Busca\r\n  const fetchPacientes = useCallback(async () => {\r\n    setLoadingPacientes(true);\r\n    try {\r\n      const token = localStorage.getItem('access_token');\r\n      if (!token) throw new Error('Token de autenticação não encontrado.');\r\n      const response = await axios.get(`${API_BASE_URL}/api/pacientes/`, {\r\n        headers: { 'Authorization': `Bearer ${token}` }\r\n      });\r\n      setPacientes(response.data.results || response.data || []);\r\n    } catch (err) {\r\n      console.error('Erro ao buscar pacientes:', err);\r\n      setError('Falha ao carregar pacientes.');\r\n      if (err.response && err.response.status === 401) {\r\n        alert('Sessão expirada. Faça login novamente.');\r\n        navigate('/login');\r\n      }\r\n    } finally {\r\n      setLoadingPacientes(false);\r\n    }\r\n  }, [navigate]);\r\n\r\n  const fetchParcelas = useCallback(async (pacienteId) => {\r\n    setLoadingParcelas(true);\r\n    setError(null);\r\n    setSelectedParcela(null);\r\n    setModoDeExibicao('lista');\r\n\r\n    let url = `${API_BASE_URL}/api/parcelas/`;\r\n    let params = {};\r\n\r\n    if (pacienteId) {\r\n      // Se um paciente é selecionado, buscamos TUDO dele\r\n      params = { paciente_id: pacienteId };\r\n    } else {\r\n      // Se NENHUM paciente (visão geral), buscamos SÓ o que está pendente/atrasado de TODOS\r\n      params = { status: ['Pendente', 'Atrasado'] };\r\n      setParcelasPagas([]); // Limpa o histórico\r\n      setAbaAtiva('registrar'); // Força a aba de registro\r\n    }\r\n\r\n    try {\r\n      const token = localStorage.getItem('access_token');\r\n      if (!token) throw new Error('Token não encontrado.');\r\n\r\n      const response = await axios.get(url, {\r\n        headers: { 'Authorization': `Bearer ${token}` },\r\n        params: params,\r\n        paramsSerializer: {\r\n          serialize: (params) => {\r\n            const parts = [];\r\n            for (const key in params) {\r\n              const value = params[key];\r\n              if (Array.isArray(value)) {\r\n                value.forEach(val => {\r\n                  parts.push(`${key}=${encodeURIComponent(val)}`);\r\n                });\r\n              } else {\r\n                parts.push(`${key}=${encodeURIComponent(value)}`);\r\n              }\r\n            }\r\n            return parts.join('&');\r\n          }\r\n        }\r\n      });\r\n\r\n      const todasParcelas = response.data.results || response.data || [];\r\n\r\n      if (pacienteId) {\r\n        // Se filtramos por paciente, separamos pagos e pendentes\r\n        const pendentes = todasParcelas.filter(p => p.status === 'Pendente' || p.status === 'Atrasado');\r\n        const pagas = todasParcelas.filter(p => p.status === 'Pago');\r\n        setParcelasPendentes(pendentes);\r\n        setParcelasPagas(pagas);\r\n      } else {\r\n        // Se não filtramos (visão geral), todos são pendentes\r\n        setParcelasPendentes(todasParcelas);\r\n        setParcelasPagas([]); // Garante que o histórico está vazio\r\n      }\r\n\r\n    } catch (err) {\r\n      console.error('Erro ao buscar parcelas:', err);\r\n      setError('Falha ao carregar parcelas.');\r\n      setParcelasPendentes([]);\r\n      setParcelasPagas([]);\r\n      if (err.response && err.response.status === 401) {\r\n        alert('Sessão expirada. Faça login novamente.');\r\n        navigate('/login');\r\n      }\r\n    } finally {\r\n      setLoadingParcelas(false);\r\n    }\r\n  }, [navigate]);\r\n  \r\n  useEffect(() => {\r\n    fetchPacientes();\r\n    fetchParcelas(null); \r\n  }, [fetchPacientes, fetchParcelas]); \r\n\r\n  const handlePacienteChange = (e) => {\r\n    const pacienteId = e.target.value;\r\n    setSelectedPacienteId(pacienteId);\r\n    fetchParcelas(pacienteId || null);\r\n  };\r\n\r\n  const handleParcelaSelect = (parcela) => {\r\n    setSelectedParcela(parcela);\r\n    setRecebimentoData({\r\n      valor_recebido: parseFloat(parcela.valor_parcela).toFixed(2),\r\n      data_recebimento: format(new Date(), 'yyyy-MM-dd'),\r\n      tipo: '',\r\n    });\r\n    setModoDeExibicao('formulario');\r\n  };\r\n  \r\n  const handleRecebimentoInputChange = (e) => {\r\n    const { name, value } = e.target;\r\n    setRecebimentoData(prevState => ({ ...prevState, [name]: value }));\r\n  };\r\n\r\n  const handleSaveRecebimento = async (e) => {\r\n    e.preventDefault();\r\n    if (!selectedParcela) { alert('Selecione uma parcela...'); return; }\r\n    const token = localStorage.getItem('access_token');\r\n    const userId = localStorage.getItem('user_id');\r\n    if (!token || !userId) { alert('Erro de autenticação...'); navigate('/'); return; }\r\n    if (!recebimentoData.data_recebimento || !recebimentoData.valor_recebido || !recebimentoData.tipo) { alert('Preencha todos os campos...'); return; }\r\n    try {\r\n      const dataParaBackend = {\r\n        parcela: selectedParcela.id_parcela,\r\n        usuario: parseInt(userId),\r\n        data_recebimento: recebimentoData.data_recebimento,\r\n        valor_recebido: parseFloat(recebimentoData.valor_recebido),\r\n        tipo: recebimentoData.tipo,\r\n      };\r\n      await axios.post(`${API_BASE_URL}/api/recebimentos/`, dataParaBackend, {\r\n        headers: { 'Authorization': `Bearer ${token}` }\r\n      });\r\n      alert('Recebimento registrado com sucesso!');\r\n      \r\n      fetchParcelas(selectedPacienteId || null); \r\n\r\n      setSelectedParcela(null);\r\n      setRecebimentoData({ data_recebimento: '', valor_recebido: '', tipo: '' });\r\n      setModoDeExibicao('lista'); \r\n    } catch (err) {\r\n      let errorMessage = \"Erro desconhecido.\";\r\n      if (err.response && err.response.data) {\r\n          const responseData = err.response.data;\r\n          console.error('Erro backend:', responseData);\r\n          if (responseData.non_field_errors) { errorMessage = responseData.non_field_errors.join(' ');\r\n          } else if (responseData.detail) { errorMessage = responseData.detail;\r\n          } else { errorMessage = JSON.stringify(responseData); }\r\n      } else { errorMessage = err.message; }\r\n      alert(`Erro ao registrar recebimento: ${errorMessage}`);\r\n      setError(errorMessage);\r\n    }\r\n  };\r\n\r\n  const handleCancelarSelecao = () => {\r\n    setModoDeExibicao('lista');\r\n    setSelectedParcela(null);\r\n    setRecebimentoData({ data_recebimento: '', valor_recebido: '', tipo: '' });\r\n    setError(null);\r\n  };\r\n\r\n  const formatDateBR = (dateString) => {\r\n    // ... (código mantido) ...\r\n    if (!dateString) return '-';\r\n    try {\r\n      return format(new Date(dateString + 'T00:00:00'), 'dd/MM/yyyy');\r\n    } catch (e) { console.error(\"Erro formatando data:\", dateString, e); return dateString; }\r\n  };\r\n\r\n  return (\r\n    <div className=\"pagamentos-container\">\r\n      {/* 1. Seleção do Paciente / Filtro */}\r\n      <div className=\"card-section\">\r\n\r\n        {/* --- CORREÇÃO: Título com espaçamento (sem botão) --- */}\r\n        <h2 style={{marginTop: 0, marginBottom: '1.5rem'}}>Controle de Pagamentos</h2>\r\n\r\n        {error && <p className=\"error-message\">{error}</p>}\r\n\r\n        {/* --- CORREÇÃO: Espaçamento (form-group já tem margin-bottom) --- */}\r\n        <div className=\"form-group\">\r\n          <label \r\n            htmlFor=\"paciente\"\r\n            title=\"Filtre por um paciente específico ou veja as pendências de todos.\"\r\n          >\r\n            Filtrar por Paciente:\r\n          </label>\r\n          <select \r\n            id=\"paciente\" \r\n            name=\"paciente\" \r\n            value={selectedPacienteId} \r\n            onChange={handlePacienteChange} \r\n            className=\"select-field\"\r\n            title=\"Filtre por um paciente específico ou veja as pendências de todos.\"\r\n          >\r\n            <option value=\"\">Todos os Pacientes (Visão Geral)</option>\r\n            {loadingPacientes ? (\r\n              <option disabled>Carregando pacientes...</option>\r\n            ) : (\r\n              pacientes.map(p => (<option key={p.id_paciente} value={p.id_paciente}>{p.nome}</option>))\r\n            )}\r\n          </select>\r\n        </div>\r\n      </div>\r\n\r\n      {/* 2. Container das Abas */}\r\n      <>\r\n        {/* --- CORREÇÃO: Adicionado espaçamento (style) --- */}\r\n        <div className=\"pagamentos-tabs-container\" style={{marginTop: '1.5rem'}}>\r\n          <button \r\n            className={`tab-button ${abaAtiva === 'registrar' ? 'active' : ''}`}\r\n            onClick={() => setAbaAtiva('registrar')}\r\n            title=\"Clique aqui para ver as parcelas pendentes ou atrasadas.\"\r\n          >\r\n            {selectedPacienteId ? 'Pendentes do Paciente' : 'Visão Geral (Pendentes)'}\r\n          </button>\r\n          \r\n          {selectedPacienteId && (\r\n            <button \r\n              className={`tab-button ${abaAtiva === 'historico' ? 'active' : ''}`}\r\n              onClick={() => setAbaAtiva('historico')}\r\n              title=\"Clique aqui para ver todas as parcelas que já foram pagas.\"\r\n            >\r\n              Histórico (Pagos)\r\n            </button>\r\n          )}\r\n        </div>\r\n\r\n        {loadingParcelas && <div className=\"loading-message\">Buscando parcelas...</div>}\r\n\r\n        {/* Aba 1: Registrar (Pendentes) */}\r\n        <div style={{ display: abaAtiva === 'registrar' ? 'block' : 'none' }}>\r\n          {modoDeExibicao === 'lista' && !loadingParcelas && (\r\n            <div className=\"card-section\">\r\n              <h3>Parcelas Pendentes / Atrasadas</h3>\r\n              <div className=\"parcelas-tabela-wrapper\">\r\n                <table className=\"parcelas-tabela\">\r\n                  <thead>\r\n                    <tr>\r\n                      <th>Selecionar</th>\r\n                      {!selectedPacienteId && (<th>Paciente</th>)}\r\n                      <th>ID Parcela</th>\r\n                      <th>Vencimento</th>\r\n                      <th>Valor (R$)</th>\r\n                      <th>Status</th>\r\n                    </tr>\r\n                  </thead>\r\n                  <tbody>\r\n                    {parcelasPendentes.length > 0 ? (\r\n                      parcelasPendentes.map(parcela => (\r\n                        <tr key={parcela.id_parcela}>\r\n                          <td>\r\n                            <button \r\n                              onClick={() => handleParcelaSelect(parcela)} \r\n                              className=\"button-select-parcela\"\r\n                              title=\"Clique para abrir o formulário de registro de pagamento para esta parcela.\"\r\n                            >\r\n                              Pagar\r\n                            </button>\r\n                          </td>\r\n                          {!selectedPacienteId && (\r\n                            <td>{parcela.orcamento?.paciente?.nome || 'Paciente não encontrado'}</td>\r\n                          )}\r\n                          <td>{parcela.id_parcela}</td>\r\n                          <td>{formatDateBR(parcela.data_vencimento)}</td>\r\n                          <td>{parseFloat(parcela.valor_parcela).toFixed(2)}</td>\r\n                          <td>{parcela.status}</td>\r\n                        </tr>\r\n                      ))\r\n                    ) : (\r\n                      <tr>\r\n                        <td colSpan={!selectedPacienteId ? 7 : 6} style={{ textAlign: 'center' }}>\r\n                          Nenhuma parcela pendente encontrada.\r\n                        </td>\r\n                      </tr>\r\n                    )}\r\n                  </tbody>\r\n                </table>\r\n              </div>\r\n            </div>\r\n          )}\r\n\r\n          {/* Formulário de Pagamento */}\r\n          {modoDeExibicao === 'formulario' && selectedParcela && (\r\n            <div className=\"card-section\">\r\n              <h3>Registrar Pagamento da Parcela</h3>\r\n              <p style={{marginTop: '-1rem', marginBottom: '1.5rem', fontSize: '0.9rem', color: '#555'}}>\r\n                   Vencimento: {formatDateBR(selectedParcela.data_vencimento)} \r\n                   {' - '}\r\n                   Valor: R$ {parseFloat(selectedParcela.valor_parcela).toFixed(2)}\r\n                </p>\r\n\r\n              <div className=\"form-row\">\r\n                <div className=\"form-group\">\r\n                  <label>Valor da Parcela:</label>\r\n                  <input type=\"text\" value={`R$ ${parseFloat(selectedParcela.valor_parcela).toFixed(2)}`} className=\"input-field-readonly\" readOnly />\r\n                </div>\r\n                <div className=\"form-group\">\r\n                  <label>Data de Vencimento:</label>\r\n                  <input type=\"text\" value={formatDateBR(selectedParcela.data_vencimento)} className=\"input-field-readonly\" readOnly />\r\n                </div>\r\n              </div>\r\n              <form onSubmit={handleSaveRecebimento} className=\"pagamentos-form-simple\">\r\n                <div className=\"form-row\">\r\n                  <div className=\"form-group\">\r\n                    <label \r\n                      htmlFor=\"data_recebimento\"\r\n                      title=\"A data em que o pagamento foi efetivamente recebido.\"\r\n                    >\r\n                      Data do Pagamento: *\r\n                    </label>\r\n                    <input \r\n                      type=\"date\" \r\n                      id=\"data_recebimento\" \r\n                      name=\"data_recebimento\" \r\n                      value={recebimentoData.data_recebimento} \r\n                      onChange={handleRecebimentoInputChange} \r\n                      required \r\n                      className=\"input-field\"\r\n                      title=\"A data em que o pagamento foi efetivamente recebido.\"\r\n                    />\r\n                  </div>\r\n                  <div className=\"form-group\">\r\n                    <label \r\n                      htmlFor=\"valor_recebido\"\r\n                      title=\"Insira o valor exato recebido. Pode ser um valor parcial ou o total da parcela.\"\r\n                    >\r\n                      Valor Recebido (R$): *\r\n                    </label>\r\n                    <input \r\n                      type=\"number\" \r\n                      id=\"valor_recebido\" \r\n                      name=\"valor_recebido\" \r\n                      value={recebimentoData.valor_recebido} \r\n                      onChange={handleRecebimentoInputChange} \r\n                      step=\"0.01\" \r\n                      required \r\n                      className=\"input-field\"\r\n                      title=\"Insira o valor exato recebido. Pode ser um valor parcial ou o total da parcela.\"\r\n                    />\r\n                  </div>\r\n                </div>\r\n                <div className=\"form-row\">\r\n                  <div className=\"form-group\">\r\n                    <label \r\n                      htmlFor=\"tipo\"\r\n                      title=\"Selecione o método que o paciente usou para pagar (Pix, Dinheiro, Cartão, etc.).\"\r\n                    >\r\n                      Forma de Pagamento: *\r\n                    </label>\r\n                    <select \r\n                      id=\"tipo\" \r\n                      name=\"tipo\" \r\n                      value={recebimentoData.tipo} \r\n                      onChange={handleRecebimentoInputChange} \r\n                      required \r\n                      className=\"select-field\"\r\n                      title=\"Selecione o método que o paciente usou para pagar (Pix, Dinheiro, Cartão, etc.).\"\r\n                    >\r\n                      <option value=\"\">Selecione</option>\r\n                      {mockFormasPagamento.map((forma, index) => (<option key={index} value={forma}>{forma}</option>))}\r\n                    </select>\r\n                  </div>\r\n                  <div className=\"form-group\" style={{ flex: 1 }}></div>\r\n                </div>\r\n                <div className=\"form-actions-pagamento\" style={{ justifyContent: 'space-between' }}>\r\n                  <button \r\n                    type=\"button\" \r\n                    className=\"button-secondary\" \r\n                    onClick={handleCancelarSelecao}\r\n                    title=\"Clique para fechar este formulário e voltar para a lista de parcelas.\"\r\n                  >\r\n                    Cancelar Seleção\r\n                  </button>\r\n                  <button \r\n                    type=\"submit\" \r\n                    className=\"button-primary\"\r\n                    title=\"Clique para salvar este pagamento e marcar a parcela como 'Paga'.\"\r\n                  >\r\n                    Confirmar Recebimento\r\n                  </button>\r\n                </div>\r\n              </form>\r\n            </div>\r\n          )}\r\n        </div>\r\n\r\n        {/* Aba 2: Histórico (Pagos) */}\r\n        {selectedPacienteId && (\r\n          <div style={{ display: abaAtiva === 'historico' ? 'block' : 'none' }}>\r\n            {!loadingParcelas && (\r\n              <div className=\"card-section\">\r\n                <h3>Histórico de Parcelas Pagas</h3>\r\n                <div className=\"parcelas-tabela-wrapper\">\r\n                  <table className=\"parcelas-tabela\">\r\n                    <thead>\r\n                      <tr>\r\n                        <th>ID Parcela</th>\r\n                        <th>Vencimento</th>\r\n                        <th>Valor (R$)</th>\r\n                        <th>Status</th>\r\n                        <th>Data Pagamento</th>\r\n                        <th>Forma Pagamento</th>\r\n                      </tr>\r\n                    </thead>\r\n                    <tbody>\r\n                      {parcelasPagas.length > 0 ? (\r\n                        parcelasPagas.map(parcela => {\r\n                          const recebimento = (parcela.recebimentos && parcela.recebimentos[0])\r\n                            ? parcela.recebimentos[0]\r\n                            : {};\r\n                          return (\r\n                            <tr key={parcela.id_parcela}>\r\n                              <td>{parcela.id_parcela}</td>\r\n                              <td>{formatDateBR(parcela.data_vencimento)}</td>\r\n                              <td>{parseFloat(parcela.valor_parcela).toFixed(2)}</td>\r\n                              <td>{parcela.status}</td>\r\n                              <td>{formatDateBR(recebimento.data_recebimento)}</td>\r\n                              <td>{recebimento.tipo || '-'}</td>\r\n                            </tr>\r\n                          );\r\n                        })\r\n                      ) : (\r\n                        <tr>\r\n                          <td colSpan=\"6\" style={{ textAlign: 'center' }}>Nenhum pagamento registrado para este paciente.</td>\r\n                        </tr>\r\n                      )}\r\n                    </tbody>\r\n                  </table>\r\n                </div>\r\n              </div>\r\n            )}\r\n          </div>\r\n        )}\r\n      </>\r\n\r\n      {/* --- CORREÇÃO: BOTÃO FLUTUANTE + TEXTO DO MODAL ATUALIZADO --- */}\r\n      <button \r\n        className=\"floating-help-button\" \r\n        onClick={() => setIsAjudaOpen(true)}\r\n        title=\"Ajuda sobre esta página\"\r\n      >\r\n        <FontAwesomeIcon icon={faQuestionCircle} />\r\n      </button>\r\n\r\n      <Modal\r\n        isOpen={isAjudaOpen}\r\n        onClose={() => setIsAjudaOpen(false)}\r\n        titulo=\"Ajuda - Controle de Pagamentos\"\r\n        footer={\r\n          <button \r\n            className=\"modal-button modal-button-secondary\" \r\n            onClick={() => setIsAjudaOpen(false)}\r\n            title=\"Fechar esta janela de ajuda.\"\r\n          >\r\n            Fechar\r\n          </button>\r\n        }\r\n      >\r\n        <p>Esta tela permite gerenciar todas as parcelas de pagamentos dos pacientes.</p>\r\n        <ul style={{ paddingLeft: '20px', lineHeight: '1.6' }}>\r\n          <li>\r\n            <strong>Visão Geral:</strong> Por padrão, a tela carrega todas as parcelas \"Pendentes\" e \"Atrasadas\" de todos os pacientes.\r\n          </li>\r\n          <li>\r\n            <strong>Filtrar por Paciente:</strong> Use o seletor para focar em um paciente específico. Isso mostrará as parcelas pendentes e habilitará a aba \"Histórico (Pagos)\" apenas para ele.\r\n          </li>\r\n          <li>\r\n            <strong>Registrar Pagamento:</strong> Na aba de pendências, clique em \"Pagar\" para abrir o formulário de registro de pagamento.\r\n          </li>\r\n        </ul>\r\n      </Modal>\r\n\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default Pagamentos;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}